var wt=Object.defineProperty;var yt=(t,e,n)=>e in t?wt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ke=(t,e,n)=>(yt(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(i){if(i.ep)return;i.ep=!0;const c=n(i);fetch(i.href,c)}})();function K(){}function mt(t){return t()}function $e(){return Object.create(null)}function fe(t){t.forEach(mt)}function kt(t){return typeof t=="function"}function je(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function jt(t){return Object.keys(t).length===0}function Dt(t,...e){if(t==null){for(const l of e)l(void 0);return K}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function ne(t,e,n){t.$$.on_destroy.push(Dt(e,n))}function de(t){return t??""}function he(t,e,n){return t.set(n),e}function r(t,e){t.appendChild(e)}function L(t,e,n){t.insertBefore(e,n||null)}function O(t){t.parentNode&&t.parentNode.removeChild(t)}function Je(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function j(t){return document.createTextNode(t)}function w(){return j(" ")}function Mt(){return j("")}function P(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function v(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ct(t){let e;return{p(...n){e=n,e.forEach(l=>t.push(l))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function oe(t){return t===""?null:+t}function Nt(t){return Array.from(t.childNodes)}function se(t,e){e=""+e,t.data!==e&&(t.data=e)}function H(t,e){t.value=e??""}function Fe(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function xe(t,e,n){for(let l=0;l<t.options.length;l+=1){const i=t.options[l];if(i.__value===e){i.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Et(t){const e=t.querySelector(":checked");return e&&e.__value}function Ot(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let Ve;function Te(t){Ve=t}function Lt(){if(!Ve)throw new Error("Function called outside component initialization");return Ve}function bt(){const t=Lt();return(e,n,{cancelable:l=!1}={})=>{const i=t.$$.callbacks[e];if(i){const c=Ot(e,n,{cancelable:l});return i.slice().forEach(s=>{s.call(t,c)}),!c.defaultPrevented}return!0}}const Ne=[],et=[];let Ee=[];const tt=[],qt=Promise.resolve();let Xe=!1;function It(){Xe||(Xe=!0,qt.then(vt))}function ze(t){Ee.push(t)}const Ge=new Set;let Me=0;function vt(){if(Me!==0)return;const t=Ve;do{try{for(;Me<Ne.length;){const e=Ne[Me];Me++,Te(e),Bt(e.$$)}}catch(e){throw Ne.length=0,Me=0,e}for(Te(null),Ne.length=0,Me=0;et.length;)et.pop()();for(let e=0;e<Ee.length;e+=1){const n=Ee[e];Ge.has(n)||(Ge.add(n),n())}Ee.length=0}while(Ne.length);for(;tt.length;)tt.pop()();Xe=!1,Ge.clear(),Te(t)}function Bt(t){if(t.fragment!==null){t.update(),fe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ze)}}function Pt(t){const e=[],n=[];Ee.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),Ee=e}const We=new Set;let we;function Ze(){we={r:0,c:[],p:we}}function Se(){we.r||fe(we.c),we=we.p}function te(t,e){t&&t.i&&(We.delete(t),t.i(e))}function ue(t,e,n,l){if(t&&t.o){if(We.has(t))return;We.add(t),we.c.push(()=>{We.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function ke(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Re(t){t&&t.c()}function Oe(t,e,n){const{fragment:l,after_update:i}=t.$$;l&&l.m(e,n),ze(()=>{const c=t.$$.on_mount.map(mt).filter(kt);t.$$.on_destroy?t.$$.on_destroy.push(...c):fe(c),t.$$.on_mount=[]}),i.forEach(ze)}function Le(t,e){const n=t.$$;n.fragment!==null&&(Pt(n.after_update),fe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function At(t,e){t.$$.dirty[0]===-1&&(Ne.push(t),It(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function qe(t,e,n,l,i,c,s=null,u=[-1]){const f=Ve;Te(t);const o=t.$$={fragment:null,ctx:[],props:c,update:K,not_equal:i,bound:$e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:$e(),dirty:u,skip_bound:!1,root:e.target||f.$$.root};s&&s(o.root);let _=!1;if(o.ctx=n?n(t,e.props||{},(g,C,...k)=>{const V=k.length?k[0]:C;return o.ctx&&i(o.ctx[g],o.ctx[g]=V)&&(!o.skip_bound&&o.bound[g]&&o.bound[g](V),_&&At(t,g)),C}):[],o.update(),_=!0,fe(o.before_update),o.fragment=l?l(o.ctx):!1,e.target){if(e.hydrate){const g=Nt(e.target);o.fragment&&o.fragment.l(g),g.forEach(O)}else o.fragment&&o.fragment.c();e.intro&&te(t.$$.fragment),Oe(t,e.target,e.anchor),vt()}Te(f)}class Ie{constructor(){Ke(this,"$$");Ke(this,"$$set")}$destroy(){Le(this,1),this.$destroy=K}$on(e,n){if(!kt(n))return K;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(e){this.$$set&&!jt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ft="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ft);const Ce=[];function He(t,e=K){let n;const l=new Set;function i(u){if(je(t,u)&&(t=u,n)){const f=!Ce.length;for(const o of l)o[1](),Ce.push(o,t);if(f){for(let o=0;o<Ce.length;o+=2)Ce[o][0](Ce[o+1]);Ce.length=0}}}function c(u){i(u(t))}function s(u,f=K){const o=[u,f];return l.add(o),l.size===1&&(n=e(i,c)||K),u(t),()=>{l.delete(o),l.size===0&&n&&(n(),n=null)}}return{set:i,update:c,subscribe:s}}const Ye=He(""),Ue=He(!1),me=He(""),ae=He([]);function nt(t,e,n){const l=t.slice();return l[18]=e[n],l}function lt(t){let e,n,l,i=t[18].name+"",c,s,u,f,o,_,g,C=t[18].known_coverage.toFixed(1)+"",k,V,M,A=t[18].learning_coverage.toFixed(1)+"",N,D,p,b=t[18].vocab_count+"",a,m,I,$=t[18].word_count+"",le,x,R,ce=t[18].is_built_in+"",Z,ie,Q,_e;function re(...ee){return t[16](t[18],...ee)}return{c(){e=d("tr"),n=d("td"),l=d("a"),c=j(i),s=w(),u=d("a"),f=j("[jpdb]"),_=w(),g=d("td"),k=j(C),V=w(),M=d("td"),N=j(A),D=w(),p=d("td"),a=j(b),m=w(),I=d("td"),le=j($),x=w(),R=d("td"),Z=j(ce),ie=w(),v(l,"href","#"),v(u,"target","_blank"),v(u,"href",o="https://jpdb.io/deck?id="+t[18].id),v(n,"class","svelte-mesrax"),Fe(g,"text-align","right"),v(g,"class","svelte-mesrax"),Fe(M,"text-align","right"),v(M,"class","svelte-mesrax"),Fe(p,"text-align","right"),v(p,"class","svelte-mesrax"),Fe(I,"text-align","right"),v(I,"class","svelte-mesrax"),Fe(R,"text-align","center"),v(R,"class","svelte-mesrax"),v(e,"class","svelte-mesrax")},m(ee,S){L(ee,e,S),r(e,n),r(n,l),r(l,c),r(n,s),r(n,u),r(u,f),r(e,_),r(e,g),r(g,k),r(e,V),r(e,M),r(M,N),r(e,D),r(e,p),r(p,a),r(e,m),r(e,I),r(I,le),r(e,x),r(e,R),r(R,Z),r(e,ie),Q||(_e=P(l,"click",re),Q=!0)},p(ee,S){t=ee,S&32&&i!==(i=t[18].name+"")&&se(c,i),S&32&&o!==(o="https://jpdb.io/deck?id="+t[18].id)&&v(u,"href",o),S&32&&C!==(C=t[18].known_coverage.toFixed(1)+"")&&se(k,C),S&32&&A!==(A=t[18].learning_coverage.toFixed(1)+"")&&se(N,A),S&32&&b!==(b=t[18].vocab_count+"")&&se(a,b),S&32&&$!==($=t[18].word_count+"")&&se(le,$),S&32&&ce!==(ce=t[18].is_built_in+"")&&se(Z,ce)},d(ee){ee&&O(e),Q=!1,_e()}}}function it(t){let e,n,l;return{c(){e=d("button"),e.textContent="add all"},m(i,c){L(i,e,c),n||(l=P(e,"click",t[17]),n=!0)},p:K,d(i){i&&O(e),n=!1,l()}}}function Tt(t){let e,n,l,i=t[5].length+"",c,s,u=t[3].length+"",f,o,_,g,C,k,V,M,A,N,D,p,b,a,m,I,$,le,x,R,ce,Z,ie,Q,_e,re,ee,S,y,F,W,Y,J,U,be,pe,Be,De,ve,Pe,ge,G,X,z=ke(t[5]),B=[];for(let h=0;h<z.length;h+=1)B[h]=lt(nt(t,z,h));let T=t[3].length>0&&it(t);return{c(){e=d("div"),n=d("h3"),l=j("Decklist (showing "),c=j(i),s=j(" of "),f=j(u),o=j(")"),_=j(`
    Min coverage:
    `),g=d("input"),C=j(`
    Min learning coverage:
    `),k=d("input"),V=j(`
    Filter builtin:
    `),M=d("input"),A=w(),N=d("table"),D=d("tr"),p=d("th"),b=d("i"),m=j(`
                name`),I=w(),$=d("th"),le=d("i"),R=j(`
                coverage`),ce=w(),Z=d("th"),ie=d("i"),_e=j(`
                learning`),re=d("br"),ee=j("coverage"),S=w(),y=d("th"),F=d("i"),Y=j(`
                vocab`),J=w(),U=d("th"),be=d("i"),Be=j(`
                words`),De=w(),ve=d("th"),ve.textContent="is_built_in",Pe=w();for(let h=0;h<B.length;h+=1)B[h].c();ge=w(),T&&T.c(),v(g,"type","number"),v(k,"type","number"),v(M,"type","checkbox"),v(b,"class",a=de(t[4]==t[7].Name?"sorting_asc":"sorting")+" svelte-mesrax"),v(le,"class",x=de(t[4]==t[7].Coverage?"sorting_desc":"sorting")+" svelte-mesrax"),v(ie,"class",Q=de(t[4]==t[7].Learning?"sorting_desc":"sorting")+" svelte-mesrax"),v(F,"class",W=de(t[4]==t[7].VocabCount?"sorting_desc":"sorting")+" svelte-mesrax"),v(be,"class",pe=de(t[4]==t[7].WordCount?"sorting_desc":"sorting")+" svelte-mesrax"),v(D,"class","svelte-mesrax"),v(N,"class","svelte-mesrax")},m(h,q){L(h,e,q),r(e,n),r(n,l),r(n,c),r(n,s),r(n,f),r(n,o),r(e,_),r(e,g),H(g,t[0]),r(e,C),r(e,k),H(k,t[1]),r(e,V),r(e,M),M.checked=t[2],r(e,A),r(e,N),r(N,D),r(D,p),r(p,b),r(p,m),r(D,I),r(D,$),r($,le),r($,R),r(D,ce),r(D,Z),r(Z,ie),r(Z,_e),r(Z,re),r(Z,ee),r(D,S),r(D,y),r(y,F),r(y,Y),r(D,J),r(D,U),r(U,be),r(U,Be),r(D,De),r(D,ve),r(N,Pe);for(let E=0;E<B.length;E+=1)B[E]&&B[E].m(N,null);r(e,ge),T&&T.m(e,null),G||(X=[P(g,"input",t[8]),P(k,"input",t[9]),P(M,"change",t[10]),P(p,"click",t[11]),P($,"click",t[12]),P(Z,"click",t[13]),P(y,"click",t[14]),P(U,"click",t[15])],G=!0)},p(h,[q]){if(q&32&&i!==(i=h[5].length+"")&&se(c,i),q&8&&u!==(u=h[3].length+"")&&se(f,u),q&1&&oe(g.value)!==h[0]&&H(g,h[0]),q&2&&oe(k.value)!==h[1]&&H(k,h[1]),q&4&&(M.checked=h[2]),q&16&&a!==(a=de(h[4]==h[7].Name?"sorting_asc":"sorting")+" svelte-mesrax")&&v(b,"class",a),q&16&&x!==(x=de(h[4]==h[7].Coverage?"sorting_desc":"sorting")+" svelte-mesrax")&&v(le,"class",x),q&16&&Q!==(Q=de(h[4]==h[7].Learning?"sorting_desc":"sorting")+" svelte-mesrax")&&v(ie,"class",Q),q&16&&W!==(W=de(h[4]==h[7].VocabCount?"sorting_desc":"sorting")+" svelte-mesrax")&&v(F,"class",W),q&16&&pe!==(pe=de(h[4]==h[7].WordCount?"sorting_desc":"sorting")+" svelte-mesrax")&&v(be,"class",pe),q&96){z=ke(h[5]);let E;for(E=0;E<z.length;E+=1){const Ae=nt(h,z,E);B[E]?B[E].p(Ae,q):(B[E]=lt(Ae),B[E].c(),B[E].m(N,null))}for(;E<B.length;E+=1)B[E].d(1);B.length=z.length}h[3].length>0?T?T.p(h,q):(T=it(h),T.c(),T.m(e,null)):T&&(T.d(1),T=null)},i:K,o:K,d(h){h&&O(e),Je(B,h),T&&T.d(),G=!1,fe(X)}}}function Vt(t,e,n){let l,i;ne(t,ae,a=>n(6,i=a));let{min_coverage:c}=e,{min_learning:s}=e,{filter_builtin:u}=e,{decks:f}=e;var o=(a=>(a[a.None=0]="None",a[a.Name=1]="Name",a[a.Coverage=2]="Coverage",a[a.Learning=3]="Learning",a[a.WordCount=4]="WordCount",a[a.VocabCount=5]="VocabCount",a))(o||{});let _=0;function g(){c=oe(this.value),n(0,c)}function C(){s=oe(this.value),n(1,s)}function k(){u=this.checked,n(2,u)}const V=a=>n(4,_=o.Name),M=a=>n(4,_=o.Coverage),A=a=>n(4,_=o.Learning),N=a=>n(4,_=o.VocabCount),D=a=>n(4,_=o.WordCount),p=(a,m)=>{m.preventDefault(),i.push(a),ae.set(i)},b=async()=>{i.concat(l),ae.set(i)};return t.$$set=a=>{"min_coverage"in a&&n(0,c=a.min_coverage),"min_learning"in a&&n(1,s=a.min_learning),"filter_builtin"in a&&n(2,u=a.filter_builtin),"decks"in a&&n(3,f=a.decks)},t.$$.update=()=>{t.$$.dirty&8&&f.length>0&&n(4,_=0),t.$$.dirty&31&&n(5,l=f.filter(a=>a.known_coverage>=c&&a.learning_coverage>=s&&(a.is_built_in||!u)).sort((a,m)=>{switch(_){case 0:return 0;case 1:return a.name.localeCompare(m.name);case 2:return m.known_coverage-a.known_coverage;case 3:return m.learning_coverage-a.learning_coverage;case 4:return m.word_count-a.word_count;case 5:return m.vocab_count-a.vocab_count}}))},[c,s,u,f,_,l,i,o,g,C,k,V,M,A,N,D,p,b]}class Yt extends Ie{constructor(e){super(),qe(this,e,Vt,Tt,je,{min_coverage:0,min_learning:1,filter_builtin:2,decks:3})}}async function ye(t,e,n){let l=new Headers;return l.set("Authorization","Bearer "+n),l.set("Content-Type","application/json"),await fetch("https://jpdb.io/api/v1/"+t,{headers:l,method:"POST",body:JSON.stringify(e)})}function rt(t,e,n){const l=t.slice();return l[33]=e[n],l}function ct(t,e,n){const l=t.slice();return l[36]=e[n],l}function st(t){let e,n=t[36].name+"",l;return{c(){e=d("p"),l=j(n)},m(i,c){L(i,e,c),r(e,l)},p(i,c){c[0]&1024&&n!==(n=i[36].name+"")&&se(l,n)},d(i){i&&O(e)}}}function ot(t){let e,n,l,i,c;return{c(){e=d("p"),n=j(`min decks:
                `),l=d("input"),v(l,"type","number")},m(s,u){L(s,e,u),r(e,n),r(e,l),H(l,t[2]),i||(c=P(l,"input",t[24]),i=!0)},p(s,u){u[0]&4&&oe(l.value)!==s[2]&&H(l,s[2])},d(s){s&&O(e),i=!1,c()}}}function ut(t){let e,n,l,i=ke(t[12]),c=[];for(let s=0;s<i.length;s+=1)c[s]=at(rt(t,i,s));return{c(){e=d("select");for(let s=0;s<c.length;s+=1)c[s].c();t[6]===void 0&&ze(()=>t[26].call(e))},m(s,u){L(s,e,u);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(e,null);xe(e,t[6],!0),n||(l=P(e,"change",t[26]),n=!0)},p(s,u){if(u[0]&4096){i=ke(s[12]);let f;for(f=0;f<i.length;f+=1){const o=rt(s,i,f);c[f]?c[f].p(o,u):(c[f]=at(o),c[f].c(),c[f].m(e,null))}for(;f<c.length;f+=1)c[f].d(1);c.length=i.length}u[0]&4160&&xe(e,s[6])},d(s){s&&O(e),Je(c,s),n=!1,l()}}}function at(t){let e,n=t[33]+"",l,i;return{c(){e=d("option"),l=j(n),i=w(),e.__value=t[33],H(e,e.__value)},m(c,s){L(c,e,s),r(e,l),r(e,i)},p:K,d(c){c&&O(e)}}}function ft(t){let e,n,l,i,c,s,u,f,o;return{c(){e=d("p"),n=j("min: "),l=d("input"),i=w(),c=d("p"),s=j("max: "),u=d("input"),v(l,"type","number"),v(u,"type","number")},m(_,g){L(_,e,g),r(e,n),r(e,l),H(l,t[8]),L(_,i,g),L(_,c,g),r(c,s),r(c,u),H(u,t[9]),f||(o=[P(l,"input",t[28]),P(u,"input",t[29])],f=!0)},p(_,g){g[0]&256&&oe(l.value)!==_[8]&&H(l,_[8]),g[0]&512&&oe(u.value)!==_[9]&&H(u,_[9])},d(_){_&&(O(e),O(i),O(c)),f=!1,fe(o)}}}function _t(t){let e,n,l=t[4].name+"",i,c,s,u,f;return{c(){e=d("p"),n=j(`Last created:
                `),i=j(l),c=w(),s=d("a"),u=j("[jpdb]"),v(s,"target","_blank"),v(s,"href",f="https://jpdb.io/deck?id="+t[4].id)},m(o,_){L(o,e,_),r(e,n),r(e,i),r(e,c),r(e,s),r(s,u)},p(o,_){_[0]&16&&l!==(l=o[4].name+"")&&se(i,l),_[0]&16&&f!==(f="https://jpdb.io/deck?id="+o[4].id)&&v(s,"href",f)},d(o){o&&O(e)}}}function Rt(t){let e,n,l,i,c,s,u,f,o,_,g,C,k,V,M,A,N,D,p,b,a,m,I,$,le,x,R,ce,Z,ie,Q,_e,re,ee,S,y,F,W,Y,J,U,be,pe,Be,De,ve,Pe,ge=ke(t[10]),G=[];for(let h=0;h<ge.length;h+=1)G[h]=st(ct(t,ge,h));let X=t[3]==t[11].BijakMerge&&ot(t),z=t[5]&&ut(t),B=t[7]&&ft(t),T=t[4]!=null&&_t(t);return De=Ct(t[21][0]),{c(){e=d("div"),n=d("h3"),n.textContent="Deckmerger",l=j(`
        selected decks:`),i=d("br"),c=w();for(let h=0;h<G.length;h+=1)G[h].c();s=w(),u=d("button"),u.textContent="Reset selection",f=w(),o=d("p"),_=j(`Name of new deck
            `),g=d("input"),C=w(),k=d("p"),V=j(`min occurences:
            `),M=d("input"),A=w(),N=d("p"),D=d("label"),p=d("input"),b=j(`
                Merge`),a=w(),m=d("label"),I=d("input"),$=j(`
                Intersect`),le=w(),x=d("label"),R=d("input"),ce=j(`
                BijakMerge`),Z=w(),X&&X.c(),ie=w(),Q=d("p"),_e=j(`Filter for card state?
            `),re=d("input"),ee=w(),z&&z.c(),S=w(),y=d("p"),F=j(`Filter by global frequency?
            `),W=d("input"),Y=w(),B&&B.c(),J=w(),U=d("button"),be=j("create deck"),Be=w(),T&&T.c(),v(g,"type","text"),v(M,"type","number"),v(p,"type","radio"),v(p,"name","strat"),p.__value=t[11].Merge,H(p,p.__value),v(D,"title","Merges decks into new deck, adds up all vocab occurences, then removes all vocab where occurences < min_occurences"),v(I,"type","radio"),v(I,"name","strat"),I.__value=t[11].Intersect,H(I,I.__value),v(m,"title","Only adds those words into the new deck that appear in all decks. Then removes all where occurences < min_occurences"),v(R,"type","radio"),v(R,"name","strat"),R.__value=t[11].BijakMerge,H(R,R.__value),v(x,"title","The BijakMerge (named after its inventor) works just like the regular merge, but also needs a minimum number of decks for a word to appear in for it to be included."),v(re,"type","checkbox"),v(W,"type","checkbox"),U.disabled=pe=t[10].length<=0,v(e,"id","deckmerger_div"),De.p(p,I,R)},m(h,q){L(h,e,q),r(e,n),r(e,l),r(e,i),r(e,c);for(let E=0;E<G.length;E+=1)G[E]&&G[E].m(e,null);r(e,s),r(e,u),r(e,f),r(e,o),r(o,_),r(o,g),H(g,t[0]),r(e,C),r(e,k),r(k,V),r(k,M),H(M,t[1]),r(e,A),r(e,N),r(N,D),r(D,p),p.checked=p.__value===t[3],r(D,b),r(N,a),r(N,m),r(m,I),I.checked=I.__value===t[3],r(m,$),r(N,le),r(N,x),r(x,R),R.checked=R.__value===t[3],r(x,ce),r(e,Z),X&&X.m(e,null),r(e,ie),r(e,Q),r(Q,_e),r(Q,re),re.checked=t[5],r(Q,ee),z&&z.m(Q,null),r(e,S),r(e,y),r(y,F),r(y,W),W.checked=t[7],r(y,Y),B&&B.m(y,null),r(e,J),r(e,U),r(U,be),r(e,Be),T&&T.m(e,null),ve||(Pe=[P(u,"click",t[17]),P(g,"input",t[18]),P(M,"input",t[19]),P(p,"change",t[20]),P(I,"change",t[22]),P(R,"change",t[23]),P(re,"change",t[25]),P(W,"change",t[27]),P(U,"click",t[30])],ve=!0)},p(h,q){if(q[0]&1024){ge=ke(h[10]);let E;for(E=0;E<ge.length;E+=1){const Ae=ct(h,ge,E);G[E]?G[E].p(Ae,q):(G[E]=st(Ae),G[E].c(),G[E].m(e,s))}for(;E<G.length;E+=1)G[E].d(1);G.length=ge.length}q[0]&1&&g.value!==h[0]&&H(g,h[0]),q[0]&2&&oe(M.value)!==h[1]&&H(M,h[1]),q[0]&8&&(p.checked=p.__value===h[3]),q[0]&8&&(I.checked=I.__value===h[3]),q[0]&8&&(R.checked=R.__value===h[3]),h[3]==h[11].BijakMerge?X?X.p(h,q):(X=ot(h),X.c(),X.m(e,ie)):X&&(X.d(1),X=null),q[0]&32&&(re.checked=h[5]),h[5]?z?z.p(h,q):(z=ut(h),z.c(),z.m(Q,null)):z&&(z.d(1),z=null),q[0]&128&&(W.checked=h[7]),h[7]?B?B.p(h,q):(B=ft(h),B.c(),B.m(y,null)):B&&(B.d(1),B=null),q[0]&1024&&pe!==(pe=h[10].length<=0)&&(U.disabled=pe),h[4]!=null?T?T.p(h,q):(T=_t(h),T.c(),T.m(e,null)):T&&(T.d(1),T=null)},i:K,o:K,d(h){h&&O(e),Je(G,h),X&&X.d(),z&&z.d(),B&&B.d(),T&&T.d(),De.r(),ve=!1,fe(Pe)}}}function Qe(t,e){const n=[];for(const l of t)for(const i of l){const c=n.find(s=>s.vid===i.vid&&s.sid===i.sid);c!=null?(c.occurences+=i.occurences,c.decks+=1):n.push({decks:1,...i})}return n.filter(l=>l.decks>=e)}function Wt(t,e,n){let l,i,c;ne(t,Ye,y=>n(31,l=y)),ne(t,me,y=>n(32,i=y)),ne(t,ae,y=>n(10,c=y));var s=(y=>(y[y.Merge=0]="Merge",y[y.Intersect=1]="Intersect",y[y.BijakMerge=2]="BijakMerge",y))(s||{});let u="",f=1,o=1,_=0,g=null,C=!1,k=["new","locked","learning","known","due","failed","never-forget","suspended","blacklisted"],V=k[0],M=!1,A=1,N=3e4;async function D(y){const F=await(await ye("deck/list-vocabulary",{id:y.id,fetch_occurences:!0},l)).json();let W=[];for(let Y=0;Y<F.vocabulary.length;Y++){let J={vid:F.vocabulary[Y][0],sid:F.vocabulary[Y][1],occurences:F.occurences[Y]};W.push(J)}return{vocabs:W,...y}}async function p(y){const F=y.map(J=>[J.vid,J.sid]),W=await(await ye("lookup-vocabulary",{list:F,fields:["card_state","frequency_rank"]},l)).json();let Y=[];for(let J=0;J<W.vocabulary_info.length;J++)Y.push({state:W.vocabulary_info[J][0],frequency:W.vocabulary_info[J][1],...y[J]});return Y}async function b(y,F){let W=[],Y=[];F.forEach(U=>{W.push([U.vid,U.sid]),Y.push(U.occurences)});const J=await(await ye("deck/add-vocabulary",{id:y,vocabulary:W,occurences:Y},l)).json();he(me,i=JSON.stringify(J),i)}async function a(y){return(await(await ye("deck/create-empty",{name:y},l)).json()).id}const m=[[]],I=()=>{he(ae,c=[],c)};function $(){u=this.value,n(0,u)}function le(){f=oe(this.value),n(1,f)}function x(){_=this.__value,n(3,_)}function R(){_=this.__value,n(3,_)}function ce(){_=this.__value,n(3,_)}function Z(){o=oe(this.value),n(2,o)}function ie(){C=this.checked,n(5,C)}function Q(){V=Et(this),n(6,V),n(12,k)}function _e(){M=this.checked,n(7,M)}function re(){A=oe(this.value),n(8,A)}function ee(){N=oe(this.value),n(9,N)}return[u,f,o,_,g,C,V,M,A,N,c,s,k,D,p,b,a,I,$,le,x,m,R,ce,Z,ie,Q,_e,re,ee,async()=>{if(u!==""){n(4,g=null);const y=[];for(const Y of c){const J=await D(Y);y.push(J.vocabs)}let F;switch(_){case s.Merge:F=Qe(y,1);break;case s.Intersect:F=Qe(y,y.length);break;case s.BijakMerge:F=Qe(y,o);break}F=F.filter(Y=>Y.occurences>=f),(C||M)&&(F=await p(F),C&&(F=F.filter(Y=>Y.state[0]===V)),M&&(F=F.filter(Y=>A<=Y.frequency&&Y.frequency<=N)));const W=await a(u);await b(W,F),n(4,g={id:W,name:u})}}]}class zt extends Ie{constructor(e){super(),qe(this,e,Wt,Rt,je,{},null,[-1,-1])}}function dt(t,e,n){const l=t.slice();return l[7]=e[n],l}function ht(t){let e,n=t[7].name+"",l;return{c(){e=d("p"),l=j(n)},m(i,c){L(i,e,c),r(e,l)},p(i,c){c&1&&n!==(n=i[7].name+"")&&se(l,n)},d(i){i&&O(e)}}}function Jt(t){let e,n,l,i,c,s,u,f,o,_,g,C,k,V,M,A,N,D=ke(t[0]),p=[];for(let b=0;b<D.length;b+=1)p[b]=ht(dt(t,D,b));return{c(){e=d("div"),n=d("h3"),n.textContent="DeckYeeter",l=w(),i=d("p"),i.textContent="Decks to delete:",c=w();for(let b=0;b<p.length;b+=1)p[b].c();s=w(),u=d("button"),u.textContent="Reset selection",f=w(),o=d("br"),_=w(),g=d("br"),C=w(),k=d("br"),V=w(),M=d("button"),M.textContent="Delete Decks!"},m(b,a){L(b,e,a),r(e,n),r(e,l),r(e,i),r(e,c);for(let m=0;m<p.length;m+=1)p[m]&&p[m].m(e,null);r(e,s),r(e,u),r(e,f),r(e,o),r(e,_),r(e,g),r(e,C),r(e,k),r(e,V),r(e,M),A||(N=[P(u,"click",t[3]),P(M,"click",t[4])],A=!0)},p(b,[a]){if(a&1){D=ke(b[0]);let m;for(m=0;m<D.length;m+=1){const I=dt(b,D,m);p[m]?p[m].p(I,a):(p[m]=ht(I),p[m].c(),p[m].m(e,s))}for(;m<p.length;m+=1)p[m].d(1);p.length=D.length}},i:K,o:K,d(b){b&&O(e),Je(p,b),A=!1,fe(N)}}}function Ht(t,e,n){let l,i,c;ne(t,me,_=>n(5,l=_)),ne(t,Ye,_=>n(6,i=_)),ne(t,ae,_=>n(0,c=_));const s=bt();async function u(_){const g=await(await ye("deck/delete",{id:_.id},i)).json();he(me,l=JSON.stringify(g),l)}return[c,s,u,()=>{he(ae,c=[],c)},async()=>{if(confirm("I'll delete "+c.length+" decks. Is that ok?")){for(const g of c)await u(g);he(ae,c=[],c),s("deleted_decks")}}]}class Kt extends Ie{constructor(e){super(),qe(this,e,Ht,Jt,je,{})}}function Gt(t){let e,n,l,i,c,s,u,f,o;return{c(){e=d("p"),e.innerHTML='Put your API Token here (from the bottom of <a target="_blank" href="https://jpdb.io/settings">jpdb.io/settings</a>), it won&#39;t get sent anywhere except jpdb.io. Don&#39;t share it with anyone!',n=w(),l=d("p"),l.textContent=`You can enter the token in your browsers password manager if you don't want
    to input it every time you use this site.`,i=w(),c=d("input"),s=w(),u=d("button"),u.textContent="Confirm",v(c,"type","password"),v(u,"type","button")},m(_,g){L(_,e,g),L(_,n,g),L(_,l,g),L(_,i,g),L(_,c,g),H(c,t[0]),L(_,s,g),L(_,u,g),f||(o=[P(c,"input",t[2]),P(u,"click",t[1])],f=!0)},p(_,[g]){g&1&&c.value!==_[0]&&H(c,_[0])},i:K,o:K,d(_){_&&(O(e),O(n),O(l),O(i),O(c),O(s),O(u)),f=!1,fe(o)}}}function Qt(t,e,n){let l,i,c;ne(t,Ue,o=>n(3,l=o)),ne(t,me,o=>n(4,i=o)),ne(t,Ye,o=>n(0,c=o));const s=bt();async function u(){const _=await(await ye("ping",{},c)).json();he(me,i=JSON.stringify(_),i),i=="{}"&&(he(me,i="Token confirmed as correct.",i),he(Ue,l=!0,l),s("login"))}function f(){c=this.value,Ye.set(c)}return[c,u,f]}class Xt extends Ie{constructor(e){super(),qe(this,e,Qt,Gt,je,{})}}function Zt(t){let e,n,l,i,c,s,u,f,o,_,g,C,k,V,M,A,N,D;k=new Yt({props:{decks:t[1],min_coverage:$t,min_learning:xt,filter_builtin:en}});let p=t[0]===t[5].DeckMerger&&pt(),b=t[0]===t[5].DeckYeeter&&gt(t);return{c(){e=d("a"),e.textContent="DeckMerger",n=w(),l=d("a"),l.textContent="DeckYeeter",i=w(),c=d("p"),c.textContent="Result:",s=w(),u=d("pre"),f=j(t[4]),o=w(),_=d("button"),_.textContent="Reload decks",g=w(),C=d("div"),Re(k.$$.fragment),V=w(),p&&p.c(),M=w(),b&&b.c(),v(e,"href","#"),v(l,"href","#"),v(_,"type","button"),v(C,"class","container svelte-1gcq67e")},m(a,m){L(a,e,m),L(a,n,m),L(a,l,m),L(a,i,m),L(a,c,m),L(a,s,m),L(a,u,m),r(u,f),L(a,o,m),L(a,_,m),L(a,g,m),L(a,C,m),Oe(k,C,null),r(C,V),p&&p.m(C,null),r(C,M),b&&b.m(C,null),A=!0,N||(D=[P(e,"click",t[7]),P(l,"click",t[8]),P(_,"click",t[6])],N=!0)},p(a,m){(!A||m&16)&&se(f,a[4]);const I={};m&2&&(I.decks=a[1]),k.$set(I),a[0]===a[5].DeckMerger?p?m&1&&te(p,1):(p=pt(),p.c(),te(p,1),p.m(C,M)):p&&(Ze(),ue(p,1,1,()=>{p=null}),Se()),a[0]===a[5].DeckYeeter?b?(b.p(a,m),m&1&&te(b,1)):(b=gt(a),b.c(),te(b,1),b.m(C,null)):b&&(Ze(),ue(b,1,1,()=>{b=null}),Se())},i(a){A||(te(k.$$.fragment,a),te(p),te(b),A=!0)},o(a){ue(k.$$.fragment,a),ue(p),ue(b),A=!1},d(a){a&&(O(e),O(n),O(l),O(i),O(c),O(s),O(u),O(o),O(_),O(g),O(C)),Le(k),p&&p.d(),b&&b.d(),N=!1,fe(D)}}}function St(t){let e,n;return e=new Xt({}),e.$on("login",t[6]),{c(){Re(e.$$.fragment)},m(l,i){Oe(e,l,i),n=!0},p:K,i(l){n||(te(e.$$.fragment,l),n=!0)},o(l){ue(e.$$.fragment,l),n=!1},d(l){Le(e,l)}}}function pt(t){let e,n;return e=new zt({}),{c(){Re(e.$$.fragment)},m(l,i){Oe(e,l,i),n=!0},i(l){n||(te(e.$$.fragment,l),n=!0)},o(l){ue(e.$$.fragment,l),n=!1},d(l){Le(e,l)}}}function gt(t){let e,n;return e=new Kt({}),e.$on("deleted_decks",t[6]),{c(){Re(e.$$.fragment)},m(l,i){Oe(e,l,i),n=!0},p:K,i(l){n||(te(e.$$.fragment,l),n=!0)},o(l){ue(e.$$.fragment,l),n=!1},d(l){Le(e,l)}}}function Ut(t){let e,n,l,i;const c=[St,Zt],s=[];function u(f,o){return f[2]?1:0}return e=u(t),n=s[e]=c[e](t),{c(){n.c(),l=Mt()},m(f,o){s[e].m(f,o),L(f,l,o),i=!0},p(f,[o]){let _=e;e=u(f),e===_?s[e].p(f,o):(Ze(),ue(s[_],1,1,()=>{s[_]=null}),Se(),n=s[e],n?n.p(f,o):(n=s[e]=c[e](f),n.c()),te(n,1),n.m(l.parentNode,l))},i(f){i||(te(n),i=!0)},o(f){ue(n),i=!1},d(f){f&&O(l),s[e].d(f)}}}let $t=0,xt=0,en=!1;function tn(t,e,n){let l,i,c,s;ne(t,Ye,k=>n(9,l=k)),ne(t,Ue,k=>n(2,i=k)),ne(t,ae,k=>n(3,c=k)),ne(t,me,k=>n(4,s=k));var u=(k=>(k[k.DeckMerger=0]="DeckMerger",k[k.DeckYeeter=1]="DeckYeeter",k))(u||{});let f=0,o=[];async function _(){let V=await(await ye("list-user-decks",{fields:["name","vocabulary_known_coverage","vocabulary_in_progress_coverage","is_built_in","id","word_count","vocabulary_count"]},l)).json();console.log(V),n(1,o=V.decks.map(M=>{let[A,N,D,p,b,a,m]=M;return{name:A,id:b,known_coverage:N??0,learning_coverage:D??0,is_built_in:p,word_count:a,vocab_count:m}}))}return[f,o,i,c,s,u,_,k=>{k.preventDefault(),n(0,f=u.DeckMerger),he(ae,c=[],c)},k=>{k.preventDefault(),n(0,f=u.DeckYeeter),he(ae,c=[],c)}]}class nn extends Ie{constructor(e){super(),qe(this,e,tn,Ut,je,{})}}function ln(t){let e,n,l;return n=new nn({}),{c(){e=d("main"),Re(n.$$.fragment)},m(i,c){L(i,e,c),Oe(n,e,null),l=!0},p:K,i(i){l||(te(n.$$.fragment,i),l=!0)},o(i){ue(n.$$.fragment,i),l=!1},d(i){i&&O(e),Le(n)}}}class rn extends Ie{constructor(e){super(),qe(this,e,null,ln,je,{})}}new rn({target:document.getElementById("app")});
