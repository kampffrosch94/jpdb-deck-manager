var Ot=Object.defineProperty;var Et=(t,e,n)=>e in t?Ot(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ge=(t,e,n)=>(Et(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(r){if(r.ep)return;r.ep=!0;const c=n(r);fetch(r.href,c)}})();function S(){}function yt(t){return t()}function xe(){return Object.create(null)}function he(t){t.forEach(yt)}function Dt(t){return typeof t=="function"}function ve(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Lt(t){return Object.keys(t).length===0}function qt(t,...e){if(t==null){for(const l of e)l(void 0);return S}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function re(t,e,n){t.$$.on_destroy.push(qt(e,n))}function pe(t){return t??""}function _e(t,e,n){return t.set(n),e}function i(t,e){t.appendChild(e)}function B(t,e,n){t.insertBefore(e,n||null)}function I(t){t.parentNode&&t.parentNode.removeChild(t)}function Je(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function C(t){return document.createTextNode(t)}function m(){return C(" ")}function Ft(){return C("")}function R(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function It(t){let e;return{p(...n){e=n,e.forEach(l=>t.push(l))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function de(t){return t===""?null:+t}function Bt(t){return Array.from(t.childNodes)}function te(t,e){e=""+e,t.data!==e&&(t.data=e)}function Z(t,e){t.value=e??""}function Ve(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function et(t,e,n){for(let l=0;l<t.options.length;l+=1){const r=t.options[l];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function At(t){const e=t.querySelector(":checked");return e&&e.__value}function Tt(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let We;function Ye(t){We=t}function Pt(){if(!We)throw new Error("Function called outside component initialization");return We}function Ct(){const t=Pt();return(e,n,{cancelable:l=!1}={})=>{const r=t.$$.callbacks[e];if(r){const c=Tt(e,n,{cancelable:l});return r.slice().forEach(s=>{s.call(t,c)}),!c.defaultPrevented}return!0}}const qe=[],tt=[];let Fe=[];const nt=[],Vt=Promise.resolve();let Ze=!1;function Yt(){Ze||(Ze=!0,Vt.then(jt))}function Ke(t){Fe.push(t)}const Qe=new Set;let Ee=0;function jt(){if(Ee!==0)return;const t=We;do{try{for(;Ee<qe.length;){const e=qe[Ee];Ee++,Ye(e),Wt(e.$$)}}catch(e){throw qe.length=0,Ee=0,e}for(Ye(null),qe.length=0,Ee=0;tt.length;)tt.pop()();for(let e=0;e<Fe.length;e+=1){const n=Fe[e];Qe.has(n)||(Qe.add(n),n())}Fe.length=0}while(qe.length);for(;nt.length;)nt.pop()();Ze=!1,Qe.clear(),Ye(t)}function Wt(t){if(t.fragment!==null){t.update(),he(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ke)}}function Jt(t){const e=[],n=[];Fe.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),Fe=e}const Re=new Set;let ye;function ze(){ye={r:0,c:[],p:ye}}function He(){ye.r||he(ye.c),ye=ye.p}function ee(t,e){t&&t.i&&(Re.delete(t),t.i(e))}function se(t,e,n,l){if(t&&t.o){if(Re.has(t))return;Re.add(t),ye.c.push(()=>{Re.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function ge(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Be(t){t&&t.c()}function Ce(t,e,n){const{fragment:l,after_update:r}=t.$$;l&&l.m(e,n),Ke(()=>{const c=t.$$.on_mount.map(yt).filter(Dt);t.$$.on_destroy?t.$$.on_destroy.push(...c):he(c),t.$$.on_mount=[]}),r.forEach(Ke)}function je(t,e){const n=t.$$;n.fragment!==null&&(Jt(n.after_update),he(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Rt(t,e){t.$$.dirty[0]===-1&&(qe.push(t),Yt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Me(t,e,n,l,r,c,s=null,u=[-1]){const f=We;Ye(t);const o=t.$$={fragment:null,ctx:[],props:c,update:S,not_equal:r,bound:xe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:xe(),dirty:u,skip_bound:!1,root:e.target||f.$$.root};s&&s(o.root);let a=!1;if(o.ctx=n?n(t,e.props||{},(_,D,...M)=>{const k=M.length?M[0]:D;return o.ctx&&r(o.ctx[_],o.ctx[_]=k)&&(!o.skip_bound&&o.bound[_]&&o.bound[_](k),a&&Rt(t,_)),D}):[],o.update(),a=!0,he(o.before_update),o.fragment=l?l(o.ctx):!1,e.target){if(e.hydrate){const _=Bt(e.target);o.fragment&&o.fragment.l(_),_.forEach(I)}else o.fragment&&o.fragment.c();e.intro&&ee(t.$$.fragment),Ce(t,e.target,e.anchor),jt()}Ye(f)}class Ne{constructor(){Ge(this,"$$");Ge(this,"$$set")}$destroy(){je(this,1),this.$destroy=S}$on(e,n){if(!Dt(n))return S;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(e){this.$$set&&!Lt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const zt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(zt);const Le=[];function Se(t,e=S){let n;const l=new Set;function r(u){if(ve(t,u)&&(t=u,n)){const f=!Le.length;for(const o of l)o[1](),Le.push(o,t);if(f){for(let o=0;o<Le.length;o+=2)Le[o][0](Le[o+1]);Le.length=0}}}function c(u){r(u(t))}function s(u,f=S){const o=[u,f];return l.add(o),l.size===1&&(n=e(r,c)||S),u(t),()=>{l.delete(o),l.size===0&&n&&(n(),n=null)}}return{set:r,update:c,subscribe:s}}const Ie=Se(""),Ue=Se(!1),be=Se(""),ue=Se([]);function lt(t,e,n){const l=t.slice();return l[18]=e[n],l}function rt(t){let e,n,l,r=t[18].name+"",c,s,u,f,o,a,_,D=t[18].known_coverage.toFixed(1)+"",M,k,y,T=t[18].learning_coverage.toFixed(1)+"",E,N,v,O=t[18].vocab_count+"",p,b,w,A=t[18].word_count+"",j,L,W,le=t[18].is_built_in+"",U,Q,V,oe;function ie(...q){return t[16](t[18],...q)}return{c(){e=d("tr"),n=d("td"),l=d("a"),c=C(r),s=m(),u=d("a"),f=C("[jpdb]"),a=m(),_=d("td"),M=C(D),k=m(),y=d("td"),E=C(T),N=m(),v=d("td"),p=C(O),b=m(),w=d("td"),j=C(A),L=m(),W=d("td"),U=C(le),Q=m(),g(l,"href","#"),g(u,"target","_blank"),g(u,"href",o="https://jpdb.io/deck?id="+t[18].id),g(n,"class","svelte-mesrax"),Ve(_,"text-align","right"),g(_,"class","svelte-mesrax"),Ve(y,"text-align","right"),g(y,"class","svelte-mesrax"),Ve(v,"text-align","right"),g(v,"class","svelte-mesrax"),Ve(w,"text-align","right"),g(w,"class","svelte-mesrax"),Ve(W,"text-align","center"),g(W,"class","svelte-mesrax"),g(e,"class","svelte-mesrax")},m(q,Y){B(q,e,Y),i(e,n),i(n,l),i(l,c),i(n,s),i(n,u),i(u,f),i(e,a),i(e,_),i(_,M),i(e,k),i(e,y),i(y,E),i(e,N),i(e,v),i(v,p),i(e,b),i(e,w),i(w,j),i(e,L),i(e,W),i(W,U),i(e,Q),V||(oe=R(l,"click",ie),V=!0)},p(q,Y){t=q,Y&32&&r!==(r=t[18].name+"")&&te(c,r),Y&32&&o!==(o="https://jpdb.io/deck?id="+t[18].id)&&g(u,"href",o),Y&32&&D!==(D=t[18].known_coverage.toFixed(1)+"")&&te(M,D),Y&32&&T!==(T=t[18].learning_coverage.toFixed(1)+"")&&te(E,T),Y&32&&O!==(O=t[18].vocab_count+"")&&te(p,O),Y&32&&A!==(A=t[18].word_count+"")&&te(j,A),Y&32&&le!==(le=t[18].is_built_in+"")&&te(U,le)},d(q){q&&I(e),V=!1,oe()}}}function it(t){let e,n,l;return{c(){e=d("button"),e.textContent="add all"},m(r,c){B(r,e,c),n||(l=R(e,"click",t[17]),n=!0)},p:S,d(r){r&&I(e),n=!1,l()}}}function Ht(t){let e,n,l,r=t[5].length+"",c,s,u=t[3].length+"",f,o,a,_,D,M,k,y,T,E,N,v,O,p,b,w,A,j,L,W,le,U,Q,V,oe,ie,q,Y,F,K,$,ae,ke,ce,X,fe,Ae,Oe,we,Te,me,x,ne,G=ge(t[5]),z=[];for(let h=0;h<G.length;h+=1)z[h]=rt(lt(t,G,h));let H=t[3].length>0&&it(t);return{c(){e=d("div"),n=d("h3"),l=C("Decklist (showing "),c=C(r),s=C(" of "),f=C(u),o=C(")"),a=C(`
    Min coverage:
    `),_=d("input"),D=C(`
    Min learning coverage:
    `),M=d("input"),k=C(`
    Filter builtin:
    `),y=d("input"),T=m(),E=d("table"),N=d("tr"),v=d("th"),O=d("i"),b=C(`
                name`),w=m(),A=d("th"),j=d("i"),W=C(`
                coverage`),le=m(),U=d("th"),Q=d("i"),oe=C(`
                learning`),ie=d("br"),q=C("coverage"),Y=m(),F=d("th"),K=d("i"),ae=C(`
                vocab`),ke=m(),ce=d("th"),X=d("i"),Ae=C(`
                words`),Oe=m(),we=d("th"),we.textContent="is_built_in",Te=m();for(let h=0;h<z.length;h+=1)z[h].c();me=m(),H&&H.c(),g(_,"type","number"),g(M,"type","number"),g(y,"type","checkbox"),g(O,"class",p=pe(t[4]==t[7].Name?"sorting_asc":"sorting")+" svelte-mesrax"),g(j,"class",L=pe(t[4]==t[7].Coverage?"sorting_desc":"sorting")+" svelte-mesrax"),g(Q,"class",V=pe(t[4]==t[7].Learning?"sorting_desc":"sorting")+" svelte-mesrax"),g(K,"class",$=pe(t[4]==t[7].VocabCount?"sorting_desc":"sorting")+" svelte-mesrax"),g(X,"class",fe=pe(t[4]==t[7].WordCount?"sorting_desc":"sorting")+" svelte-mesrax"),g(N,"class","svelte-mesrax"),g(E,"class","svelte-mesrax")},m(h,J){B(h,e,J),i(e,n),i(n,l),i(n,c),i(n,s),i(n,f),i(n,o),i(e,a),i(e,_),Z(_,t[0]),i(e,D),i(e,M),Z(M,t[1]),i(e,k),i(e,y),y.checked=t[2],i(e,T),i(e,E),i(E,N),i(N,v),i(v,O),i(v,b),i(N,w),i(N,A),i(A,j),i(A,W),i(N,le),i(N,U),i(U,Q),i(U,oe),i(U,ie),i(U,q),i(N,Y),i(N,F),i(F,K),i(F,ae),i(N,ke),i(N,ce),i(ce,X),i(ce,Ae),i(N,Oe),i(N,we),i(E,Te);for(let P=0;P<z.length;P+=1)z[P]&&z[P].m(E,null);i(e,me),H&&H.m(e,null),x||(ne=[R(_,"input",t[8]),R(M,"input",t[9]),R(y,"change",t[10]),R(v,"click",t[11]),R(A,"click",t[12]),R(U,"click",t[13]),R(F,"click",t[14]),R(ce,"click",t[15])],x=!0)},p(h,[J]){if(J&32&&r!==(r=h[5].length+"")&&te(c,r),J&8&&u!==(u=h[3].length+"")&&te(f,u),J&1&&de(_.value)!==h[0]&&Z(_,h[0]),J&2&&de(M.value)!==h[1]&&Z(M,h[1]),J&4&&(y.checked=h[2]),J&16&&p!==(p=pe(h[4]==h[7].Name?"sorting_asc":"sorting")+" svelte-mesrax")&&g(O,"class",p),J&16&&L!==(L=pe(h[4]==h[7].Coverage?"sorting_desc":"sorting")+" svelte-mesrax")&&g(j,"class",L),J&16&&V!==(V=pe(h[4]==h[7].Learning?"sorting_desc":"sorting")+" svelte-mesrax")&&g(Q,"class",V),J&16&&$!==($=pe(h[4]==h[7].VocabCount?"sorting_desc":"sorting")+" svelte-mesrax")&&g(K,"class",$),J&16&&fe!==(fe=pe(h[4]==h[7].WordCount?"sorting_desc":"sorting")+" svelte-mesrax")&&g(X,"class",fe),J&96){G=ge(h[5]);let P;for(P=0;P<G.length;P+=1){const Pe=lt(h,G,P);z[P]?z[P].p(Pe,J):(z[P]=rt(Pe),z[P].c(),z[P].m(E,null))}for(;P<z.length;P+=1)z[P].d(1);z.length=G.length}h[3].length>0?H?H.p(h,J):(H=it(h),H.c(),H.m(e,null)):H&&(H.d(1),H=null)},i:S,o:S,d(h){h&&I(e),Je(z,h),H&&H.d(),x=!1,he(ne)}}}function Kt(t,e,n){let l,r;re(t,ue,p=>n(6,r=p));let{min_coverage:c}=e,{min_learning:s}=e,{filter_builtin:u}=e,{decks:f}=e;var o=(p=>(p[p.None=0]="None",p[p.Name=1]="Name",p[p.Coverage=2]="Coverage",p[p.Learning=3]="Learning",p[p.WordCount=4]="WordCount",p[p.VocabCount=5]="VocabCount",p))(o||{});let a=0;function _(){c=de(this.value),n(0,c)}function D(){s=de(this.value),n(1,s)}function M(){u=this.checked,n(2,u)}const k=p=>n(4,a=o.Name),y=p=>n(4,a=o.Coverage),T=p=>n(4,a=o.Learning),E=p=>n(4,a=o.VocabCount),N=p=>n(4,a=o.WordCount),v=(p,b)=>{b.preventDefault(),r.push(p),ue.set(r)},O=async()=>{r.concat(l),ue.set(r)};return t.$$set=p=>{"min_coverage"in p&&n(0,c=p.min_coverage),"min_learning"in p&&n(1,s=p.min_learning),"filter_builtin"in p&&n(2,u=p.filter_builtin),"decks"in p&&n(3,f=p.decks)},t.$$.update=()=>{t.$$.dirty&8&&f.length>0&&n(4,a=0),t.$$.dirty&31&&n(5,l=f.filter(p=>p.known_coverage>=c&&p.learning_coverage>=s&&(p.is_built_in||!u)).sort((p,b)=>{switch(a){case 0:return 0;case 1:return p.name.localeCompare(b.name);case 2:return b.known_coverage-p.known_coverage;case 3:return b.learning_coverage-p.learning_coverage;case 4:return b.word_count-p.word_count;case 5:return b.vocab_count-p.vocab_count}}))},[c,s,u,f,a,l,r,o,_,D,M,k,y,T,E,N,v,O]}class $t extends Ne{constructor(e){super(),Me(this,e,Kt,Ht,ve,{min_coverage:0,min_learning:1,filter_builtin:2,decks:3})}}async function De(t,e,n){let l=new Headers;return l.set("Authorization","Bearer "+n),l.set("Content-Type","application/json"),await fetch("https://jpdb.io/api/v1/"+t,{headers:l,method:"POST",body:JSON.stringify(e)})}async function Mt(t,e){const n=await(await De("deck/list-vocabulary",{id:e.id,fetch_occurences:!0},t)).json();let l=[];for(let r=0;r<n.vocabulary.length;r++){let c={vid:n.vocabulary[r][0],sid:n.vocabulary[r][1],occurences:n.occurences[r]};l.push(c)}return{vocabs:l,...e}}async function Nt(t,e){const n=e.map(c=>[c.vid,c.sid]),l=await(await De("lookup-vocabulary",{list:n,fields:["card_state","frequency_rank"]},t)).json();let r=[];for(let c=0;c<l.vocabulary_info.length;c++)r.push({state:l.vocabulary_info[c][0],frequency:l.vocabulary_info[c][1],...e[c]});return r}function ct(t,e,n){const l=t.slice();return l[31]=e[n],l}function st(t,e,n){const l=t.slice();return l[34]=e[n],l}function ot(t){let e,n=t[34].name+"",l;return{c(){e=d("p"),l=C(n)},m(r,c){B(r,e,c),i(e,l)},p(r,c){c[0]&2048&&n!==(n=r[34].name+"")&&te(l,n)},d(r){r&&I(e)}}}function ut(t){let e,n,l,r,c;return{c(){e=d("p"),n=C(`min decks:
                `),l=d("input"),g(l,"type","number")},m(s,u){B(s,e,u),i(e,n),i(e,l),Z(l,t[2]),r||(c=R(l,"input",t[23]),r=!0)},p(s,u){u[0]&4&&de(l.value)!==s[2]&&Z(l,s[2])},d(s){s&&I(e),r=!1,c()}}}function at(t){let e,n,l,r=ge(t[13]),c=[];for(let s=0;s<r.length;s+=1)c[s]=ft(ct(t,r,s));return{c(){e=d("select");for(let s=0;s<c.length;s+=1)c[s].c();t[6]===void 0&&Ke(()=>t[25].call(e))},m(s,u){B(s,e,u);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(e,null);et(e,t[6],!0),n||(l=R(e,"change",t[25]),n=!0)},p(s,u){if(u[0]&8192){r=ge(s[13]);let f;for(f=0;f<r.length;f+=1){const o=ct(s,r,f);c[f]?c[f].p(o,u):(c[f]=ft(o),c[f].c(),c[f].m(e,null))}for(;f<c.length;f+=1)c[f].d(1);c.length=r.length}u[0]&8256&&et(e,s[6])},d(s){s&&I(e),Je(c,s),n=!1,l()}}}function ft(t){let e,n=t[31]+"",l,r;return{c(){e=d("option"),l=C(n),r=m(),e.__value=t[31],Z(e,e.__value)},m(c,s){B(c,e,s),i(e,l),i(e,r)},p:S,d(c){c&&I(e)}}}function dt(t){let e,n,l,r,c,s,u,f,o;return{c(){e=d("p"),n=C("min: "),l=d("input"),r=m(),c=d("p"),s=C("max: "),u=d("input"),g(l,"type","number"),g(u,"type","number")},m(a,_){B(a,e,_),i(e,n),i(e,l),Z(l,t[8]),B(a,r,_),B(a,c,_),i(c,s),i(c,u),Z(u,t[9]),f||(o=[R(l,"input",t[27]),R(u,"input",t[28])],f=!0)},p(a,_){_[0]&256&&de(l.value)!==a[8]&&Z(l,a[8]),_[0]&512&&de(u.value)!==a[9]&&Z(u,a[9])},d(a){a&&(I(e),I(r),I(c)),f=!1,he(o)}}}function _t(t){let e,n,l=t[4].name+"",r,c,s,u,f;return{c(){e=d("p"),n=C(`Last created:
                `),r=C(l),c=m(),s=d("a"),u=C("[jpdb]"),g(s,"target","_blank"),g(s,"href",f="https://jpdb.io/deck?id="+t[4].id)},m(o,a){B(o,e,a),i(e,n),i(e,r),i(e,c),i(e,s),i(s,u)},p(o,a){a[0]&16&&l!==(l=o[4].name+"")&&te(r,l),a[0]&16&&f!==(f="https://jpdb.io/deck?id="+o[4].id)&&g(s,"href",f)},d(o){o&&I(e)}}}function St(t){let e,n,l,r,c,s,u,f,o,a,_,D,M,k,y,T,E,N,v,O,p,b,w,A,j,L,W,le,U,Q,V,oe,ie,q,Y,F,K,$,ae,ke,ce,X,fe,Ae,Oe,we,Te,me=ge(t[11]),x=[];for(let h=0;h<me.length;h+=1)x[h]=ot(st(t,me,h));let ne=t[3]==t[12].BijakMerge&&ut(t),G=t[5]&&at(t),z=t[7]&&dt(t),H=t[4]!=null&&_t(t);return Oe=It(t[20][0]),{c(){e=d("div"),n=d("h3"),n.textContent="Deckmerger",l=C(`
        selected decks:`),r=d("br"),c=m();for(let h=0;h<x.length;h+=1)x[h].c();s=m(),u=d("button"),u.textContent="Reset selection",f=m(),o=d("p"),a=C(`Name of new deck
            `),_=d("input"),D=m(),M=d("p"),k=C(`min occurences:
            `),y=d("input"),T=m(),E=d("p"),N=d("label"),v=d("input"),O=C(`
                Merge`),p=m(),b=d("label"),w=d("input"),A=C(`
                Intersect`),j=m(),L=d("label"),W=d("input"),le=C(`
                BijakMerge`),U=m(),ne&&ne.c(),Q=m(),V=d("p"),oe=C(`Filter for card state?
            `),ie=d("input"),q=m(),G&&G.c(),Y=m(),F=d("p"),K=C(`Filter by global frequency?
            `),$=d("input"),ae=m(),z&&z.c(),ke=m(),ce=d("button"),X=C("create deck"),Ae=m(),H&&H.c(),g(_,"type","text"),g(y,"type","number"),g(v,"type","radio"),g(v,"name","strat"),v.__value=t[12].Merge,Z(v,v.__value),g(N,"title","Merges decks into new deck, adds up all vocab occurences, then removes all vocab where occurences < min_occurences"),g(w,"type","radio"),g(w,"name","strat"),w.__value=t[12].Intersect,Z(w,w.__value),g(b,"title","Only adds those words into the new deck that appear in all decks. Then removes all where occurences < min_occurences"),g(W,"type","radio"),g(W,"name","strat"),W.__value=t[12].BijakMerge,Z(W,W.__value),g(L,"title","The BijakMerge (named after its inventor) works just like the regular merge, but also needs a minimum number of decks for a word to appear in for it to be included."),g(ie,"type","checkbox"),g($,"type","checkbox"),ce.disabled=fe=t[11].length<=0,g(e,"id","deckmerger_div"),Oe.p(v,w,W)},m(h,J){B(h,e,J),i(e,n),i(e,l),i(e,r),i(e,c);for(let P=0;P<x.length;P+=1)x[P]&&x[P].m(e,null);i(e,s),i(e,u),i(e,f),i(e,o),i(o,a),i(o,_),Z(_,t[0]),i(e,D),i(e,M),i(M,k),i(M,y),Z(y,t[1]),i(e,T),i(e,E),i(E,N),i(N,v),v.checked=v.__value===t[3],i(N,O),i(E,p),i(E,b),i(b,w),w.checked=w.__value===t[3],i(b,A),i(E,j),i(E,L),i(L,W),W.checked=W.__value===t[3],i(L,le),i(e,U),ne&&ne.m(e,null),i(e,Q),i(e,V),i(V,oe),i(V,ie),ie.checked=t[5],i(V,q),G&&G.m(V,null),i(e,Y),i(e,F),i(F,K),i(F,$),$.checked=t[7],i(F,ae),z&&z.m(F,null),i(e,ke),i(e,ce),i(ce,X),i(e,Ae),H&&H.m(e,null),we||(Te=[R(u,"click",t[16]),R(_,"input",t[17]),R(y,"input",t[18]),R(v,"change",t[19]),R(w,"change",t[21]),R(W,"change",t[22]),R(ie,"change",t[24]),R($,"change",t[26]),R(ce,"click",t[29])],we=!0)},p(h,J){if(J[0]&2048){me=ge(h[11]);let P;for(P=0;P<me.length;P+=1){const Pe=st(h,me,P);x[P]?x[P].p(Pe,J):(x[P]=ot(Pe),x[P].c(),x[P].m(e,s))}for(;P<x.length;P+=1)x[P].d(1);x.length=me.length}J[0]&1&&_.value!==h[0]&&Z(_,h[0]),J[0]&2&&de(y.value)!==h[1]&&Z(y,h[1]),J[0]&8&&(v.checked=v.__value===h[3]),J[0]&8&&(w.checked=w.__value===h[3]),J[0]&8&&(W.checked=W.__value===h[3]),h[3]==h[12].BijakMerge?ne?ne.p(h,J):(ne=ut(h),ne.c(),ne.m(e,Q)):ne&&(ne.d(1),ne=null),J[0]&32&&(ie.checked=h[5]),h[5]?G?G.p(h,J):(G=at(h),G.c(),G.m(V,null)):G&&(G.d(1),G=null),J[0]&128&&($.checked=h[7]),h[7]?z?z.p(h,J):(z=dt(h),z.c(),z.m(F,null)):z&&(z.d(1),z=null),J[0]&2048&&fe!==(fe=h[11].length<=0)&&(ce.disabled=fe),h[4]!=null?H?H.p(h,J):(H=_t(h),H.c(),H.m(e,null)):H&&(H.d(1),H=null)},i:S,o:S,d(h){h&&I(e),Je(x,h),ne&&ne.d(),G&&G.d(),z&&z.d(),H&&H.d(),Oe.r(),we=!1,he(Te)}}}function Xe(t,e){const n=[];for(const l of t)for(const r of l){const c=n.find(s=>s.vid===r.vid&&s.sid===r.sid);c!=null?(c.occurences+=r.occurences,c.decks+=1):n.push({decks:1,...r})}return n.filter(l=>l.decks>=e)}function Gt(t,e,n){let l,r,c;re(t,Ie,q=>n(10,l=q)),re(t,be,q=>n(30,r=q)),re(t,ue,q=>n(11,c=q));var s=(q=>(q[q.Merge=0]="Merge",q[q.Intersect=1]="Intersect",q[q.BijakMerge=2]="BijakMerge",q))(s||{});let u="",f=1,o=1,a=0,_=null,D=!1,M=["new","locked","learning","known","due","failed","never-forget","suspended","blacklisted"],k=M[0],y=!1,T=1,E=3e4;async function N(q,Y){let F=[],K=[];Y.forEach(ae=>{F.push([ae.vid,ae.sid]),K.push(ae.occurences)});const $=await(await De("deck/add-vocabulary",{id:q,vocabulary:F,occurences:K},l)).json();_e(be,r=JSON.stringify($),r)}async function v(q){return(await(await De("deck/create-empty",{name:q},l)).json()).id}const O=[[]],p=()=>{_e(ue,c=[],c)};function b(){u=this.value,n(0,u)}function w(){f=de(this.value),n(1,f)}function A(){a=this.__value,n(3,a)}function j(){a=this.__value,n(3,a)}function L(){a=this.__value,n(3,a)}function W(){o=de(this.value),n(2,o)}function le(){D=this.checked,n(5,D)}function U(){k=At(this),n(6,k),n(13,M)}function Q(){y=this.checked,n(7,y)}function V(){T=de(this.value),n(8,T)}function oe(){E=de(this.value),n(9,E)}return[u,f,o,a,_,D,k,y,T,E,l,c,s,M,N,v,p,b,w,A,O,j,L,W,le,U,Q,V,oe,async()=>{if(u!==""){n(4,_=null);const q=[];for(const K of c){const $=await Mt(l,K);q.push($.vocabs)}let Y;switch(a){case s.Merge:Y=Xe(q,1);break;case s.Intersect:Y=Xe(q,q.length);break;case s.BijakMerge:Y=Xe(q,o);break}Y=Y.filter(K=>K.occurences>=f),(D||y)&&(Y=await Nt(l,Y),D&&(Y=Y.filter(K=>K.state[0]===k)),y&&(Y=Y.filter(K=>T<=K.frequency&&K.frequency<=E)));const F=await v(u);await N(F,Y),n(4,_={id:F,name:u})}}]}class Qt extends Ne{constructor(e){super(),Me(this,e,Gt,St,ve,{},null,[-1,-1])}}function ht(t,e,n){const l=t.slice();return l[7]=e[n],l}function pt(t){let e,n=t[7].name+"",l;return{c(){e=d("p"),l=C(n)},m(r,c){B(r,e,c),i(e,l)},p(r,c){c&1&&n!==(n=r[7].name+"")&&te(l,n)},d(r){r&&I(e)}}}function Xt(t){let e,n,l,r,c,s,u,f,o,a,_,D,M,k,y,T,E,N=ge(t[0]),v=[];for(let O=0;O<N.length;O+=1)v[O]=pt(ht(t,N,O));return{c(){e=d("div"),n=d("h3"),n.textContent="DeckYeeter",l=m(),r=d("p"),r.textContent="Decks to delete:",c=m();for(let O=0;O<v.length;O+=1)v[O].c();s=m(),u=d("button"),u.textContent="Reset selection",f=m(),o=d("br"),a=m(),_=d("br"),D=m(),M=d("br"),k=m(),y=d("button"),y.textContent="Delete Decks!"},m(O,p){B(O,e,p),i(e,n),i(e,l),i(e,r),i(e,c);for(let b=0;b<v.length;b+=1)v[b]&&v[b].m(e,null);i(e,s),i(e,u),i(e,f),i(e,o),i(e,a),i(e,_),i(e,D),i(e,M),i(e,k),i(e,y),T||(E=[R(u,"click",t[3]),R(y,"click",t[4])],T=!0)},p(O,[p]){if(p&1){N=ge(O[0]);let b;for(b=0;b<N.length;b+=1){const w=ht(O,N,b);v[b]?v[b].p(w,p):(v[b]=pt(w),v[b].c(),v[b].m(e,s))}for(;b<v.length;b+=1)v[b].d(1);v.length=N.length}},i:S,o:S,d(O){O&&I(e),Je(v,O),T=!1,he(E)}}}function Zt(t,e,n){let l,r,c;re(t,be,a=>n(5,l=a)),re(t,Ie,a=>n(6,r=a)),re(t,ue,a=>n(0,c=a));const s=Ct();async function u(a){const _=await(await De("deck/delete",{id:a.id},r)).json();_e(be,l=JSON.stringify(_),l)}return[c,s,u,()=>{_e(ue,c=[],c)},async()=>{if(confirm("I'll delete "+c.length+" decks. Is that ok?")){for(const _ of c)await u(_);_e(ue,c=[],c),s("deleted_decks")}}]}class Ut extends Ne{constructor(e){super(),Me(this,e,Zt,Xt,ve,{})}}function xt(t){let e,n,l,r,c,s,u,f,o;return{c(){e=d("p"),e.innerHTML='Put your API Token here (from the bottom of <a target="_blank" href="https://jpdb.io/settings">jpdb.io/settings</a>), it won&#39;t get sent anywhere except jpdb.io. Don&#39;t share it with anyone!',n=m(),l=d("p"),l.textContent=`You can enter the token in your browsers password manager if you don't want
    to input it every time you use this site.`,r=m(),c=d("input"),s=m(),u=d("button"),u.textContent="Confirm",g(c,"type","password"),g(u,"type","button")},m(a,_){B(a,e,_),B(a,n,_),B(a,l,_),B(a,r,_),B(a,c,_),Z(c,t[0]),B(a,s,_),B(a,u,_),f||(o=[R(c,"input",t[2]),R(u,"click",t[1])],f=!0)},p(a,[_]){_&1&&c.value!==a[0]&&Z(c,a[0])},i:S,o:S,d(a){a&&(I(e),I(n),I(l),I(r),I(c),I(s),I(u)),f=!1,he(o)}}}function en(t,e,n){let l,r,c;re(t,Ue,o=>n(3,l=o)),re(t,be,o=>n(4,r=o)),re(t,Ie,o=>n(0,c=o));const s=Ct();async function u(){const a=await(await De("ping",{},c)).json();_e(be,r=JSON.stringify(a),r),r=="{}"&&(_e(be,r="Token confirmed as correct.",r),_e(Ue,l=!0,l),s("login"))}function f(){c=this.value,Ie.set(c)}return[c,u,f]}class tn extends Ne{constructor(e){super(),Me(this,e,en,xt,ve,{})}}function gt(t,e,n){const l=t.slice();return l[6]=e[n],l}function mt(t){var oe,ie,q,Y;let e,n,l,r,c,s=((oe=t[0])==null?void 0:oe.name)+"",u,f,o,a,_,D,M=((ie=t[0])==null?void 0:ie.word_count)+"",k,y,T,E,N,v,O=((q=t[0])==null?void 0:q.known_coverage.toFixed(2))+"",p,b,w,A,j,L,W=((Y=t[0])==null?void 0:Y.learning_coverage.toFixed(2))+"",le,U,Q=ge(t[1]),V=[];for(let F=0;F<Q.length;F+=1)V[F]=kt(gt(t,Q,F));return{c(){e=d("table"),n=d("tr"),l=d("td"),l.textContent="Deck name",r=m(),c=d("td"),u=C(s),f=m(),o=d("tr"),a=d("td"),a.textContent="WordCount",_=m(),D=d("td"),k=C(M),y=m(),T=d("tr"),E=d("td"),E.textContent="known coverage",N=m(),v=d("td"),p=C(O),b=m(),w=d("tr"),A=d("td"),A.textContent="learning coverage",j=m(),L=d("td"),le=C(W),U=m();for(let F=0;F<V.length;F+=1)V[F].c();g(l,"class","svelte-vw9x2w"),g(c,"class","svelte-vw9x2w"),g(n,"class","svelte-vw9x2w"),g(a,"class","svelte-vw9x2w"),g(D,"class","svelte-vw9x2w"),g(o,"class","svelte-vw9x2w"),g(E,"class","svelte-vw9x2w"),g(v,"class","svelte-vw9x2w"),g(T,"class","svelte-vw9x2w"),g(A,"class","svelte-vw9x2w"),g(L,"class","svelte-vw9x2w"),g(w,"class","svelte-vw9x2w"),g(e,"class","svelte-vw9x2w")},m(F,K){B(F,e,K),i(e,n),i(n,l),i(n,r),i(n,c),i(c,u),i(e,f),i(e,o),i(o,a),i(o,_),i(o,D),i(D,k),i(e,y),i(e,T),i(T,E),i(T,N),i(T,v),i(v,p),i(e,b),i(e,w),i(w,A),i(w,j),i(w,L),i(L,le),i(e,U);for(let $=0;$<V.length;$+=1)V[$]&&V[$].m(e,null)},p(F,K){var $,ae,ke,ce;if(K&1&&s!==(s=(($=F[0])==null?void 0:$.name)+"")&&te(u,s),K&1&&M!==(M=((ae=F[0])==null?void 0:ae.word_count)+"")&&te(k,M),K&1&&O!==(O=((ke=F[0])==null?void 0:ke.known_coverage.toFixed(2))+"")&&te(p,O),K&1&&W!==(W=((ce=F[0])==null?void 0:ce.learning_coverage.toFixed(2))+"")&&te(le,W),K&2){Q=ge(F[1]);let X;for(X=0;X<Q.length;X+=1){const fe=gt(F,Q,X);V[X]?V[X].p(fe,K):(V[X]=kt(fe),V[X].c(),V[X].m(e,null))}for(;X<V.length;X+=1)V[X].d(1);V.length=Q.length}},d(F){F&&I(e),Je(V,F)}}}function kt(t){let e,n,l,r=t[6][0]+"",c,s,u,f,o=t[6][1].toFixed(2)+"",a,_;return{c(){e=d("tr"),n=d("td"),l=C("learning coverage with "),c=C(r),s=C(" extra learned"),u=m(),f=d("td"),a=C(o),_=m(),g(n,"class","svelte-vw9x2w"),g(f,"class","svelte-vw9x2w"),g(e,"class","svelte-vw9x2w")},m(D,M){B(D,e,M),i(e,n),i(n,l),i(n,c),i(n,s),i(e,u),i(e,f),i(f,a),i(e,_)},p(D,M){M&2&&r!==(r=D[6][0]+"")&&te(c,r),M&2&&o!==(o=D[6][1].toFixed(2)+"")&&te(a,o)},d(D){D&&I(e)}}}function nn(t){let e,n,l,r,c,s,u,f,o,a=t[0]!==void 0&&mt(t);return{c(){e=d("div"),n=d("h3"),n.textContent="Deck coverage prediction for a single deck",l=m(),r=d("p"),r.textContent=`This tool predicts how coverage for a deck will change if you learned
        new vocab in frequency order.`,c=m(),s=d("p"),s.textContent="It considers new, locked and suspended cards as learnable.",u=m(),f=d("p"),f.textContent="Select a deck from the deck list to the left.",o=m(),a&&a.c()},m(_,D){B(_,e,D),i(e,n),i(e,l),i(e,r),i(e,c),i(e,s),i(e,u),i(e,f),i(e,o),a&&a.m(e,null)},p(_,[D]){_[0]!==void 0?a?a.p(_,D):(a=mt(_),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:S,o:S,d(_){_&&I(e),a&&a.d()}}}function $e(t){return["known","never-forget","due","failed","learning"].includes(t.state[0])||t.state[0]==="locked"&&t.state[1]==="due"||t.state[0]==="redundant"&&t.state[1]!=="suspended"||t.state[0]==="redundant"&&t.state[1]!=="locked"}function ln(t){let e=t.filter(r=>r.state[0]!="blacklisted"),n=e.filter($e).reduce((r,c)=>r+c.occurences,0),l=e.reduce((r,c)=>r+c.occurences,0);return 100*(n/l)}function rn(t,e){let l=t.sort((u,f)=>f.occurences-u.occurences).filter(u=>u.state[0]!="blacklisted");const r=JSON.parse(JSON.stringify(l));let c=0,s=0;for(r.find(u=>!$e(u));c<r.length&&s!=e;){let u=r[c];$e(u)||(u.state[0]="known",s+=1),c+=1}return ln(r)}function cn(t,e,n){let l,r;re(t,Ie,o=>n(4,l=o)),re(t,ue,o=>n(2,r=o));let c,s=[],u=0;async function f(o){const a=await Mt(l,o);let _=await Nt(l,a.vocabs),D=[],M=[50,100,200,400,600,800,1e3,1500,2e3,4e3,6e3,8e3,1e4,2e4,1e5];u=_.filter(y=>y.state[0]!="blacklisted").filter(y=>!$e(y)).length;for(let y of M){let T=Math.min(y,u),E=rn(_,T);if(D.push([T,E]),T>=u)break}n(1,s=D),n(0,c=a)}return t.$$.update=()=>{if(t.$$.dirty&4&&r.length>0){let o=r[r.length-1];f(o)}},[c,s,r]}class sn extends Ne{constructor(e){super(),Me(this,e,cn,nn,ve,{})}}function on(t){let e,n,l,r,c,s,u,f,o,a,_,D,M,k,y,T,E,N,v,O,p;y=new $t({props:{decks:t[1],min_coverage:fn,min_learning:dn,filter_builtin:_n}});let b=t[0]===t[5].DeckMerger&&bt(),w=t[0]===t[5].DeckYeeter&&vt(t),A=t[0]===t[5].DeckCoverage&&wt();return{c(){e=d("a"),e.textContent="DeckMerger",n=m(),l=d("a"),l.textContent="DeckYeeter",r=m(),c=d("a"),c.textContent="DeckCoverage",s=m(),u=d("p"),u.textContent="Result:",f=m(),o=d("pre"),a=C(t[4]),_=m(),D=d("button"),D.textContent="Reload decks",M=m(),k=d("div"),Be(y.$$.fragment),T=m(),b&&b.c(),E=m(),w&&w.c(),N=m(),A&&A.c(),g(e,"href","#"),g(l,"href","#"),g(c,"href","#"),g(D,"type","button"),g(k,"class","container svelte-1gcq67e")},m(j,L){B(j,e,L),B(j,n,L),B(j,l,L),B(j,r,L),B(j,c,L),B(j,s,L),B(j,u,L),B(j,f,L),B(j,o,L),i(o,a),B(j,_,L),B(j,D,L),B(j,M,L),B(j,k,L),Ce(y,k,null),i(k,T),b&&b.m(k,null),i(k,E),w&&w.m(k,null),i(k,N),A&&A.m(k,null),v=!0,O||(p=[R(e,"click",t[7]),R(l,"click",t[8]),R(c,"click",t[9]),R(D,"click",t[6])],O=!0)},p(j,L){(!v||L&16)&&te(a,j[4]);const W={};L&2&&(W.decks=j[1]),y.$set(W),j[0]===j[5].DeckMerger?b?L&1&&ee(b,1):(b=bt(),b.c(),ee(b,1),b.m(k,E)):b&&(ze(),se(b,1,1,()=>{b=null}),He()),j[0]===j[5].DeckYeeter?w?(w.p(j,L),L&1&&ee(w,1)):(w=vt(j),w.c(),ee(w,1),w.m(k,N)):w&&(ze(),se(w,1,1,()=>{w=null}),He()),j[0]===j[5].DeckCoverage?A?L&1&&ee(A,1):(A=wt(),A.c(),ee(A,1),A.m(k,null)):A&&(ze(),se(A,1,1,()=>{A=null}),He())},i(j){v||(ee(y.$$.fragment,j),ee(b),ee(w),ee(A),v=!0)},o(j){se(y.$$.fragment,j),se(b),se(w),se(A),v=!1},d(j){j&&(I(e),I(n),I(l),I(r),I(c),I(s),I(u),I(f),I(o),I(_),I(D),I(M),I(k)),je(y),b&&b.d(),w&&w.d(),A&&A.d(),O=!1,he(p)}}}function un(t){let e,n;return e=new tn({}),e.$on("login",t[6]),{c(){Be(e.$$.fragment)},m(l,r){Ce(e,l,r),n=!0},p:S,i(l){n||(ee(e.$$.fragment,l),n=!0)},o(l){se(e.$$.fragment,l),n=!1},d(l){je(e,l)}}}function bt(t){let e,n;return e=new Qt({}),{c(){Be(e.$$.fragment)},m(l,r){Ce(e,l,r),n=!0},i(l){n||(ee(e.$$.fragment,l),n=!0)},o(l){se(e.$$.fragment,l),n=!1},d(l){je(e,l)}}}function vt(t){let e,n;return e=new Ut({}),e.$on("deleted_decks",t[6]),{c(){Be(e.$$.fragment)},m(l,r){Ce(e,l,r),n=!0},p:S,i(l){n||(ee(e.$$.fragment,l),n=!0)},o(l){se(e.$$.fragment,l),n=!1},d(l){je(e,l)}}}function wt(t){let e,n;return e=new sn({}),{c(){Be(e.$$.fragment)},m(l,r){Ce(e,l,r),n=!0},i(l){n||(ee(e.$$.fragment,l),n=!0)},o(l){se(e.$$.fragment,l),n=!1},d(l){je(e,l)}}}function an(t){let e,n,l,r;const c=[un,on],s=[];function u(f,o){return f[2]?1:0}return e=u(t),n=s[e]=c[e](t),{c(){n.c(),l=Ft()},m(f,o){s[e].m(f,o),B(f,l,o),r=!0},p(f,[o]){let a=e;e=u(f),e===a?s[e].p(f,o):(ze(),se(s[a],1,1,()=>{s[a]=null}),He(),n=s[e],n?n.p(f,o):(n=s[e]=c[e](f),n.c()),ee(n,1),n.m(l.parentNode,l))},i(f){r||(ee(n),r=!0)},o(f){se(n),r=!1},d(f){f&&I(l),s[e].d(f)}}}let fn=0,dn=0,_n=!1;function hn(t,e,n){let l,r,c,s;re(t,Ie,k=>n(10,l=k)),re(t,Ue,k=>n(2,r=k)),re(t,ue,k=>n(3,c=k)),re(t,be,k=>n(4,s=k));var u=(k=>(k[k.DeckMerger=0]="DeckMerger",k[k.DeckYeeter=1]="DeckYeeter",k[k.DeckCoverage=2]="DeckCoverage",k))(u||{});let f=0,o=[];async function a(){let y=await(await De("list-user-decks",{fields:["name","vocabulary_known_coverage","vocabulary_in_progress_coverage","is_built_in","id","word_count","vocabulary_count"]},l)).json();console.log(y),n(1,o=y.decks.map(T=>{let[E,N,v,O,p,b,w]=T;return{name:E,id:p,known_coverage:N??0,learning_coverage:v??0,is_built_in:O,word_count:b,vocab_count:w}}))}return[f,o,r,c,s,u,a,k=>{k.preventDefault(),n(0,f=u.DeckMerger),_e(ue,c=[],c)},k=>{k.preventDefault(),n(0,f=u.DeckYeeter),_e(ue,c=[],c)},k=>{k.preventDefault(),n(0,f=u.DeckCoverage),_e(ue,c=[],c)}]}class pn extends Ne{constructor(e){super(),Me(this,e,hn,an,ve,{})}}function gn(t){let e,n,l;return n=new pn({}),{c(){e=d("main"),Be(n.$$.fragment)},m(r,c){B(r,e,c),Ce(n,e,null),l=!0},p:S,i(r){l||(ee(n.$$.fragment,r),l=!0)},o(r){se(n.$$.fragment,r),l=!1},d(r){r&&I(e),je(n)}}}class mn extends Ne{constructor(e){super(),Me(this,e,null,gn,ve,{})}}new mn({target:document.getElementById("app")});
