var vt=Object.defineProperty;var wt=(t,e,n)=>e in t?vt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ke=(t,e,n)=>(wt(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function K(){}function mt(t){return t()}function $e(){return Object.create(null)}function ae(t){t.forEach(mt)}function kt(t){return typeof t=="function"}function je(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function yt(t){return Object.keys(t).length===0}function jt(t,...e){if(t==null){for(const l of e)l(void 0);return K}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function ne(t,e,n){t.$$.on_destroy.push(jt(e,n))}function de(t){return t??""}function he(t,e,n){return t.set(n),e}function r(t,e){t.appendChild(e)}function E(t,e,n){t.insertBefore(e,n||null)}function N(t){t.parentNode&&t.parentNode.removeChild(t)}function Je(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function _(t){return document.createElement(t)}function D(t){return document.createTextNode(t)}function y(){return D(" ")}function Dt(){return D("")}function P(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function w(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Mt(t){let e;return{p(...n){e=n,e.forEach(l=>t.push(l))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function oe(t){return t===""?null:+t}function Ct(t){return Array.from(t.childNodes)}function ce(t,e){e=""+e,t.data!==e&&(t.data=e)}function H(t,e){t.value=e??""}function Fe(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function xe(t,e,n){for(let l=0;l<t.options.length;l+=1){const i=t.options[l];if(i.__value===e){i.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Nt(t){const e=t.querySelector(":checked");return e&&e.__value}function Et(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let Ve;function Te(t){Ve=t}function Ot(){if(!Ve)throw new Error("Function called outside component initialization");return Ve}function Lt(){const t=Ot();return(e,n,{cancelable:l=!1}={})=>{const i=t.$$.callbacks[e];if(i){const s=Et(e,n,{cancelable:l});return i.slice().forEach(c=>{c.call(t,s)}),!s.defaultPrevented}return!0}}const Ne=[],et=[];let Ee=[];const tt=[],qt=Promise.resolve();let Xe=!1;function It(){Xe||(Xe=!0,qt.then(bt))}function ze(t){Ee.push(t)}const Ge=new Set;let Me=0;function bt(){if(Me!==0)return;const t=Ve;do{try{for(;Me<Ne.length;){const e=Ne[Me];Me++,Te(e),Bt(e.$$)}}catch(e){throw Ne.length=0,Me=0,e}for(Te(null),Ne.length=0,Me=0;et.length;)et.pop()();for(let e=0;e<Ee.length;e+=1){const n=Ee[e];Ge.has(n)||(Ge.add(n),n())}Ee.length=0}while(Ne.length);for(;tt.length;)tt.pop()();Xe=!1,Ge.clear(),Te(t)}function Bt(t){if(t.fragment!==null){t.update(),ae(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ze)}}function Pt(t){const e=[],n=[];Ee.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),Ee=e}const We=new Set;let we;function Ze(){we={r:0,c:[],p:we}}function Se(){we.r||ae(we.c),we=we.p}function te(t,e){t&&t.i&&(We.delete(t),t.i(e))}function ue(t,e,n,l){if(t&&t.o){if(We.has(t))return;We.add(t),we.c.push(()=>{We.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function ke(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Re(t){t&&t.c()}function Oe(t,e,n){const{fragment:l,after_update:i}=t.$$;l&&l.m(e,n),ze(()=>{const s=t.$$.on_mount.map(mt).filter(kt);t.$$.on_destroy?t.$$.on_destroy.push(...s):ae(s),t.$$.on_mount=[]}),i.forEach(ze)}function Le(t,e){const n=t.$$;n.fragment!==null&&(Pt(n.after_update),ae(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function At(t,e){t.$$.dirty[0]===-1&&(Ne.push(t),It(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function qe(t,e,n,l,i,s,c=null,f=[-1]){const o=Ve;Te(t);const u=t.$$={fragment:null,ctx:[],props:s,update:K,not_equal:i,bound:$e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:$e(),dirty:f,skip_bound:!1,root:e.target||o.$$.root};c&&c(u.root);let h=!1;if(u.ctx=n?n(t,e.props||{},(k,v,...p)=>{const V=p.length?p[0]:v;return u.ctx&&i(u.ctx[k],u.ctx[k]=V)&&(!u.skip_bound&&u.bound[k]&&u.bound[k](V),h&&At(t,k)),v}):[],u.update(),h=!0,ae(u.before_update),u.fragment=l?l(u.ctx):!1,e.target){if(e.hydrate){const k=Ct(e.target);u.fragment&&u.fragment.l(k),k.forEach(N)}else u.fragment&&u.fragment.c();e.intro&&te(t.$$.fragment),Oe(t,e.target,e.anchor),bt()}Te(o)}class Ie{constructor(){Ke(this,"$$");Ke(this,"$$set")}$destroy(){Le(this,1),this.$destroy=K}$on(e,n){if(!kt(n))return K;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(e){this.$$set&&!yt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ft="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ft);const Ce=[];function He(t,e=K){let n;const l=new Set;function i(f){if(je(t,f)&&(t=f,n)){const o=!Ce.length;for(const u of l)u[1](),Ce.push(u,t);if(o){for(let u=0;u<Ce.length;u+=2)Ce[u][0](Ce[u+1]);Ce.length=0}}}function s(f){i(f(t))}function c(f,o=K){const u=[f,o];return l.add(u),l.size===1&&(n=e(i,s)||K),f(t),()=>{l.delete(u),l.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:c}}const Ye=He(""),Ue=He(!1),me=He(""),fe=He([]);function nt(t,e,n){const l=t.slice();return l[18]=e[n],l}function lt(t){let e,n,l,i=t[18].name+"",s,c,f,o,u,h,k,v=t[18].known_coverage.toFixed(1)+"",p,V,C,A=t[18].learning_coverage.toFixed(1)+"",O,M,g,b=t[18].vocab_count+"",a,m,I,$=t[18].word_count+"",le,x,R,se=t[18].is_built_in+"",Z,ie,Q,_e;function re(...ee){return t[16](t[18],...ee)}return{c(){e=_("tr"),n=_("td"),l=_("a"),s=D(i),c=y(),f=_("a"),o=D("[jpdb]"),h=y(),k=_("td"),p=D(v),V=y(),C=_("td"),O=D(A),M=y(),g=_("td"),a=D(b),m=y(),I=_("td"),le=D($),x=y(),R=_("td"),Z=D(se),ie=y(),w(l,"href","#"),w(f,"target","_blank"),w(f,"href",u="https://jpdb.io/deck?id="+t[18].id),w(n,"class","svelte-mesrax"),Fe(k,"text-align","right"),w(k,"class","svelte-mesrax"),Fe(C,"text-align","right"),w(C,"class","svelte-mesrax"),Fe(g,"text-align","right"),w(g,"class","svelte-mesrax"),Fe(I,"text-align","right"),w(I,"class","svelte-mesrax"),Fe(R,"text-align","center"),w(R,"class","svelte-mesrax"),w(e,"class","svelte-mesrax")},m(ee,S){E(ee,e,S),r(e,n),r(n,l),r(l,s),r(n,c),r(n,f),r(f,o),r(e,h),r(e,k),r(k,p),r(e,V),r(e,C),r(C,O),r(e,M),r(e,g),r(g,a),r(e,m),r(e,I),r(I,le),r(e,x),r(e,R),r(R,Z),r(e,ie),Q||(_e=P(l,"click",re),Q=!0)},p(ee,S){t=ee,S&32&&i!==(i=t[18].name+"")&&ce(s,i),S&32&&u!==(u="https://jpdb.io/deck?id="+t[18].id)&&w(f,"href",u),S&32&&v!==(v=t[18].known_coverage.toFixed(1)+"")&&ce(p,v),S&32&&A!==(A=t[18].learning_coverage.toFixed(1)+"")&&ce(O,A),S&32&&b!==(b=t[18].vocab_count+"")&&ce(a,b),S&32&&$!==($=t[18].word_count+"")&&ce(le,$),S&32&&se!==(se=t[18].is_built_in+"")&&ce(Z,se)},d(ee){ee&&N(e),Q=!1,_e()}}}function it(t){let e,n,l;return{c(){e=_("button"),e.textContent="add all"},m(i,s){E(i,e,s),n||(l=P(e,"click",t[17]),n=!0)},p:K,d(i){i&&N(e),n=!1,l()}}}function Tt(t){let e,n,l,i=t[5].length+"",s,c,f=t[3].length+"",o,u,h,k,v,p,V,C,A,O,M,g,b,a,m,I,$,le,x,R,se,Z,ie,Q,_e,re,ee,S,j,F,W,Y,J,U,be,pe,Be,De,ve,Pe,ge,G,X,z=ke(t[5]),B=[];for(let d=0;d<z.length;d+=1)B[d]=lt(nt(t,z,d));let T=t[3].length>0&&it(t);return{c(){e=_("div"),n=_("h3"),l=D("Decklist (showing "),s=D(i),c=D(" of "),o=D(f),u=D(")"),h=D(`
    Min coverage:
    `),k=_("input"),v=D(`
    Min learning coverage:
    `),p=_("input"),V=D(`
    Filter builtin:
    `),C=_("input"),A=y(),O=_("table"),M=_("tr"),g=_("th"),b=_("i"),m=D(`
                name`),I=y(),$=_("th"),le=_("i"),R=D(`
                coverage`),se=y(),Z=_("th"),ie=_("i"),_e=D(`
                learning`),re=_("br"),ee=D("coverage"),S=y(),j=_("th"),F=_("i"),Y=D(`
                vocab`),J=y(),U=_("th"),be=_("i"),Be=D(`
                words`),De=y(),ve=_("th"),ve.textContent="is_built_in",Pe=y();for(let d=0;d<B.length;d+=1)B[d].c();ge=y(),T&&T.c(),w(k,"type","number"),w(p,"type","number"),w(C,"type","checkbox"),w(b,"class",a=de(t[4]==t[7].Name?"sorting_asc":"sorting")+" svelte-mesrax"),w(le,"class",x=de(t[4]==t[7].Coverage?"sorting_desc":"sorting")+" svelte-mesrax"),w(ie,"class",Q=de(t[4]==t[7].Learning?"sorting_desc":"sorting")+" svelte-mesrax"),w(F,"class",W=de(t[4]==t[7].VocabCount?"sorting_desc":"sorting")+" svelte-mesrax"),w(be,"class",pe=de(t[4]==t[7].WordCount?"sorting_desc":"sorting")+" svelte-mesrax"),w(M,"class","svelte-mesrax"),w(O,"class","svelte-mesrax")},m(d,q){E(d,e,q),r(e,n),r(n,l),r(n,s),r(n,c),r(n,o),r(n,u),r(e,h),r(e,k),H(k,t[0]),r(e,v),r(e,p),H(p,t[1]),r(e,V),r(e,C),C.checked=t[2],r(e,A),r(e,O),r(O,M),r(M,g),r(g,b),r(g,m),r(M,I),r(M,$),r($,le),r($,R),r(M,se),r(M,Z),r(Z,ie),r(Z,_e),r(Z,re),r(Z,ee),r(M,S),r(M,j),r(j,F),r(j,Y),r(M,J),r(M,U),r(U,be),r(U,Be),r(M,De),r(M,ve),r(O,Pe);for(let L=0;L<B.length;L+=1)B[L]&&B[L].m(O,null);r(e,ge),T&&T.m(e,null),G||(X=[P(k,"input",t[8]),P(p,"input",t[9]),P(C,"change",t[10]),P(g,"click",t[11]),P($,"click",t[12]),P(Z,"click",t[13]),P(j,"click",t[14]),P(U,"click",t[15])],G=!0)},p(d,[q]){if(q&32&&i!==(i=d[5].length+"")&&ce(s,i),q&8&&f!==(f=d[3].length+"")&&ce(o,f),q&1&&oe(k.value)!==d[0]&&H(k,d[0]),q&2&&oe(p.value)!==d[1]&&H(p,d[1]),q&4&&(C.checked=d[2]),q&16&&a!==(a=de(d[4]==d[7].Name?"sorting_asc":"sorting")+" svelte-mesrax")&&w(b,"class",a),q&16&&x!==(x=de(d[4]==d[7].Coverage?"sorting_desc":"sorting")+" svelte-mesrax")&&w(le,"class",x),q&16&&Q!==(Q=de(d[4]==d[7].Learning?"sorting_desc":"sorting")+" svelte-mesrax")&&w(ie,"class",Q),q&16&&W!==(W=de(d[4]==d[7].VocabCount?"sorting_desc":"sorting")+" svelte-mesrax")&&w(F,"class",W),q&16&&pe!==(pe=de(d[4]==d[7].WordCount?"sorting_desc":"sorting")+" svelte-mesrax")&&w(be,"class",pe),q&96){z=ke(d[5]);let L;for(L=0;L<z.length;L+=1){const Ae=nt(d,z,L);B[L]?B[L].p(Ae,q):(B[L]=lt(Ae),B[L].c(),B[L].m(O,null))}for(;L<B.length;L+=1)B[L].d(1);B.length=z.length}d[3].length>0?T?T.p(d,q):(T=it(d),T.c(),T.m(e,null)):T&&(T.d(1),T=null)},i:K,o:K,d(d){d&&N(e),Je(B,d),T&&T.d(),G=!1,ae(X)}}}function Vt(t,e,n){let l,i;ne(t,fe,a=>n(6,i=a));let{min_coverage:s}=e,{min_learning:c}=e,{filter_builtin:f}=e,{decks:o}=e;var u=(a=>(a[a.None=0]="None",a[a.Name=1]="Name",a[a.Coverage=2]="Coverage",a[a.Learning=3]="Learning",a[a.WordCount=4]="WordCount",a[a.VocabCount=5]="VocabCount",a))(u||{});let h=0;function k(){s=oe(this.value),n(0,s)}function v(){c=oe(this.value),n(1,c)}function p(){f=this.checked,n(2,f)}const V=a=>n(4,h=u.Name),C=a=>n(4,h=u.Coverage),A=a=>n(4,h=u.Learning),O=a=>n(4,h=u.VocabCount),M=a=>n(4,h=u.WordCount),g=(a,m)=>{m.preventDefault(),i.push(a),fe.set(i)},b=async()=>{i.concat(l),fe.set(i)};return t.$$set=a=>{"min_coverage"in a&&n(0,s=a.min_coverage),"min_learning"in a&&n(1,c=a.min_learning),"filter_builtin"in a&&n(2,f=a.filter_builtin),"decks"in a&&n(3,o=a.decks)},t.$$.update=()=>{t.$$.dirty&8&&o.length>0&&n(4,h=0),t.$$.dirty&31&&n(5,l=o.filter(a=>a.known_coverage>=s&&a.learning_coverage>=c&&(a.is_built_in||!f)).sort((a,m)=>{switch(h){case 0:return 0;case 1:return a.name.localeCompare(m.name);case 2:return m.known_coverage-a.known_coverage;case 3:return m.learning_coverage-a.learning_coverage;case 4:return m.word_count-a.word_count;case 5:return m.vocab_count-a.vocab_count}}))},[s,c,f,o,h,l,i,u,k,v,p,V,C,A,O,M,g,b]}class Yt extends Ie{constructor(e){super(),qe(this,e,Vt,Tt,je,{min_coverage:0,min_learning:1,filter_builtin:2,decks:3})}}async function ye(t,e,n){let l=new Headers;return l.set("Authorization","Bearer "+n),l.set("Content-Type","application/json"),await fetch("https://jpdb.io/api/v1/"+t,{headers:l,method:"POST",body:JSON.stringify(e)})}function rt(t,e,n){const l=t.slice();return l[33]=e[n],l}function st(t,e,n){const l=t.slice();return l[36]=e[n],l}function ct(t){let e,n=t[36].name+"",l;return{c(){e=_("p"),l=D(n)},m(i,s){E(i,e,s),r(e,l)},p(i,s){s[0]&1024&&n!==(n=i[36].name+"")&&ce(l,n)},d(i){i&&N(e)}}}function ot(t){let e,n,l,i,s;return{c(){e=_("p"),n=D(`min decks:
                `),l=_("input"),w(l,"type","number")},m(c,f){E(c,e,f),r(e,n),r(e,l),H(l,t[2]),i||(s=P(l,"input",t[24]),i=!0)},p(c,f){f[0]&4&&oe(l.value)!==c[2]&&H(l,c[2])},d(c){c&&N(e),i=!1,s()}}}function ut(t){let e,n,l,i=ke(t[12]),s=[];for(let c=0;c<i.length;c+=1)s[c]=ft(rt(t,i,c));return{c(){e=_("select");for(let c=0;c<s.length;c+=1)s[c].c();t[6]===void 0&&ze(()=>t[26].call(e))},m(c,f){E(c,e,f);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null);xe(e,t[6],!0),n||(l=P(e,"change",t[26]),n=!0)},p(c,f){if(f[0]&4096){i=ke(c[12]);let o;for(o=0;o<i.length;o+=1){const u=rt(c,i,o);s[o]?s[o].p(u,f):(s[o]=ft(u),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=i.length}f[0]&4160&&xe(e,c[6])},d(c){c&&N(e),Je(s,c),n=!1,l()}}}function ft(t){let e,n=t[33]+"",l,i;return{c(){e=_("option"),l=D(n),i=y(),e.__value=t[33],H(e,e.__value)},m(s,c){E(s,e,c),r(e,l),r(e,i)},p:K,d(s){s&&N(e)}}}function at(t){let e,n,l,i,s,c,f,o,u;return{c(){e=_("p"),n=D("min: "),l=_("input"),i=y(),s=_("p"),c=D("max: "),f=_("input"),w(l,"type","number"),w(f,"type","number")},m(h,k){E(h,e,k),r(e,n),r(e,l),H(l,t[8]),E(h,i,k),E(h,s,k),r(s,c),r(s,f),H(f,t[9]),o||(u=[P(l,"input",t[28]),P(f,"input",t[29])],o=!0)},p(h,k){k[0]&256&&oe(l.value)!==h[8]&&H(l,h[8]),k[0]&512&&oe(f.value)!==h[9]&&H(f,h[9])},d(h){h&&(N(e),N(i),N(s)),o=!1,ae(u)}}}function _t(t){let e,n,l=t[4].name+"",i,s,c,f,o;return{c(){e=_("p"),n=D(`Last created:
                `),i=D(l),s=y(),c=_("a"),f=D("[jpdb]"),w(c,"target","_blank"),w(c,"href",o="https://jpdb.io/deck?id="+t[4].id)},m(u,h){E(u,e,h),r(e,n),r(e,i),r(e,s),r(e,c),r(c,f)},p(u,h){h[0]&16&&l!==(l=u[4].name+"")&&ce(i,l),h[0]&16&&o!==(o="https://jpdb.io/deck?id="+u[4].id)&&w(c,"href",o)},d(u){u&&N(e)}}}function Rt(t){let e,n,l,i,s,c,f,o,u,h,k,v,p,V,C,A,O,M,g,b,a,m,I,$,le,x,R,se,Z,ie,Q,_e,re,ee,S,j,F,W,Y,J,U,be,pe,Be,De,ve,Pe,ge=ke(t[10]),G=[];for(let d=0;d<ge.length;d+=1)G[d]=ct(st(t,ge,d));let X=t[3]==t[11].BijakMerge&&ot(t),z=t[5]&&ut(t),B=t[7]&&at(t),T=t[4]!=null&&_t(t);return De=Mt(t[21][0]),{c(){e=_("div"),n=_("h3"),n.textContent="Deckmerger",l=D(`
        selected decks:`),i=_("br"),s=y();for(let d=0;d<G.length;d+=1)G[d].c();c=y(),f=_("button"),f.textContent="Reset selection",o=y(),u=_("p"),h=D(`Name of new deck
            `),k=_("input"),v=y(),p=_("p"),V=D(`min occurences:
            `),C=_("input"),A=y(),O=_("p"),M=_("label"),g=_("input"),b=D(`
                Merge`),a=y(),m=_("label"),I=_("input"),$=D(`
                Intersect`),le=y(),x=_("label"),R=_("input"),se=D(`
                BijakMerge`),Z=y(),X&&X.c(),ie=y(),Q=_("p"),_e=D(`Filter for card state?
            `),re=_("input"),ee=y(),z&&z.c(),S=y(),j=_("p"),F=D(`Filter by global frequency?
            `),W=_("input"),Y=y(),B&&B.c(),J=y(),U=_("button"),be=D("create deck"),Be=y(),T&&T.c(),w(k,"type","text"),w(C,"type","number"),w(g,"type","radio"),w(g,"name","strat"),g.__value=t[11].Merge,H(g,g.__value),w(M,"title","Merges decks into new deck, adds up all vocab occurences, then removes all vocab where occurences < min_occurences"),w(I,"type","radio"),w(I,"name","strat"),I.__value=t[11].Intersect,H(I,I.__value),w(m,"title","Only adds those words into the new deck that appear in all decks. Then removes all where occurences < min_occurences"),w(R,"type","radio"),w(R,"name","strat"),R.__value=t[11].BijakMerge,H(R,R.__value),w(x,"title","The BijakMerge (named after its inventor) works just like the regular merge, but also needs a minimum number of decks for a word to appear in for it to be included."),w(re,"type","checkbox"),w(W,"type","checkbox"),U.disabled=pe=t[10].length<=0,w(e,"id","deckmerger_div"),De.p(g,I,R)},m(d,q){E(d,e,q),r(e,n),r(e,l),r(e,i),r(e,s);for(let L=0;L<G.length;L+=1)G[L]&&G[L].m(e,null);r(e,c),r(e,f),r(e,o),r(e,u),r(u,h),r(u,k),H(k,t[0]),r(e,v),r(e,p),r(p,V),r(p,C),H(C,t[1]),r(e,A),r(e,O),r(O,M),r(M,g),g.checked=g.__value===t[3],r(M,b),r(O,a),r(O,m),r(m,I),I.checked=I.__value===t[3],r(m,$),r(O,le),r(O,x),r(x,R),R.checked=R.__value===t[3],r(x,se),r(e,Z),X&&X.m(e,null),r(e,ie),r(e,Q),r(Q,_e),r(Q,re),re.checked=t[5],r(Q,ee),z&&z.m(Q,null),r(e,S),r(e,j),r(j,F),r(j,W),W.checked=t[7],r(j,Y),B&&B.m(j,null),r(e,J),r(e,U),r(U,be),r(e,Be),T&&T.m(e,null),ve||(Pe=[P(f,"click",t[17]),P(k,"input",t[18]),P(C,"input",t[19]),P(g,"change",t[20]),P(I,"change",t[22]),P(R,"change",t[23]),P(re,"change",t[25]),P(W,"change",t[27]),P(U,"click",t[30])],ve=!0)},p(d,q){if(q[0]&1024){ge=ke(d[10]);let L;for(L=0;L<ge.length;L+=1){const Ae=st(d,ge,L);G[L]?G[L].p(Ae,q):(G[L]=ct(Ae),G[L].c(),G[L].m(e,c))}for(;L<G.length;L+=1)G[L].d(1);G.length=ge.length}q[0]&1&&k.value!==d[0]&&H(k,d[0]),q[0]&2&&oe(C.value)!==d[1]&&H(C,d[1]),q[0]&8&&(g.checked=g.__value===d[3]),q[0]&8&&(I.checked=I.__value===d[3]),q[0]&8&&(R.checked=R.__value===d[3]),d[3]==d[11].BijakMerge?X?X.p(d,q):(X=ot(d),X.c(),X.m(e,ie)):X&&(X.d(1),X=null),q[0]&32&&(re.checked=d[5]),d[5]?z?z.p(d,q):(z=ut(d),z.c(),z.m(Q,null)):z&&(z.d(1),z=null),q[0]&128&&(W.checked=d[7]),d[7]?B?B.p(d,q):(B=at(d),B.c(),B.m(j,null)):B&&(B.d(1),B=null),q[0]&1024&&pe!==(pe=d[10].length<=0)&&(U.disabled=pe),d[4]!=null?T?T.p(d,q):(T=_t(d),T.c(),T.m(e,null)):T&&(T.d(1),T=null)},i:K,o:K,d(d){d&&N(e),Je(G,d),X&&X.d(),z&&z.d(),B&&B.d(),T&&T.d(),De.r(),ve=!1,ae(Pe)}}}function Qe(t,e){const n=[];for(const l of t)for(const i of l){const s=n.find(c=>c.vid===i.vid&&c.sid===i.sid);s!=null?(s.occurences+=i.occurences,s.decks+=1):n.push({decks:1,...i})}return n.filter(l=>l.decks>=e)}function Wt(t,e,n){let l,i,s;ne(t,Ye,j=>n(31,l=j)),ne(t,me,j=>n(32,i=j)),ne(t,fe,j=>n(10,s=j));var c=(j=>(j[j.Merge=0]="Merge",j[j.Intersect=1]="Intersect",j[j.BijakMerge=2]="BijakMerge",j))(c||{});let f="",o=1,u=1,h=0,k=null,v=!1,p=["new","locked","learning","known","due","failed","never-forget","suspended","blacklisted"],V=p[0],C=!1,A=1,O=3e4;async function M(j){const F=await(await ye("deck/list-vocabulary",{id:j.id,fetch_occurences:!0},l)).json();let W=[];for(let Y=0;Y<F.vocabulary.length;Y++){let J={vid:F.vocabulary[Y][0],sid:F.vocabulary[Y][1],occurences:F.occurences[Y]};W.push(J)}return{vocabs:W,...j}}async function g(j){const F=j.map(J=>[J.vid,J.sid]),W=await(await ye("lookup-vocabulary",{list:F,fields:["card_state","frequency_rank"]},l)).json();let Y=[];for(let J=0;J<W.vocabulary_info.length;J++)Y.push({state:W.vocabulary_info[J][0],frequency:W.vocabulary_info[J][1],...j[J]});return Y}async function b(j,F){let W=[],Y=[];F.forEach(U=>{W.push([U.vid,U.sid]),Y.push(U.occurences)});const J=await(await ye("deck/add-vocabulary",{id:j,vocabulary:W,occurences:Y},l)).json();he(me,i=JSON.stringify(J),i)}async function a(j){return(await(await ye("deck/create-empty",{name:j},l)).json()).id}const m=[[]],I=()=>{he(fe,s=[],s)};function $(){f=this.value,n(0,f)}function le(){o=oe(this.value),n(1,o)}function x(){h=this.__value,n(3,h)}function R(){h=this.__value,n(3,h)}function se(){h=this.__value,n(3,h)}function Z(){u=oe(this.value),n(2,u)}function ie(){v=this.checked,n(5,v)}function Q(){V=Nt(this),n(6,V),n(12,p)}function _e(){C=this.checked,n(7,C)}function re(){A=oe(this.value),n(8,A)}function ee(){O=oe(this.value),n(9,O)}return[f,o,u,h,k,v,V,C,A,O,s,c,p,M,g,b,a,I,$,le,x,m,R,se,Z,ie,Q,_e,re,ee,async()=>{if(f!==""){n(4,k=null);const j=[];for(const Y of s){const J=await M(Y);j.push(J.vocabs)}let F;switch(h){case c.Merge:F=Qe(j,1);break;case c.Intersect:F=Qe(j,j.length);break;case c.BijakMerge:F=Qe(j,u);break}F=F.filter(Y=>Y.occurences>=o),(v||C)&&(F=await g(F),v&&(F=F.filter(Y=>Y.state[0]===V)),C&&(F=F.filter(Y=>A<=Y.frequency&&Y.frequency<=O)));const W=await a(f);await b(W,F),n(4,k={id:W,name:f})}}]}class zt extends Ie{constructor(e){super(),qe(this,e,Wt,Rt,je,{},null,[-1,-1])}}function dt(t,e,n){const l=t.slice();return l[7]=e[n],l}function ht(t){let e,n=t[7].name+"",l;return{c(){e=_("p"),l=D(n)},m(i,s){E(i,e,s),r(e,l)},p(i,s){s&1&&n!==(n=i[7].name+"")&&ce(l,n)},d(i){i&&N(e)}}}function Jt(t){let e,n,l,i,s,c,f,o,u,h,k,v,p,V,C,A,O,M=ke(t[0]),g=[];for(let b=0;b<M.length;b+=1)g[b]=ht(dt(t,M,b));return{c(){e=_("div"),n=_("h3"),n.textContent="DeckYeeter",l=y(),i=_("p"),i.textContent="Decks to delete:",s=y();for(let b=0;b<g.length;b+=1)g[b].c();c=y(),f=_("button"),f.textContent="Reset selection",o=y(),u=_("br"),h=y(),k=_("br"),v=y(),p=_("br"),V=y(),C=_("button"),C.textContent="Delete Decks!"},m(b,a){E(b,e,a),r(e,n),r(e,l),r(e,i),r(e,s);for(let m=0;m<g.length;m+=1)g[m]&&g[m].m(e,null);r(e,c),r(e,f),r(e,o),r(e,u),r(e,h),r(e,k),r(e,v),r(e,p),r(e,V),r(e,C),A||(O=[P(f,"click",t[3]),P(C,"click",t[4])],A=!0)},p(b,[a]){if(a&1){M=ke(b[0]);let m;for(m=0;m<M.length;m+=1){const I=dt(b,M,m);g[m]?g[m].p(I,a):(g[m]=ht(I),g[m].c(),g[m].m(e,c))}for(;m<g.length;m+=1)g[m].d(1);g.length=M.length}},i:K,o:K,d(b){b&&N(e),Je(g,b),A=!1,ae(O)}}}function Ht(t,e,n){let l,i,s;ne(t,me,h=>n(5,l=h)),ne(t,Ye,h=>n(6,i=h)),ne(t,fe,h=>n(0,s=h));const c=Lt();async function f(h){const k=await(await ye("deck/delete",{id:h.id},i)).json();he(me,l=JSON.stringify(k),l)}return[s,c,f,()=>{he(fe,s=[],s)},async()=>{if(confirm("I'll delete "+s.length+" decks. Is that ok?")){for(const k of s)await f(k);he(fe,s=[],s),c("deleted_decks")}}]}class Kt extends Ie{constructor(e){super(),qe(this,e,Ht,Jt,je,{})}}function Gt(t){let e,n,l,i,s,c,f,o,u,h,k;return{c(){e=_("p"),e.innerHTML='Put your API Token here (from the bottom of <a href="https://jpdb.io/settings">jpdb.io/settings</a>), it won&#39;t get sent anywhere except jpdb.io. Don&#39;t share it with anyone!',n=y(),l=_("p"),l.textContent="After you have done this press fetch user decks.",i=y(),s=_("p"),s.textContent=`You can enter the token in your browsers password manager if you don't want
    to input it every time you use this site.`,c=y(),f=_("input"),o=y(),u=_("button"),u.textContent="Confirm",w(f,"type","password"),w(u,"type","button")},m(v,p){E(v,e,p),E(v,n,p),E(v,l,p),E(v,i,p),E(v,s,p),E(v,c,p),E(v,f,p),H(f,t[0]),E(v,o,p),E(v,u,p),h||(k=[P(f,"input",t[2]),P(u,"click",t[1])],h=!0)},p(v,[p]){p&1&&f.value!==v[0]&&H(f,v[0])},i:K,o:K,d(v){v&&(N(e),N(n),N(l),N(i),N(s),N(c),N(f),N(o),N(u)),h=!1,ae(k)}}}function Qt(t,e,n){let l,i,s;ne(t,Ue,o=>n(3,l=o)),ne(t,me,o=>n(4,i=o)),ne(t,Ye,o=>n(0,s=o));async function c(){const u=await(await ye("ping",{},s)).json();he(me,i=JSON.stringify(u),i),i=="{}"&&(he(me,i="Token confirmed as correct.",i),he(Ue,l=!0,l))}function f(){s=this.value,Ye.set(s)}return[s,c,f]}class Xt extends Ie{constructor(e){super(),qe(this,e,Qt,Gt,je,{})}}function Zt(t){let e,n,l,i,s,c,f,o,u,h,k,v,p,V,C,A,O,M;p=new Yt({props:{decks:t[1],min_coverage:$t,min_learning:xt,filter_builtin:en}});let g=t[0]===t[5].DeckMerger&&pt(),b=t[0]===t[5].DeckYeeter&&gt(t);return{c(){e=_("a"),e.textContent="DeckMerger",n=y(),l=_("a"),l.textContent="DeckYeeter",i=y(),s=_("p"),s.textContent="Result:",c=y(),f=_("pre"),o=D(t[4]),u=y(),h=_("button"),h.textContent="Fetch user decks",k=y(),v=_("div"),Re(p.$$.fragment),V=y(),g&&g.c(),C=y(),b&&b.c(),w(e,"href","#"),w(l,"href","#"),w(h,"type","button"),w(v,"class","container svelte-1gcq67e")},m(a,m){E(a,e,m),E(a,n,m),E(a,l,m),E(a,i,m),E(a,s,m),E(a,c,m),E(a,f,m),r(f,o),E(a,u,m),E(a,h,m),E(a,k,m),E(a,v,m),Oe(p,v,null),r(v,V),g&&g.m(v,null),r(v,C),b&&b.m(v,null),A=!0,O||(M=[P(e,"click",t[7]),P(l,"click",t[8]),P(h,"click",t[6])],O=!0)},p(a,m){(!A||m&16)&&ce(o,a[4]);const I={};m&2&&(I.decks=a[1]),p.$set(I),a[0]===a[5].DeckMerger?g?m&1&&te(g,1):(g=pt(),g.c(),te(g,1),g.m(v,C)):g&&(Ze(),ue(g,1,1,()=>{g=null}),Se()),a[0]===a[5].DeckYeeter?b?(b.p(a,m),m&1&&te(b,1)):(b=gt(a),b.c(),te(b,1),b.m(v,null)):b&&(Ze(),ue(b,1,1,()=>{b=null}),Se())},i(a){A||(te(p.$$.fragment,a),te(g),te(b),A=!0)},o(a){ue(p.$$.fragment,a),ue(g),ue(b),A=!1},d(a){a&&(N(e),N(n),N(l),N(i),N(s),N(c),N(f),N(u),N(h),N(k),N(v)),Le(p),g&&g.d(),b&&b.d(),O=!1,ae(M)}}}function St(t){let e,n;return e=new Xt({}),{c(){Re(e.$$.fragment)},m(l,i){Oe(e,l,i),n=!0},p:K,i(l){n||(te(e.$$.fragment,l),n=!0)},o(l){ue(e.$$.fragment,l),n=!1},d(l){Le(e,l)}}}function pt(t){let e,n;return e=new zt({}),{c(){Re(e.$$.fragment)},m(l,i){Oe(e,l,i),n=!0},i(l){n||(te(e.$$.fragment,l),n=!0)},o(l){ue(e.$$.fragment,l),n=!1},d(l){Le(e,l)}}}function gt(t){let e,n;return e=new Kt({}),e.$on("deleted_decks",t[6]),{c(){Re(e.$$.fragment)},m(l,i){Oe(e,l,i),n=!0},p:K,i(l){n||(te(e.$$.fragment,l),n=!0)},o(l){ue(e.$$.fragment,l),n=!1},d(l){Le(e,l)}}}function Ut(t){let e,n,l,i;const s=[St,Zt],c=[];function f(o,u){return o[2]?1:0}return e=f(t),n=c[e]=s[e](t),{c(){n.c(),l=Dt()},m(o,u){c[e].m(o,u),E(o,l,u),i=!0},p(o,[u]){let h=e;e=f(o),e===h?c[e].p(o,u):(Ze(),ue(c[h],1,1,()=>{c[h]=null}),Se(),n=c[e],n?n.p(o,u):(n=c[e]=s[e](o),n.c()),te(n,1),n.m(l.parentNode,l))},i(o){i||(te(n),i=!0)},o(o){ue(n),i=!1},d(o){o&&N(l),c[e].d(o)}}}let $t=0,xt=0,en=!1;function tn(t,e,n){let l,i,s,c;ne(t,Ye,p=>n(9,l=p)),ne(t,Ue,p=>n(2,i=p)),ne(t,fe,p=>n(3,s=p)),ne(t,me,p=>n(4,c=p));var f=(p=>(p[p.DeckMerger=0]="DeckMerger",p[p.DeckYeeter=1]="DeckYeeter",p))(f||{});let o=0,u=[];async function h(){let V=await(await ye("list-user-decks",{fields:["name","vocabulary_known_coverage","vocabulary_in_progress_coverage","is_built_in","id","word_count","vocabulary_count"]},l)).json();console.log(V),n(1,u=V.decks.map(C=>{let[A,O,M,g,b,a,m]=C;return{name:A,id:b,known_coverage:O??0,learning_coverage:M??0,is_built_in:g,word_count:a,vocab_count:m}}))}return[o,u,i,s,c,f,h,p=>{p.preventDefault(),n(0,o=f.DeckMerger),he(fe,s=[],s)},p=>{p.preventDefault(),n(0,o=f.DeckYeeter),he(fe,s=[],s)}]}class nn extends Ie{constructor(e){super(),qe(this,e,tn,Ut,je,{})}}function ln(t){let e,n,l;return n=new nn({}),{c(){e=_("main"),Re(n.$$.fragment)},m(i,s){E(i,e,s),Oe(n,e,null),l=!0},p:K,i(i){l||(te(n.$$.fragment,i),l=!0)},o(i){ue(n.$$.fragment,i),l=!1},d(i){i&&N(e),Le(n)}}}class rn extends Ie{constructor(e){super(),qe(this,e,null,ln,je,{})}}new rn({target:document.getElementById("app")});
