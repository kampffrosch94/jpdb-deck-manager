import{S as vt,i as bt,s as kt,k as r,q as _,a as T,l as c,m as p,r as h,h as o,c as j,n as N,b as P,G as t,J as te,K as Y,u as re,L as de,H as at,M as rt,N as mt,e as ct}from"../chunks/index.d70738cb.js";function ut(l,n,i){const s=l.slice();return s[25]=n[i],s}function ft(l,n,i){const s=l.slice();return s[25]=n[i],s}function _t(l){let n,i,s,f=l[25].name+"",k,q,g,U,d,E,I,S=l[25].known_coverage.toFixed(1)+"",V,Z,R,K=l[25].learning_coverage.toFixed(1)+"",Q,$,z,H=l[25].is_built_in+"",x,ee,M,le;function G(){return l[19](l[25])}return{c(){n=r("tr"),i=r("td"),s=r("a"),k=_(f),q=T(),g=r("a"),U=_("[jpdb]"),E=T(),I=r("td"),V=_(S),Z=T(),R=r("td"),Q=_(K),$=T(),z=r("td"),x=_(H),ee=T(),this.h()},l(J){n=c(J,"TR",{class:!0});var b=p(n);i=c(b,"TD",{class:!0});var w=p(i);s=c(w,"A",{href:!0});var v=p(s);k=h(v,f),v.forEach(o),q=j(w),g=c(w,"A",{href:!0});var m=p(g);U=h(m,"[jpdb]"),m.forEach(o),w.forEach(o),E=j(b),I=c(b,"TD",{class:!0});var y=p(I);V=h(y,S),y.forEach(o),Z=j(b),R=c(b,"TD",{class:!0});var L=p(R);Q=h(L,K),L.forEach(o),$=j(b),z=c(b,"TD",{class:!0});var W=p(z);x=h(W,H),W.forEach(o),ee=j(b),b.forEach(o),this.h()},h(){N(s,"href","#"),N(g,"href",d="https://jpdb.io/deck?id="+l[25].id),N(i,"class","svelte-15q9i7h"),N(I,"class","svelte-15q9i7h"),N(R,"class","svelte-15q9i7h"),N(z,"class","svelte-15q9i7h"),N(n,"class","svelte-15q9i7h")},m(J,b){P(J,n,b),t(n,i),t(i,s),t(s,k),t(i,q),t(i,g),t(g,U),t(n,E),t(n,I),t(I,V),t(n,Z),t(n,R),t(R,Q),t(n,$),t(n,z),t(z,x),t(n,ee),M||(le=Y(s,"click",G),M=!0)},p(J,b){l=J,b&4&&f!==(f=l[25].name+"")&&re(k,f),b&4&&d!==(d="https://jpdb.io/deck?id="+l[25].id)&&N(g,"href",d),b&4&&S!==(S=l[25].known_coverage.toFixed(1)+"")&&re(V,S),b&4&&K!==(K=l[25].learning_coverage.toFixed(1)+"")&&re(Q,K),b&4&&H!==(H=l[25].is_built_in+"")&&re(x,H)},d(J){J&&o(n),M=!1,le()}}}function ht(l){let n,i=l[25].known_coverage>l[3]&&l[25].learning_coverage>l[4]&&(l[25].is_built_in||!l[5])&&_t(l);return{c(){i&&i.c(),n=ct()},l(s){i&&i.l(s),n=ct()},m(s,f){i&&i.m(s,f),P(s,n,f)},p(s,f){s[25].known_coverage>s[3]&&s[25].learning_coverage>s[4]&&(s[25].is_built_in||!s[5])?i?i.p(s,f):(i=_t(s),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(s){i&&i.d(s),s&&o(n)}}}function pt(l){let n,i=l[25].name+"",s;return{c(){n=r("p"),s=_(i)},l(f){n=c(f,"P",{});var k=p(n);s=h(k,i),k.forEach(o)},m(f,k){P(f,n,k),t(n,s)},p(f,k){k&64&&i!==(i=f[25].name+"")&&re(s,i)},d(f){f&&o(n)}}}function dt(l){let n,i,s=l[9].name+"",f,k,q,g,U;return{c(){n=r("p"),i=_(`Last created:
                `),f=_(s),k=T(),q=r("a"),g=_("[jpdb]"),this.h()},l(d){n=c(d,"P",{});var E=p(n);i=h(E,`Last created:
                `),f=h(E,s),k=j(E),q=c(E,"A",{href:!0});var I=p(q);g=h(I,"[jpdb]"),I.forEach(o),E.forEach(o),this.h()},h(){N(q,"href",U="https://jpdb.io/deck?id="+l[9].id)},m(d,E){P(d,n,E),t(n,i),t(n,f),t(n,k),t(n,q),t(q,g)},p(d,E){E&512&&s!==(s=d[9].name+"")&&re(f,s),E&512&&U!==(U="https://jpdb.io/deck?id="+d[9].id)&&N(q,"href",U)},d(d){d&&o(n)}}}function gt(l){let n,i,s,f,k,q,g,U,d,E,I,S,V,Z,R,K,Q,$,z,H,x,ee,M,le,G,J,b,w,v,m,y,L,W,X,C,ve,Pe,Ne,be,De,qe,ke,Ie,Ue,me,Re,Ae,Fe,D,ge,He,Oe,Be,Se,Ee,ce,Me,Ve,ue,Je,ne,Le,fe,Ce,ie,ze,_e,Ge,Ke,Qe,Ye,he=l[2],A=[];for(let e=0;e<he.length;e+=1)A[e]=ht(ft(l,he,e));let pe=l[6],F=[];for(let e=0;e<pe.length;e+=1)F[e]=pt(ut(l,pe,e));let O=l[9]!=null&&dt(l);return{c(){n=r("p"),i=_("Put your API Token here (from the bottom of "),s=r("a"),f=_("jpdb.io/settings"),k=_("), it won't get send anywhere except jpdb.io. Don't share it with anyone!"),q=T(),g=r("input"),U=T(),d=r("button"),E=_("Ping"),I=T(),S=r("p"),V=_("Result:"),Z=T(),R=r("pre"),K=_("    "),Q=_(l[1]),$=_(`
`),z=T(),H=r("button"),x=_("Fetch user decks"),ee=_(`
Min coverage:
`),M=r("input"),le=_(`
Min learning coverage:
`),G=r("input"),J=_(`
Filter builtin:
`),b=r("input"),w=T(),v=r("div"),m=r("div"),y=r("h3"),L=_("Decklist"),W=T(),X=r("table"),C=r("tr"),ve=r("th"),Pe=_("name"),Ne=T(),be=r("th"),De=_("coverage"),qe=T(),ke=r("th"),Ie=_("learning coverage"),Ue=T(),me=r("th"),Re=_("is_built_in"),Ae=T();for(let e=0;e<A.length;e+=1)A[e].c();Fe=T(),D=r("div"),ge=r("h3"),He=_("Deckmerger"),Oe=_(`
        selected decks:`),Be=r("br"),Se=T();for(let e=0;e<F.length;e+=1)F[e].c();Ee=T(),ce=r("button"),Me=_("Reset selection"),Ve=T(),ue=r("p"),Je=_(`Name of new deck
            `),ne=r("input"),Le=T(),fe=r("p"),Ce=_(`min occurences:
            `),ie=r("input"),ze=T(),_e=r("button"),Ge=_("create deck"),Ke=T(),O&&O.c(),this.h()},l(e){n=c(e,"P",{});var u=p(n);i=h(u,"Put your API Token here (from the bottom of "),s=c(u,"A",{href:!0});var a=p(s);f=h(a,"jpdb.io/settings"),a.forEach(o),k=h(u,"), it won't get send anywhere except jpdb.io. Don't share it with anyone!"),u.forEach(o),q=j(e),g=c(e,"INPUT",{type:!0}),U=j(e),d=c(e,"BUTTON",{type:!0});var se=p(d);E=h(se,"Ping"),se.forEach(o),I=j(e),S=c(e,"P",{});var Ze=p(S);V=h(Ze,"Result:"),Ze.forEach(o),Z=j(e),R=c(e,"PRE",{});var we=p(R);K=h(we,"    "),Q=h(we,l[1]),$=h(we,`
`),we.forEach(o),z=j(e),H=c(e,"BUTTON",{type:!0});var $e=p(H);x=h($e,"Fetch user decks"),$e.forEach(o),ee=h(e,`
Min coverage:
`),M=c(e,"INPUT",{type:!0}),le=h(e,`
Min learning coverage:
`),G=c(e,"INPUT",{type:!0}),J=h(e,`
Filter builtin:
`),b=c(e,"INPUT",{type:!0}),w=j(e),v=c(e,"DIV",{class:!0});var ye=p(v);m=c(ye,"DIV",{});var Te=p(m);y=c(Te,"H3",{});var xe=p(y);L=h(xe,"Decklist"),xe.forEach(o),W=j(Te),X=c(Te,"TABLE",{class:!0});var je=p(X);C=c(je,"TR",{class:!0});var oe=p(C);ve=c(oe,"TH",{});var et=p(ve);Pe=h(et,"name"),et.forEach(o),Ne=j(oe),be=c(oe,"TH",{});var tt=p(be);De=h(tt,"coverage"),tt.forEach(o),qe=j(oe),ke=c(oe,"TH",{});var lt=p(ke);Ie=h(lt,"learning coverage"),lt.forEach(o),Ue=j(oe),me=c(oe,"TH",{});var nt=p(me);Re=h(nt,"is_built_in"),nt.forEach(o),oe.forEach(o),Ae=j(je);for(let ae=0;ae<A.length;ae+=1)A[ae].l(je);je.forEach(o),Te.forEach(o),Fe=j(ye),D=c(ye,"DIV",{id:!0});var B=p(D);ge=c(B,"H3",{});var it=p(ge);He=h(it,"Deckmerger"),it.forEach(o),Oe=h(B,`
        selected decks:`),Be=c(B,"BR",{}),Se=j(B);for(let ae=0;ae<F.length;ae+=1)F[ae].l(B);Ee=j(B),ce=c(B,"BUTTON",{});var st=p(ce);Me=h(st,"Reset selection"),st.forEach(o),Ve=j(B),ue=c(B,"P",{});var We=p(ue);Je=h(We,`Name of new deck
            `),ne=c(We,"INPUT",{type:!0}),We.forEach(o),Le=j(B),fe=c(B,"P",{});var Xe=p(fe);Ce=h(Xe,`min occurences:
            `),ie=c(Xe,"INPUT",{type:!0}),Xe.forEach(o),ze=j(B),_e=c(B,"BUTTON",{});var ot=p(_e);Ge=h(ot,"create deck"),ot.forEach(o),Ke=j(B),O&&O.l(B),B.forEach(o),ye.forEach(o),this.h()},h(){N(s,"href","https://jpdb.io/settings"),N(g,"type","password"),N(d,"type","button"),N(H,"type","button"),N(M,"type","number"),N(G,"type","number"),N(b,"type","checkbox"),N(C,"class","svelte-15q9i7h"),N(X,"class","svelte-15q9i7h"),N(ne,"type","text"),N(ie,"type","number"),N(D,"id","deckmerger_div"),N(v,"class","container svelte-15q9i7h")},m(e,u){P(e,n,u),t(n,i),t(n,s),t(s,f),t(n,k),P(e,q,u),P(e,g,u),te(g,l[0]),P(e,U,u),P(e,d,u),t(d,E),P(e,I,u),P(e,S,u),t(S,V),P(e,Z,u),P(e,R,u),t(R,K),t(R,Q),t(R,$),P(e,z,u),P(e,H,u),t(H,x),P(e,ee,u),P(e,M,u),te(M,l[3]),P(e,le,u),P(e,G,u),te(G,l[4]),P(e,J,u),P(e,b,u),b.checked=l[5],P(e,w,u),P(e,v,u),t(v,m),t(m,y),t(y,L),t(m,W),t(m,X),t(X,C),t(C,ve),t(ve,Pe),t(C,Ne),t(C,be),t(be,De),t(C,qe),t(C,ke),t(ke,Ie),t(C,Ue),t(C,me),t(me,Re),t(X,Ae);for(let a=0;a<A.length;a+=1)A[a]&&A[a].m(X,null);t(v,Fe),t(v,D),t(D,ge),t(ge,He),t(D,Oe),t(D,Be),t(D,Se);for(let a=0;a<F.length;a+=1)F[a]&&F[a].m(D,null);t(D,Ee),t(D,ce),t(ce,Me),t(D,Ve),t(D,ue),t(ue,Je),t(ue,ne),te(ne,l[7]),t(D,Le),t(D,fe),t(fe,Ce),t(fe,ie),te(ie,l[8]),t(D,ze),t(D,_e),t(_e,Ge),t(D,Ke),O&&O.m(D,null),Qe||(Ye=[Y(g,"input",l[15]),Y(d,"click",l[10]),Y(H,"click",l[11]),Y(M,"input",l[16]),Y(G,"input",l[17]),Y(b,"change",l[18]),Y(ce,"click",l[20]),Y(ne,"input",l[21]),Y(ie,"input",l[22]),Y(_e,"click",l[23])],Qe=!0)},p(e,[u]){if(u&1&&g.value!==e[0]&&te(g,e[0]),u&2&&re(Q,e[1]),u&8&&de(M.value)!==e[3]&&te(M,e[3]),u&16&&de(G.value)!==e[4]&&te(G,e[4]),u&32&&(b.checked=e[5]),u&124){he=e[2];let a;for(a=0;a<he.length;a+=1){const se=ft(e,he,a);A[a]?A[a].p(se,u):(A[a]=ht(se),A[a].c(),A[a].m(X,null))}for(;a<A.length;a+=1)A[a].d(1);A.length=he.length}if(u&64){pe=e[6];let a;for(a=0;a<pe.length;a+=1){const se=ut(e,pe,a);F[a]?F[a].p(se,u):(F[a]=pt(se),F[a].c(),F[a].m(D,Ee))}for(;a<F.length;a+=1)F[a].d(1);F.length=pe.length}u&128&&ne.value!==e[7]&&te(ne,e[7]),u&256&&de(ie.value)!==e[8]&&te(ie,e[8]),e[9]!=null?O?O.p(e,u):(O=dt(e),O.c(),O.m(D,null)):O&&(O.d(1),O=null)},i:at,o:at,d(e){e&&o(n),e&&o(q),e&&o(g),e&&o(U),e&&o(d),e&&o(I),e&&o(S),e&&o(Z),e&&o(R),e&&o(z),e&&o(H),e&&o(ee),e&&o(M),e&&o(le),e&&o(G),e&&o(J),e&&o(b),e&&o(w),e&&o(v),rt(A,e),rt(F,e),O&&O.d(),Qe=!1,mt(Ye)}}}function Et(l){const n=[];for(const i of l)for(const s of i){const f=n.find(k=>k.vid===s.vid&&k.sid===s.sid);f!=null?f.occurences+=s.occurences:n.push({...s})}return n}function wt(l,n,i){let s="",f="",k=[],q=80,g=80,U=!1,d=[],E="",I=1,S=null;async function V(w,v){let m=new Headers;return m.set("Authorization","Bearer "+s),m.set("Content-Type","application/json"),await fetch("https://jpdb.io/api/v1/"+w,{headers:m,method:"POST",body:JSON.stringify(v)})}async function Z(){const v=await(await V("ping",{})).json();i(1,f=JSON.stringify(v))}async function R(){const v=await(await V("list-user-decks",{fields:["name","vocabulary_known_coverage","vocabulary_in_progress_coverage","is_built_in","id"]})).json();i(2,k=v.decks.map(m=>{let[y,L,W,X,C]=m;return{name:y,id:C,known_coverage:L,learning_coverage:W,is_built_in:X}})),k.sort((m,y)=>m.name.localeCompare(y.name))}async function K(w){const v=await(await V("deck/list-vocabulary",{id:w.id,fetch_occurences:!0})).json();let m=[];for(let y=0;y<v.vocabulary.length;y++){let L={vid:v.vocabulary[y][0],sid:v.vocabulary[y][1],occurences:v.occurences[y]};m.push(L)}return{vocabs:m,...w}}async function Q(w,v){let m=[],y=[];v.forEach(W=>{m.push([W.vid,W.sid]),y.push(W.occurences)});const L=await(await V("deck/add-vocabulary",{id:w,vocabulary:m,occurences:y})).json();i(1,f=JSON.stringify(L))}async function $(w){return(await(await V("deck/create-empty",{name:w})).json()).id}function z(){s=this.value,i(0,s)}function H(){q=de(this.value),i(3,q)}function x(){g=de(this.value),i(4,g)}function ee(){U=this.checked,i(5,U)}const M=w=>{d.push(w),i(6,d)},le=()=>{i(6,d=[])};function G(){E=this.value,i(7,E)}function J(){I=de(this.value),i(8,I)}return[s,f,k,q,g,U,d,E,I,S,Z,R,K,Q,$,z,H,x,ee,M,le,G,J,async()=>{if(E!==""){const w=await $(E);i(9,S={id:w,name:E});const v=[];for(const y of d){const L=await K(y);v.push(L.vocabs)}const m=Et(v).filter(y=>y.occurences>=I);await Q(w,m)}}]}class Tt extends vt{constructor(n){super(),bt(this,n,wt,gt,kt,{})}}export{Tt as component};
