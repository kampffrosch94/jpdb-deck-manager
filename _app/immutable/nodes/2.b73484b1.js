import{S as Jt,i as Ct,s as zt,J as Gt,k as r,q as h,a as g,l as o,m as d,r as p,h as s,c as E,n as k,b as N,G as t,K as te,L as C,u as je,M as me,H as mt,N as Dt,O as Kt,e as qt}from"../chunks/index.b2c43475.js";function At(l,i,n){const a=l.slice();return a[34]=i[n],a}function Ot(l,i,n){const a=l.slice();return a[34]=i[n],a}function Lt(l){let i,n,a,u=l[34].name+"",v,f,b,A,T,y,M,O=l[34].known_coverage.toFixed(1)+"",x,L,q,z=l[34].learning_coverage.toFixed(1)+"",le,ce,S,U=l[34].is_built_in+"",ne,oe,G,fe;function ee(){return l[22](l[34])}return{c(){i=r("tr"),n=r("td"),a=r("a"),v=h(u),f=g(),b=r("a"),A=h("[jpdb]"),y=g(),M=r("td"),x=h(O),L=g(),q=r("td"),le=h(z),ce=g(),S=r("td"),ne=h(U),oe=g(),this.h()},l(Q){i=o(Q,"TR",{class:!0});var w=d(i);n=o(w,"TD",{class:!0});var ie=d(n);a=o(ie,"A",{href:!0});var W=d(a);v=p(W,u),W.forEach(s),f=E(ie),b=o(ie,"A",{href:!0});var K=d(b);A=p(K,"[jpdb]"),K.forEach(s),ie.forEach(s),y=E(w),M=o(w,"TD",{class:!0});var ue=d(M);x=p(ue,O),ue.forEach(s),L=E(w),q=o(w,"TD",{class:!0});var he=d(q);le=p(he,z),he.forEach(s),ce=E(w),S=o(w,"TD",{class:!0});var pe=d(S);ne=p(pe,U),pe.forEach(s),oe=E(w),w.forEach(s),this.h()},h(){k(a,"href","#"),k(b,"href",T="https://jpdb.io/deck?id="+l[34].id),k(n,"class","svelte-15q9i7h"),k(M,"class","svelte-15q9i7h"),k(q,"class","svelte-15q9i7h"),k(S,"class","svelte-15q9i7h"),k(i,"class","svelte-15q9i7h")},m(Q,w){N(Q,i,w),t(i,n),t(n,a),t(a,v),t(n,f),t(n,b),t(b,A),t(i,y),t(i,M),t(M,x),t(i,L),t(i,q),t(q,le),t(i,ce),t(i,S),t(S,ne),t(i,oe),G||(fe=C(a,"click",ee),G=!0)},p(Q,w){l=Q,w[0]&4&&u!==(u=l[34].name+"")&&je(v,u),w[0]&4&&T!==(T="https://jpdb.io/deck?id="+l[34].id)&&k(b,"href",T),w[0]&4&&O!==(O=l[34].known_coverage.toFixed(1)+"")&&je(x,O),w[0]&4&&z!==(z=l[34].learning_coverage.toFixed(1)+"")&&je(le,z),w[0]&4&&U!==(U=l[34].is_built_in+"")&&je(ne,U)},d(Q){Q&&s(i),G=!1,fe()}}}function Ut(l){let i,n=l[34].known_coverage>=l[3]&&l[34].learning_coverage>=l[4]&&(l[34].is_built_in||!l[5])&&Lt(l);return{c(){n&&n.c(),i=qt()},l(a){n&&n.l(a),i=qt()},m(a,u){n&&n.m(a,u),N(a,i,u)},p(a,u){a[34].known_coverage>=a[3]&&a[34].learning_coverage>=a[4]&&(a[34].is_built_in||!a[5])?n?n.p(a,u):(n=Lt(a),n.c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null)},d(a){n&&n.d(a),a&&s(i)}}}function Rt(l){let i,n,a,u;return{c(){i=r("button"),n=h("add all")},l(v){i=o(v,"BUTTON",{});var f=d(i);n=p(f,"add all"),f.forEach(s)},m(v,f){N(v,i,f),t(i,n),a||(u=C(i,"click",l[23]),a=!0)},p:mt,d(v){v&&s(i),a=!1,u()}}}function Ft(l){let i,n=l[34].name+"",a;return{c(){i=r("p"),a=h(n)},l(u){i=o(u,"P",{});var v=d(i);a=p(v,n),v.forEach(s)},m(u,v){N(u,i,v),t(i,a)},p(u,v){v[0]&64&&n!==(n=u[34].name+"")&&je(a,n)},d(u){u&&s(i)}}}function Ht(l){let i,n,a,u,v;return{c(){i=r("p"),n=h(`min decks:
                `),a=r("input"),this.h()},l(f){i=o(f,"P",{});var b=d(i);n=p(b,`min decks:
                `),a=o(b,"INPUT",{type:!0}),b.forEach(s),this.h()},h(){k(a,"type","number")},m(f,b){N(f,i,b),t(i,n),t(i,a),te(a,l[9]),u||(v=C(a,"input",l[31]),u=!0)},p(f,b){b[0]&512&&me(a.value)!==f[9]&&te(a,f[9])},d(f){f&&s(i),u=!1,v()}}}function Vt(l){let i,n,a=l[11].name+"",u,v,f,b,A;return{c(){i=r("p"),n=h(`Last created:
                `),u=h(a),v=g(),f=r("a"),b=h("[jpdb]"),this.h()},l(T){i=o(T,"P",{});var y=d(i);n=p(y,`Last created:
                `),u=p(y,a),v=E(y),f=o(y,"A",{href:!0});var M=d(f);b=p(M,"[jpdb]"),M.forEach(s),y.forEach(s),this.h()},h(){k(f,"href",A="https://jpdb.io/deck?id="+l[11].id)},m(T,y){N(T,i,y),t(i,n),t(i,u),t(i,v),t(i,f),t(f,b)},p(T,y){y[0]&2048&&a!==(a=T[11].name+"")&&je(u,a),y[0]&2048&&A!==(A="https://jpdb.io/deck?id="+T[11].id)&&k(f,"href",A)},d(T){T&&s(i)}}}function St(l){let i,n,a,u,v,f,b,A,T,y,M,O,x,L,q,z,le,ce,S,U,ne,oe,G,fe,ee,Q,w,ie,W,K,ue,he,pe,ae,X,ye,m,I,P,B,se,re,Oe,Le,Ue,ze,Ge,Ke,Se,j,Re,Qe,We,Xe,Ye,Fe,Pe,Ze,$e,Ne,xe,de,et,Ie,tt,ve,lt,_e,ge,Y,nt,it,Ee,Z,at,st,we,$,rt,ot,He,Me,ut,ct,ft,_t,gt,Be=l[2],R=[];for(let e=0;e<Be.length;e+=1)R[e]=Ut(Ot(l,Be,e));let H=l[2].length>0&&Rt(l),De=l[6],F=[];for(let e=0;e<De.length;e+=1)F[e]=Ft(At(l,De,e));let V=l[10]==l[12].BijakMerge&&Ht(l),J=l[11]!=null&&Vt(l);return ft=Gt(l[28][0]),{c(){i=r("p"),n=h("Put your API Token here (from the bottom of "),a=r("a"),u=h("jpdb.io/settings"),v=h("), it won't get send anywhere except jpdb.io. Don't share it with anyone!"),f=g(),b=r("input"),A=g(),T=r("button"),y=h("Ping"),M=g(),O=r("p"),x=h("Result:"),L=g(),q=r("pre"),z=h("    "),le=h(l[1]),ce=h(`
`),S=g(),U=r("button"),ne=h("Fetch user decks"),oe=h(`
Min coverage:
`),G=r("input"),fe=h(`
Min learning coverage:
`),ee=r("input"),Q=h(`
Filter builtin:
`),w=r("input"),ie=g(),W=r("div"),K=r("div"),ue=r("h3"),he=h("Decklist"),pe=g(),ae=r("table"),X=r("tr"),ye=r("th"),m=h("name"),I=g(),P=r("th"),B=h("coverage"),se=g(),re=r("th"),Oe=h("learning coverage"),Le=g(),Ue=r("th"),ze=h("is_built_in"),Ge=g();for(let e=0;e<R.length;e+=1)R[e].c();Ke=g(),H&&H.c(),Se=g(),j=r("div"),Re=r("h3"),Qe=h("Deckmerger"),We=h(`
        selected decks:`),Xe=r("br"),Ye=g();for(let e=0;e<F.length;e+=1)F[e].c();Fe=g(),Pe=r("button"),Ze=h("Reset selection"),$e=g(),Ne=r("p"),xe=h(`Name of new deck
            `),de=r("input"),et=g(),Ie=r("p"),tt=h(`min occurences:
            `),ve=r("input"),lt=g(),_e=r("p"),ge=r("label"),Y=r("input"),nt=h(`
                Merge`),it=g(),Ee=r("label"),Z=r("input"),at=h(`
                Intersect`),st=g(),we=r("label"),$=r("input"),rt=h(`
                BijakMerge`),ot=g(),V&&V.c(),He=g(),Me=r("button"),ut=h("create deck"),ct=g(),J&&J.c(),this.h()},l(e){i=o(e,"P",{});var c=d(i);n=p(c,"Put your API Token here (from the bottom of "),a=o(c,"A",{href:!0});var _=d(a);u=p(_,"jpdb.io/settings"),_.forEach(s),v=p(c,"), it won't get send anywhere except jpdb.io. Don't share it with anyone!"),c.forEach(s),f=E(e),b=o(e,"INPUT",{type:!0}),A=E(e),T=o(e,"BUTTON",{type:!0});var be=d(T);y=p(be,"Ping"),be.forEach(s),M=E(e),O=o(e,"P",{});var Et=d(O);x=p(Et,"Result:"),Et.forEach(s),L=E(e),q=o(e,"PRE",{});var Ve=d(q);z=p(Ve,"    "),le=p(Ve,l[1]),ce=p(Ve,`
`),Ve.forEach(s),S=E(e),U=o(e,"BUTTON",{type:!0});var wt=d(U);ne=p(wt,"Fetch user decks"),wt.forEach(s),oe=p(e,`
Min coverage:
`),G=o(e,"INPUT",{type:!0}),fe=p(e,`
Min learning coverage:
`),ee=o(e,"INPUT",{type:!0}),Q=p(e,`
Filter builtin:
`),w=o(e,"INPUT",{type:!0}),ie=E(e),W=o(e,"DIV",{class:!0});var Je=d(W);K=o(Je,"DIV",{});var qe=d(K);ue=o(qe,"H3",{});var Tt=d(ue);he=p(Tt,"Decklist"),Tt.forEach(s),pe=E(qe),ae=o(qe,"TABLE",{class:!0});var Ce=d(ae);X=o(Ce,"TR",{class:!0});var ke=d(X);ye=o(ke,"TH",{});var jt=d(ye);m=p(jt,"name"),jt.forEach(s),I=E(ke),P=o(ke,"TH",{});var yt=d(P);B=p(yt,"coverage"),yt.forEach(s),se=E(ke),re=o(ke,"TH",{});var Pt=d(re);Oe=p(Pt,"learning coverage"),Pt.forEach(s),Le=E(ke),Ue=o(ke,"TH",{});var Nt=d(Ue);ze=p(Nt,"is_built_in"),Nt.forEach(s),ke.forEach(s),Ge=E(Ce);for(let Te=0;Te<R.length;Te+=1)R[Te].l(Ce);Ce.forEach(s),Ke=E(qe),H&&H.l(qe),qe.forEach(s),Se=E(Je),j=o(Je,"DIV",{id:!0});var D=d(j);Re=o(D,"H3",{});var It=d(Re);Qe=p(It,"Deckmerger"),It.forEach(s),We=p(D,`
        selected decks:`),Xe=o(D,"BR",{}),Ye=E(D);for(let Te=0;Te<F.length;Te+=1)F[Te].l(D);Fe=E(D),Pe=o(D,"BUTTON",{});var Mt=d(Pe);Ze=p(Mt,"Reset selection"),Mt.forEach(s),$e=E(D),Ne=o(D,"P",{});var ht=d(Ne);xe=p(ht,`Name of new deck
            `),de=o(ht,"INPUT",{type:!0}),ht.forEach(s),et=E(D),Ie=o(D,"P",{});var pt=d(Ie);tt=p(pt,`min occurences:
            `),ve=o(pt,"INPUT",{type:!0}),pt.forEach(s),lt=E(D),_e=o(D,"P",{});var Ae=d(_e);ge=o(Ae,"LABEL",{title:!0});var dt=d(ge);Y=o(dt,"INPUT",{type:!0,name:!0}),nt=p(dt,`
                Merge`),dt.forEach(s),it=E(Ae),Ee=o(Ae,"LABEL",{title:!0});var vt=d(Ee);Z=o(vt,"INPUT",{type:!0,name:!0}),at=p(vt,`
                Intersect`),vt.forEach(s),st=E(Ae),we=o(Ae,"LABEL",{title:!0});var bt=d(we);$=o(bt,"INPUT",{type:!0,name:!0}),rt=p(bt,`
                BijakMerge`),bt.forEach(s),Ae.forEach(s),ot=E(D),V&&V.l(D),He=E(D),Me=o(D,"BUTTON",{});var Bt=d(Me);ut=p(Bt,"create deck"),Bt.forEach(s),ct=E(D),J&&J.l(D),D.forEach(s),Je.forEach(s),this.h()},h(){k(a,"href","https://jpdb.io/settings"),k(b,"type","password"),k(T,"type","button"),k(U,"type","button"),k(G,"type","number"),k(ee,"type","number"),k(w,"type","checkbox"),k(X,"class","svelte-15q9i7h"),k(ae,"class","svelte-15q9i7h"),k(de,"type","text"),k(ve,"type","number"),k(Y,"type","radio"),k(Y,"name","strat"),Y.__value=l[12].Merge,Y.value=Y.__value,k(ge,"title","Merges decks into new deck, adds up all vocab occurences, then removes all vocab where occurences < min_occurences"),k(Z,"type","radio"),k(Z,"name","strat"),Z.__value=l[12].Intersect,Z.value=Z.__value,k(Ee,"title","Only adds those words into the new deck that appear in all decks. Then removes all where occurences < min_occurences"),k($,"type","radio"),k($,"name","strat"),$.__value=l[12].BijakMerge,$.value=$.__value,k(we,"title","The BijakMerge (named after its inventor) works just like the regular merge, but also needs a minimum number of decks for a word to appear in for it to be included."),k(j,"id","deckmerger_div"),k(W,"class","container svelte-15q9i7h"),ft.p(Y,Z,$)},m(e,c){N(e,i,c),t(i,n),t(i,a),t(a,u),t(i,v),N(e,f,c),N(e,b,c),te(b,l[0]),N(e,A,c),N(e,T,c),t(T,y),N(e,M,c),N(e,O,c),t(O,x),N(e,L,c),N(e,q,c),t(q,z),t(q,le),t(q,ce),N(e,S,c),N(e,U,c),t(U,ne),N(e,oe,c),N(e,G,c),te(G,l[3]),N(e,fe,c),N(e,ee,c),te(ee,l[4]),N(e,Q,c),N(e,w,c),w.checked=l[5],N(e,ie,c),N(e,W,c),t(W,K),t(K,ue),t(ue,he),t(K,pe),t(K,ae),t(ae,X),t(X,ye),t(ye,m),t(X,I),t(X,P),t(P,B),t(X,se),t(X,re),t(re,Oe),t(X,Le),t(X,Ue),t(Ue,ze),t(ae,Ge);for(let _=0;_<R.length;_+=1)R[_]&&R[_].m(ae,null);t(K,Ke),H&&H.m(K,null),t(W,Se),t(W,j),t(j,Re),t(Re,Qe),t(j,We),t(j,Xe),t(j,Ye);for(let _=0;_<F.length;_+=1)F[_]&&F[_].m(j,null);t(j,Fe),t(j,Pe),t(Pe,Ze),t(j,$e),t(j,Ne),t(Ne,xe),t(Ne,de),te(de,l[7]),t(j,et),t(j,Ie),t(Ie,tt),t(Ie,ve),te(ve,l[8]),t(j,lt),t(j,_e),t(_e,ge),t(ge,Y),Y.checked=Y.__value===l[10],t(ge,nt),t(_e,it),t(_e,Ee),t(Ee,Z),Z.checked=Z.__value===l[10],t(Ee,at),t(_e,st),t(_e,we),t(we,$),$.checked=$.__value===l[10],t(we,rt),t(j,ot),V&&V.m(j,null),t(j,He),t(j,Me),t(Me,ut),t(j,ct),J&&J.m(j,null),_t||(gt=[C(b,"input",l[18]),C(T,"click",l[13]),C(U,"click",l[14]),C(G,"input",l[19]),C(ee,"input",l[20]),C(w,"change",l[21]),C(Pe,"click",l[24]),C(de,"input",l[25]),C(ve,"input",l[26]),C(Y,"change",l[27]),C(Z,"change",l[29]),C($,"change",l[30]),C(Me,"click",l[32])],_t=!0)},p(e,c){if(c[0]&1&&b.value!==e[0]&&te(b,e[0]),c[0]&2&&je(le,e[1]),c[0]&8&&me(G.value)!==e[3]&&te(G,e[3]),c[0]&16&&me(ee.value)!==e[4]&&te(ee,e[4]),c[0]&32&&(w.checked=e[5]),c[0]&124){Be=e[2];let _;for(_=0;_<Be.length;_+=1){const be=Ot(e,Be,_);R[_]?R[_].p(be,c):(R[_]=Ut(be),R[_].c(),R[_].m(ae,null))}for(;_<R.length;_+=1)R[_].d(1);R.length=Be.length}if(e[2].length>0?H?H.p(e,c):(H=Rt(e),H.c(),H.m(K,null)):H&&(H.d(1),H=null),c[0]&64){De=e[6];let _;for(_=0;_<De.length;_+=1){const be=At(e,De,_);F[_]?F[_].p(be,c):(F[_]=Ft(be),F[_].c(),F[_].m(j,Fe))}for(;_<F.length;_+=1)F[_].d(1);F.length=De.length}c[0]&128&&de.value!==e[7]&&te(de,e[7]),c[0]&256&&me(ve.value)!==e[8]&&te(ve,e[8]),c[0]&1024&&(Y.checked=Y.__value===e[10]),c[0]&1024&&(Z.checked=Z.__value===e[10]),c[0]&1024&&($.checked=$.__value===e[10]),e[10]==e[12].BijakMerge?V?V.p(e,c):(V=Ht(e),V.c(),V.m(j,He)):V&&(V.d(1),V=null),e[11]!=null?J?J.p(e,c):(J=Vt(e),J.c(),J.m(j,null)):J&&(J.d(1),J=null)},i:mt,o:mt,d(e){e&&s(i),e&&s(f),e&&s(b),e&&s(A),e&&s(T),e&&s(M),e&&s(O),e&&s(L),e&&s(q),e&&s(S),e&&s(U),e&&s(oe),e&&s(G),e&&s(fe),e&&s(ee),e&&s(Q),e&&s(w),e&&s(ie),e&&s(W),Dt(R,e),H&&H.d(),Dt(F,e),V&&V.d(),J&&J.d(),ft.r(),_t=!1,Kt(gt)}}}function kt(l,i){const n=[];for(const a of l)for(const u of a){const v=n.find(f=>f.vid===u.vid&&f.sid===u.sid);v!=null?(v.occurences+=u.occurences,v.decks+=1):n.push({decks:1,...u})}return n.filter(a=>a.decks>=i)}function Qt(l,i,n){var a=(m=>(m[m.Merge=0]="Merge",m[m.Intersect=1]="Intersect",m[m.BijakMerge=2]="BijakMerge",m))(a||{});let u="",v="",f=[],b=80,A=80,T=!1,y=[],M="",O=1,x=1,L=0,q=null;async function z(m,I){let P=new Headers;return P.set("Authorization","Bearer "+u),P.set("Content-Type","application/json"),await fetch("https://jpdb.io/api/v1/"+m,{headers:P,method:"POST",body:JSON.stringify(I)})}async function le(){const I=await(await z("ping",{})).json();n(1,v=JSON.stringify(I))}async function ce(){const I=await(await z("list-user-decks",{fields:["name","vocabulary_known_coverage","vocabulary_in_progress_coverage","is_built_in","id"]})).json();n(2,f=I.decks.map(P=>{let[B,se,re,Oe,Le]=P;return{name:B,id:Le,known_coverage:se,learning_coverage:re,is_built_in:Oe}})),f.sort((P,B)=>P.name.localeCompare(B.name))}async function S(m){const I=await(await z("deck/list-vocabulary",{id:m.id,fetch_occurences:!0})).json();let P=[];for(let B=0;B<I.vocabulary.length;B++){let se={vid:I.vocabulary[B][0],sid:I.vocabulary[B][1],occurences:I.occurences[B]};P.push(se)}return{vocabs:P,...m}}async function U(m,I){let P=[],B=[];I.forEach(re=>{P.push([re.vid,re.sid]),B.push(re.occurences)});const se=await(await z("deck/add-vocabulary",{id:m,vocabulary:P,occurences:B})).json();n(1,v=JSON.stringify(se))}async function ne(m){return(await(await z("deck/create-empty",{name:m})).json()).id}const oe=[[]];function G(){u=this.value,n(0,u)}function fe(){b=me(this.value),n(3,b)}function ee(){A=me(this.value),n(4,A)}function Q(){T=this.checked,n(5,T)}const w=m=>{y.push(m),n(6,y)},ie=async()=>{for(const m of f)m.known_coverage>b&&m.learning_coverage>A&&(m.is_built_in||!T)&&y.push(m);n(6,y)},W=()=>{n(6,y=[])};function K(){M=this.value,n(7,M)}function ue(){O=me(this.value),n(8,O)}function he(){L=this.__value,n(10,L)}function pe(){L=this.__value,n(10,L)}function ae(){L=this.__value,n(10,L)}function X(){x=me(this.value),n(9,x)}return[u,v,f,b,A,T,y,M,O,x,L,q,a,le,ce,S,U,ne,G,fe,ee,Q,w,ie,W,K,ue,he,oe,pe,ae,X,async()=>{if(M!==""){n(11,q=null);const m=await ne(M),I=[];for(const B of y){const se=await S(B);I.push(se.vocabs)}let P;switch(L){case a.Merge:P=kt(I,1);break;case a.Intersect:P=kt(I,I.length);break;case a.BijakMerge:P=kt(I,x);break}P=P.filter(B=>B.occurences>=O),await U(m,P),n(11,q={id:m,name:M})}}]}class Xt extends Jt{constructor(i){super(),Ct(this,i,Qt,St,zt,{},null,[-1,-1])}}export{Xt as component};
