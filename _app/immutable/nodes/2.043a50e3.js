import{S as Nl,i as Il,s as Ml,J as Bl,k as u,q as d,a as E,l as c,m,r as v,h as i,c as y,n as g,K as xe,b as P,G as t,L as X,M as L,u as Pe,N as _e,H as kt,O as sl,P as jl,Q as Dl,R as pl,T as Ll}from"../chunks/index.d827bab5.js";function dl(l,n,s){const a=l.slice();return a[52]=n[s],a}function vl(l,n,s){const a=l.slice();return a[55]=n[s],a}function ml(l,n,s){const a=l.slice();return a[55]=n[s],a}function kl(l){let n,s,a,f=l[55].name+"",r,o,p,k,I,b,M,F=l[55].known_coverage.toFixed(1)+"",O,Z,q,x=l[55].learning_coverage.toFixed(1)+"",R,ee,Y,te=l[55].is_built_in+"",H,ae,re,he;function oe(){return l[35](l[55])}return{c(){n=u("tr"),s=u("td"),a=u("a"),r=d(f),o=E(),p=u("a"),k=d("[jpdb]"),b=E(),M=u("td"),O=d(F),Z=E(),q=u("td"),R=d(x),ee=E(),Y=u("td"),H=d(te),ae=E(),this.h()},l(C){n=c(C,"TR",{class:!0});var U=m(n);s=c(U,"TD",{class:!0});var ce=m(s);a=c(ce,"A",{href:!0});var S=m(a);r=v(S,f),S.forEach(i),o=y(ce),p=c(ce,"A",{href:!0});var me=m(p);k=v(me,"[jpdb]"),me.forEach(i),ce.forEach(i),b=y(U),M=c(U,"TD",{class:!0});var $=m(M);O=v($,F),$.forEach(i),Z=y(U),q=c(U,"TD",{class:!0});var be=m(q);R=v(be,x),be.forEach(i),ee=y(U),Y=c(U,"TD",{class:!0});var ue=m(Y);H=v(ue,te),ue.forEach(i),ae=y(U),U.forEach(i),this.h()},h(){g(a,"href","#"),g(p,"href",I="https://jpdb.io/deck?id="+l[55].id),g(s,"class","svelte-1sg2hnm"),g(M,"class","svelte-1sg2hnm"),g(q,"class","svelte-1sg2hnm"),g(Y,"class","svelte-1sg2hnm"),g(n,"class","svelte-1sg2hnm")},m(C,U){P(C,n,U),t(n,s),t(s,a),t(a,r),t(s,o),t(s,p),t(p,k),t(n,b),t(n,M),t(M,O),t(n,Z),t(n,q),t(q,R),t(n,ee),t(n,Y),t(Y,H),t(n,ae),re||(he=L(a,"click",oe),re=!0)},p(C,U){l=C,U[0]&262144&&f!==(f=l[55].name+"")&&Pe(r,f),U[0]&262144&&I!==(I="https://jpdb.io/deck?id="+l[55].id)&&g(p,"href",I),U[0]&262144&&F!==(F=l[55].known_coverage.toFixed(1)+"")&&Pe(O,F),U[0]&262144&&x!==(x=l[55].learning_coverage.toFixed(1)+"")&&Pe(R,x),U[0]&262144&&te!==(te=l[55].is_built_in+"")&&Pe(H,te)},d(C){C&&i(n),re=!1,he()}}}function bl(l){let n,s,a,f;return{c(){n=u("button"),s=d("add all")},l(r){n=c(r,"BUTTON",{});var o=m(n);s=v(o,"add all"),o.forEach(i)},m(r,o){P(r,n,o),t(n,s),a||(f=L(n,"click",l[36]),a=!0)},p:kt,d(r){r&&i(n),a=!1,f()}}}function gl(l){let n,s=l[55].name+"",a;return{c(){n=u("p"),a=d(s)},l(f){n=c(f,"P",{});var r=m(n);a=v(r,s),r.forEach(i)},m(f,r){P(f,n,r),t(n,a)},p(f,r){r[0]&128&&s!==(s=f[55].name+"")&&Pe(a,s)},d(f){f&&i(n)}}}function wl(l){let n,s,a,f,r;return{c(){n=u("p"),s=d(`min decks:
                `),a=u("input"),this.h()},l(o){n=c(o,"P",{});var p=m(n);s=v(p,`min decks:
                `),a=c(p,"INPUT",{type:!0}),p.forEach(i),this.h()},h(){g(a,"type","number")},m(o,p){P(o,n,p),t(n,s),t(n,a),X(a,l[10]),f||(r=L(a,"input",l[44]),f=!0)},p(o,p){p[0]&1024&&_e(a.value)!==o[10]&&X(a,o[10])},d(o){o&&i(n),f=!1,r()}}}function El(l){let n,s,a,f=l[21],r=[];for(let o=0;o<f.length;o+=1)r[o]=yl(dl(l,f,o));return{c(){n=u("select");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){n=c(o,"SELECT",{});var p=m(n);for(let k=0;k<r.length;k+=1)r[k].l(p);p.forEach(i),this.h()},h(){l[14]===void 0&&Dl(()=>l[46].call(n))},m(o,p){P(o,n,p);for(let k=0;k<r.length;k+=1)r[k]&&r[k].m(n,null);pl(n,l[14],!0),s||(a=L(n,"change",l[46]),s=!0)},p(o,p){if(p[0]&2097152){f=o[21];let k;for(k=0;k<f.length;k+=1){const I=dl(o,f,k);r[k]?r[k].p(I,p):(r[k]=yl(I),r[k].c(),r[k].m(n,null))}for(;k<r.length;k+=1)r[k].d(1);r.length=f.length}p[0]&2113536&&pl(n,o[14])},d(o){o&&i(n),sl(r,o),s=!1,a()}}}function yl(l){let n,s=l[52]+"",a,f;return{c(){n=u("option"),a=d(s),f=E(),this.h()},l(r){n=c(r,"OPTION",{});var o=m(n);a=v(o,s),f=y(o),o.forEach(i),this.h()},h(){n.__value=l[52],n.value=n.__value},m(r,o){P(r,n,o),t(n,a),t(n,f)},p:kt,d(r){r&&i(n)}}}function Tl(l){let n,s,a,f,r,o,p,k,I;return{c(){n=u("p"),s=d("min: "),a=u("input"),f=E(),r=u("p"),o=d("max: "),p=u("input"),this.h()},l(b){n=c(b,"P",{});var M=m(n);s=v(M,"min: "),a=c(M,"INPUT",{type:!0}),M.forEach(i),f=y(b),r=c(b,"P",{});var F=m(r);o=v(F,"max: "),p=c(F,"INPUT",{type:!0}),F.forEach(i),this.h()},h(){g(a,"type","number"),g(p,"type","number")},m(b,M){P(b,n,M),t(n,s),t(n,a),X(a,l[16]),P(b,f,M),P(b,r,M),t(r,o),t(r,p),X(p,l[17]),k||(I=[L(a,"input",l[48]),L(p,"input",l[49])],k=!0)},p(b,M){M[0]&65536&&_e(a.value)!==b[16]&&X(a,b[16]),M[0]&131072&&_e(p.value)!==b[17]&&X(p,b[17])},d(b){b&&i(n),b&&i(f),b&&i(r),k=!1,jl(I)}}}function Pl(l){let n,s,a=l[12].name+"",f,r,o,p,k;return{c(){n=u("p"),s=d(`Last created:
                `),f=d(a),r=E(),o=u("a"),p=d("[jpdb]"),this.h()},l(I){n=c(I,"P",{});var b=m(n);s=v(b,`Last created:
                `),f=v(b,a),r=y(b),o=c(b,"A",{href:!0});var M=m(o);p=v(M,"[jpdb]"),M.forEach(i),b.forEach(i),this.h()},h(){g(o,"href",k="https://jpdb.io/deck?id="+l[12].id)},m(I,b){P(I,n,b),t(n,s),t(n,f),t(n,r),t(n,o),t(o,p)},p(I,b){b[0]&4096&&a!==(a=I[12].name+"")&&Pe(f,a),b[0]&4096&&k!==(k="https://jpdb.io/deck?id="+I[12].id)&&g(o,"href",k)},d(I){I&&i(n)}}}function Ul(l){let n,s,a,f,r,o,p,k,I,b,M,F,O,Z,q,x,R,ee,Y,te,H,ae,re,he,oe,C,U,ce,S,me,$,be,ue,Ve,pe,fe,de,et,Ue=l[18].length+"",Je,tt,Ae=l[0].length+"",Ye,lt,nt,ve,le,ge,je,ze,st,it,we,Ne,h,T,B,j,A,ke,at,rt,ot,bt,gt,wt,Et,N,ut,yt,Tt,Pt,jt,_t,Ge,Nt,It,Ke,Mt,Ie,Bt,Qe,Dt,Me,Lt,Ee,Oe,ne,Ut,At,qe,se,Ot,qt,Fe,ie,Ft,Rt,ht,ye,Ht,Re,Ct,Vt,Te,Jt,He,Yt,zt,Be,Gt,pt,Kt,Qt,Wt,il,We=l[18],V=[];for(let e=0;e<We.length;e+=1)V[e]=kl(ml(l,We,e));let z=l[0].length>0&&bl(l),Xe=l[7],J=[];for(let e=0;e<Xe.length;e+=1)J[e]=gl(vl(l,Xe,e));let G=l[11]==l[19].BijakMerge&&wl(l),K=l[13]&&El(l),Q=l[15]&&Tl(l),W=l[12]!=null&&Pl(l);return Qt=Bl(l[41][0]),{c(){n=u("p"),s=d("Put your API Token here (from the bottom of "),a=u("a"),f=d("jpdb.io/settings"),r=d("), it won't get sent anywhere except jpdb.io. Don't share it with anyone!"),o=E(),p=u("p"),k=d("After you have done this press fetch user decks."),I=E(),b=u("p"),M=d(`You can enter the token in your browsers password manager if you don't want
    to input it every time you use this site.`),F=E(),O=u("input"),Z=E(),q=u("button"),x=d("Ping"),R=E(),ee=u("p"),Y=d("Result:"),te=E(),H=u("pre"),ae=d("    "),re=d(l[6]),he=d(`
`),oe=E(),C=u("button"),U=d("Fetch user decks"),ce=d(`
Min coverage:
`),S=u("input"),me=d(`
Min learning coverage:
`),$=u("input"),be=d(`
Filter builtin:
`),ue=u("input"),Ve=E(),pe=u("div"),fe=u("div"),de=u("h3"),et=d("Decklist (showing "),Je=d(Ue),tt=d(" of "),Ye=d(Ae),lt=d(")"),nt=E(),ve=u("table"),le=u("tr"),ge=u("th"),je=u("i"),st=d(`
                    name`),it=E(),we=u("th"),Ne=u("i"),T=d(`
                    coverage`),B=E(),j=u("th"),A=u("i"),at=d(`
                    learning coverage`),rt=E(),ot=u("th"),bt=d("is_built_in"),gt=E();for(let e=0;e<V.length;e+=1)V[e].c();wt=E(),z&&z.c(),Et=E(),N=u("div"),ut=u("h3"),yt=d("Deckmerger"),Tt=d(`
        selected decks:`),Pt=u("br"),jt=E();for(let e=0;e<J.length;e+=1)J[e].c();_t=E(),Ge=u("button"),Nt=d("Reset selection"),It=E(),Ke=u("p"),Mt=d(`Name of new deck
            `),Ie=u("input"),Bt=E(),Qe=u("p"),Dt=d(`min occurences:
            `),Me=u("input"),Lt=E(),Ee=u("p"),Oe=u("label"),ne=u("input"),Ut=d(`
                Merge`),At=E(),qe=u("label"),se=u("input"),Ot=d(`
                Intersect`),qt=E(),Fe=u("label"),ie=u("input"),Ft=d(`
                BijakMerge`),Rt=E(),G&&G.c(),ht=E(),ye=u("p"),Ht=d(`Filter for card state?
            `),Re=u("input"),Ct=E(),K&&K.c(),Vt=E(),Te=u("p"),Jt=d(`Filter by global frequency?
            `),He=u("input"),Yt=E(),Q&&Q.c(),zt=E(),Be=u("button"),Gt=d("create deck"),Kt=E(),W&&W.c(),this.h()},l(e){n=c(e,"P",{});var _=m(n);s=v(_,"Put your API Token here (from the bottom of "),a=c(_,"A",{href:!0});var w=m(a);f=v(w,"jpdb.io/settings"),w.forEach(i),r=v(_,"), it won't get sent anywhere except jpdb.io. Don't share it with anyone!"),_.forEach(i),o=y(e),p=c(e,"P",{});var De=m(p);k=v(De,"After you have done this press fetch user decks."),De.forEach(i),I=y(e),b=c(e,"P",{});var al=m(b);M=v(al,`You can enter the token in your browsers password manager if you don't want
    to input it every time you use this site.`),al.forEach(i),F=y(e),O=c(e,"INPUT",{type:!0}),Z=y(e),q=c(e,"BUTTON",{type:!0});var rl=m(q);x=v(rl,"Ping"),rl.forEach(i),R=y(e),ee=c(e,"P",{});var ol=m(ee);Y=v(ol,"Result:"),ol.forEach(i),te=y(e),H=c(e,"PRE",{});var dt=m(H);ae=v(dt,"    "),re=v(dt,l[6]),he=v(dt,`
`),dt.forEach(i),oe=y(e),C=c(e,"BUTTON",{type:!0});var ul=m(C);U=v(ul,"Fetch user decks"),ul.forEach(i),ce=v(e,`
Min coverage:
`),S=c(e,"INPUT",{type:!0}),me=v(e,`
Min learning coverage:
`),$=c(e,"INPUT",{type:!0}),be=v(e,`
Filter builtin:
`),ue=c(e,"INPUT",{type:!0}),Ve=y(e),pe=c(e,"DIV",{class:!0});var vt=m(pe);fe=c(vt,"DIV",{});var Ze=m(fe);de=c(Ze,"H3",{});var Se=m(de);et=v(Se,"Decklist (showing "),Je=v(Se,Ue),tt=v(Se," of "),Ye=v(Se,Ae),lt=v(Se,")"),Se.forEach(i),nt=y(Ze),ve=c(Ze,"TABLE",{class:!0});var mt=m(ve);le=c(mt,"TR",{class:!0});var Le=m(le);ge=c(Le,"TH",{});var Xt=m(ge);je=c(Xt,"I",{class:!0}),m(je).forEach(i),st=v(Xt,`
                    name`),Xt.forEach(i),it=y(Le),we=c(Le,"TH",{});var Zt=m(we);Ne=c(Zt,"I",{class:!0}),m(Ne).forEach(i),T=v(Zt,`
                    coverage`),Zt.forEach(i),B=y(Le),j=c(Le,"TH",{});var St=m(j);A=c(St,"I",{class:!0}),m(A).forEach(i),at=v(St,`
                    learning coverage`),St.forEach(i),rt=y(Le),ot=c(Le,"TH",{});var cl=m(ot);bt=v(cl,"is_built_in"),cl.forEach(i),Le.forEach(i),gt=y(mt);for(let Ce=0;Ce<V.length;Ce+=1)V[Ce].l(mt);mt.forEach(i),wt=y(Ze),z&&z.l(Ze),Ze.forEach(i),Et=y(vt),N=c(vt,"DIV",{id:!0});var D=m(N);ut=c(D,"H3",{});var fl=m(ut);yt=v(fl,"Deckmerger"),fl.forEach(i),Tt=v(D,`
        selected decks:`),Pt=c(D,"BR",{}),jt=y(D);for(let Ce=0;Ce<J.length;Ce+=1)J[Ce].l(D);_t=y(D),Ge=c(D,"BUTTON",{});var _l=m(Ge);Nt=v(_l,"Reset selection"),_l.forEach(i),It=y(D),Ke=c(D,"P",{});var $t=m(Ke);Mt=v($t,`Name of new deck
            `),Ie=c($t,"INPUT",{type:!0}),$t.forEach(i),Bt=y(D),Qe=c(D,"P",{});var xt=m(Qe);Dt=v(xt,`min occurences:
            `),Me=c(xt,"INPUT",{type:!0}),xt.forEach(i),Lt=y(D),Ee=c(D,"P",{});var $e=m(Ee);Oe=c($e,"LABEL",{title:!0});var el=m(Oe);ne=c(el,"INPUT",{type:!0,name:!0}),Ut=v(el,`
                Merge`),el.forEach(i),At=y($e),qe=c($e,"LABEL",{title:!0});var tl=m(qe);se=c(tl,"INPUT",{type:!0,name:!0}),Ot=v(tl,`
                Intersect`),tl.forEach(i),qt=y($e),Fe=c($e,"LABEL",{title:!0});var ll=m(Fe);ie=c(ll,"INPUT",{type:!0,name:!0}),Ft=v(ll,`
                BijakMerge`),ll.forEach(i),$e.forEach(i),Rt=y(D),G&&G.l(D),ht=y(D),ye=c(D,"P",{});var ct=m(ye);Ht=v(ct,`Filter for card state?
            `),Re=c(ct,"INPUT",{type:!0}),Ct=y(ct),K&&K.l(ct),ct.forEach(i),Vt=y(D),Te=c(D,"P",{});var ft=m(Te);Jt=v(ft,`Filter by global frequency?
            `),He=c(ft,"INPUT",{type:!0}),Yt=y(ft),Q&&Q.l(ft),ft.forEach(i),zt=y(D),Be=c(D,"BUTTON",{});var hl=m(Be);Gt=v(hl,"create deck"),hl.forEach(i),Kt=y(D),W&&W.l(D),D.forEach(i),vt.forEach(i),this.h()},h(){g(a,"href","https://jpdb.io/settings"),g(O,"type","password"),g(q,"type","button"),g(C,"type","button"),g(S,"type","number"),g($,"type","number"),g(ue,"type","checkbox"),g(je,"class",ze=xe(l[1]==l[20].Name?"sorting_asc":"sorting")+" svelte-1sg2hnm"),g(Ne,"class",h=xe(l[1]==l[20].Coverage?"sorting_desc":"sorting")+" svelte-1sg2hnm"),g(A,"class",ke=xe(l[1]==l[20].Learning?"sorting_desc":"sorting")+" svelte-1sg2hnm"),g(le,"class","svelte-1sg2hnm"),g(ve,"class","svelte-1sg2hnm"),g(Ie,"type","text"),g(Me,"type","number"),g(ne,"type","radio"),g(ne,"name","strat"),ne.__value=l[19].Merge,ne.value=ne.__value,g(Oe,"title","Merges decks into new deck, adds up all vocab occurences, then removes all vocab where occurences < min_occurences"),g(se,"type","radio"),g(se,"name","strat"),se.__value=l[19].Intersect,se.value=se.__value,g(qe,"title","Only adds those words into the new deck that appear in all decks. Then removes all where occurences < min_occurences"),g(ie,"type","radio"),g(ie,"name","strat"),ie.__value=l[19].BijakMerge,ie.value=ie.__value,g(Fe,"title","The BijakMerge (named after its inventor) works just like the regular merge, but also needs a minimum number of decks for a word to appear in for it to be included."),g(Re,"type","checkbox"),g(He,"type","checkbox"),Be.disabled=pt=l[7].length<=0,g(N,"id","deckmerger_div"),g(pe,"class","container svelte-1sg2hnm"),Qt.p(ne,se,ie)},m(e,_){P(e,n,_),t(n,s),t(n,a),t(a,f),t(n,r),P(e,o,_),P(e,p,_),t(p,k),P(e,I,_),P(e,b,_),t(b,M),P(e,F,_),P(e,O,_),X(O,l[5]),P(e,Z,_),P(e,q,_),t(q,x),P(e,R,_),P(e,ee,_),t(ee,Y),P(e,te,_),P(e,H,_),t(H,ae),t(H,re),t(H,he),P(e,oe,_),P(e,C,_),t(C,U),P(e,ce,_),P(e,S,_),X(S,l[2]),P(e,me,_),P(e,$,_),X($,l[3]),P(e,be,_),P(e,ue,_),ue.checked=l[4],P(e,Ve,_),P(e,pe,_),t(pe,fe),t(fe,de),t(de,et),t(de,Je),t(de,tt),t(de,Ye),t(de,lt),t(fe,nt),t(fe,ve),t(ve,le),t(le,ge),t(ge,je),t(ge,st),t(le,it),t(le,we),t(we,Ne),t(we,T),t(le,B),t(le,j),t(j,A),t(j,at),t(le,rt),t(le,ot),t(ot,bt),t(ve,gt);for(let w=0;w<V.length;w+=1)V[w]&&V[w].m(ve,null);t(fe,wt),z&&z.m(fe,null),t(pe,Et),t(pe,N),t(N,ut),t(ut,yt),t(N,Tt),t(N,Pt),t(N,jt);for(let w=0;w<J.length;w+=1)J[w]&&J[w].m(N,null);t(N,_t),t(N,Ge),t(Ge,Nt),t(N,It),t(N,Ke),t(Ke,Mt),t(Ke,Ie),X(Ie,l[8]),t(N,Bt),t(N,Qe),t(Qe,Dt),t(Qe,Me),X(Me,l[9]),t(N,Lt),t(N,Ee),t(Ee,Oe),t(Oe,ne),ne.checked=ne.__value===l[11],t(Oe,Ut),t(Ee,At),t(Ee,qe),t(qe,se),se.checked=se.__value===l[11],t(qe,Ot),t(Ee,qt),t(Ee,Fe),t(Fe,ie),ie.checked=ie.__value===l[11],t(Fe,Ft),t(N,Rt),G&&G.m(N,null),t(N,ht),t(N,ye),t(ye,Ht),t(ye,Re),Re.checked=l[13],t(ye,Ct),K&&K.m(ye,null),t(N,Vt),t(N,Te),t(Te,Jt),t(Te,He),He.checked=l[15],t(Te,Yt),Q&&Q.m(Te,null),t(N,zt),t(N,Be),t(Be,Gt),t(N,Kt),W&&W.m(N,null),Wt||(il=[L(O,"input",l[28]),L(q,"click",l[22]),L(C,"click",l[23]),L(S,"input",l[29]),L($,"input",l[30]),L(ue,"change",l[31]),L(ge,"click",l[32]),L(we,"click",l[33]),L(j,"click",l[34]),L(Ge,"click",l[37]),L(Ie,"input",l[38]),L(Me,"input",l[39]),L(ne,"change",l[40]),L(se,"change",l[42]),L(ie,"change",l[43]),L(Re,"change",l[45]),L(He,"change",l[47]),L(Be,"click",l[50])],Wt=!0)},p(e,_){if(_[0]&32&&O.value!==e[5]&&X(O,e[5]),_[0]&64&&Pe(re,e[6]),_[0]&4&&_e(S.value)!==e[2]&&X(S,e[2]),_[0]&8&&_e($.value)!==e[3]&&X($,e[3]),_[0]&16&&(ue.checked=e[4]),_[0]&262144&&Ue!==(Ue=e[18].length+"")&&Pe(Je,Ue),_[0]&1&&Ae!==(Ae=e[0].length+"")&&Pe(Ye,Ae),_[0]&2&&ze!==(ze=xe(e[1]==e[20].Name?"sorting_asc":"sorting")+" svelte-1sg2hnm")&&g(je,"class",ze),_[0]&2&&h!==(h=xe(e[1]==e[20].Coverage?"sorting_desc":"sorting")+" svelte-1sg2hnm")&&g(Ne,"class",h),_[0]&2&&ke!==(ke=xe(e[1]==e[20].Learning?"sorting_desc":"sorting")+" svelte-1sg2hnm")&&g(A,"class",ke),_[0]&262272){We=e[18];let w;for(w=0;w<We.length;w+=1){const De=ml(e,We,w);V[w]?V[w].p(De,_):(V[w]=kl(De),V[w].c(),V[w].m(ve,null))}for(;w<V.length;w+=1)V[w].d(1);V.length=We.length}if(e[0].length>0?z?z.p(e,_):(z=bl(e),z.c(),z.m(fe,null)):z&&(z.d(1),z=null),_[0]&128){Xe=e[7];let w;for(w=0;w<Xe.length;w+=1){const De=vl(e,Xe,w);J[w]?J[w].p(De,_):(J[w]=gl(De),J[w].c(),J[w].m(N,_t))}for(;w<J.length;w+=1)J[w].d(1);J.length=Xe.length}_[0]&256&&Ie.value!==e[8]&&X(Ie,e[8]),_[0]&512&&_e(Me.value)!==e[9]&&X(Me,e[9]),_[0]&2048&&(ne.checked=ne.__value===e[11]),_[0]&2048&&(se.checked=se.__value===e[11]),_[0]&2048&&(ie.checked=ie.__value===e[11]),e[11]==e[19].BijakMerge?G?G.p(e,_):(G=wl(e),G.c(),G.m(N,ht)):G&&(G.d(1),G=null),_[0]&8192&&(Re.checked=e[13]),e[13]?K?K.p(e,_):(K=El(e),K.c(),K.m(ye,null)):K&&(K.d(1),K=null),_[0]&32768&&(He.checked=e[15]),e[15]?Q?Q.p(e,_):(Q=Tl(e),Q.c(),Q.m(Te,null)):Q&&(Q.d(1),Q=null),_[0]&128&&pt!==(pt=e[7].length<=0)&&(Be.disabled=pt),e[12]!=null?W?W.p(e,_):(W=Pl(e),W.c(),W.m(N,null)):W&&(W.d(1),W=null)},i:kt,o:kt,d(e){e&&i(n),e&&i(o),e&&i(p),e&&i(I),e&&i(b),e&&i(F),e&&i(O),e&&i(Z),e&&i(q),e&&i(R),e&&i(ee),e&&i(te),e&&i(H),e&&i(oe),e&&i(C),e&&i(ce),e&&i(S),e&&i(me),e&&i($),e&&i(be),e&&i(ue),e&&i(Ve),e&&i(pe),sl(V,e),z&&z.d(),sl(J,e),G&&G.d(),K&&K.d(),Q&&Q.d(),W&&W.d(),Qt.r(),Wt=!1,jl(il)}}}function nl(l,n){const s=[];for(const a of l)for(const f of a){const r=s.find(o=>o.vid===f.vid&&o.sid===f.sid);r!=null?(r.occurences+=f.occurences,r.decks+=1):s.push({decks:1,...f})}return s.filter(a=>a.decks>=n)}function Al(l,n,s){let a;var f=(h=>(h[h.Merge=0]="Merge",h[h.Intersect=1]="Intersect",h[h.BijakMerge=2]="BijakMerge",h))(f||{}),r=(h=>(h[h.Name=0]="Name",h[h.Coverage=1]="Coverage",h[h.Learning=2]="Learning",h))(r||{});let o="",p="",k=[],I=0,b=0,M=0,F=!1,O=[],Z="",q=1,x=1,R=0,ee=null,Y=!1,te=["new","locked","learning","known","due","failed","never-forget","suspended","blacklisted"],H=te[0],ae=!1,re=1,he=3e4;async function oe(h,T){let B=new Headers;return B.set("Authorization","Bearer "+o),B.set("Content-Type","application/json"),await fetch("https://jpdb.io/api/v1/"+h,{headers:B,method:"POST",body:JSON.stringify(T)})}async function C(){const T=await(await oe("ping",{})).json();s(6,p=JSON.stringify(T)),p=="{}"&&s(6,p="Token confirmed as correct.")}async function U(){const T=await(await oe("list-user-decks",{fields:["name","vocabulary_known_coverage","vocabulary_in_progress_coverage","is_built_in","id"]})).json();s(0,k=T.decks.map(B=>{let[j,A,ke,at,rt]=B;return{name:j,id:rt,known_coverage:A??0,learning_coverage:ke??0,is_built_in:at}})),k.sort((B,j)=>B.name.localeCompare(j.name))}async function ce(h){const T=await(await oe("deck/list-vocabulary",{id:h.id,fetch_occurences:!0})).json();let B=[];for(let j=0;j<T.vocabulary.length;j++){let A={vid:T.vocabulary[j][0],sid:T.vocabulary[j][1],occurences:T.occurences[j]};B.push(A)}return{vocabs:B,...h}}async function S(h){const T=h.map(A=>[A.vid,A.sid]),B=await(await oe("lookup-vocabulary",{list:T,fields:["card_state","frequency_rank"]})).json();let j=[];for(let A=0;A<B.vocabulary_info.length;A++)j.push({state:B.vocabulary_info[A][0],frequency:B.vocabulary_info[A][1],...h[A]});return j}async function me(h,T){let B=[],j=[];T.forEach(ke=>{B.push([ke.vid,ke.sid]),j.push(ke.occurences)});const A=await(await oe("deck/add-vocabulary",{id:h,vocabulary:B,occurences:j})).json();s(6,p=JSON.stringify(A))}async function $(h){return(await(await oe("deck/create-empty",{name:h})).json()).id}const be=[[]];function ue(){o=this.value,s(5,o)}function Ve(){b=_e(this.value),s(2,b)}function pe(){M=_e(this.value),s(3,M)}function fe(){F=this.checked,s(4,F)}const de=h=>s(1,I=r.Name),et=h=>s(1,I=r.Coverage),Ue=h=>s(1,I=r.Learning),Je=h=>{O.push(h),s(7,O)},tt=async()=>{s(7,O=O.concat(a))},Ae=()=>{s(7,O=[])};function Ye(){Z=this.value,s(8,Z)}function lt(){q=_e(this.value),s(9,q)}function nt(){R=this.__value,s(11,R)}function ve(){R=this.__value,s(11,R)}function le(){R=this.__value,s(11,R)}function ge(){x=_e(this.value),s(10,x)}function je(){Y=this.checked,s(13,Y)}function ze(){H=Ll(this),s(14,H),s(21,te)}function st(){ae=this.checked,s(15,ae)}function it(){re=_e(this.value),s(16,re)}function we(){he=_e(this.value),s(17,he)}const Ne=async()=>{if(Z!==""){s(12,ee=null);const h=[];for(const j of O){const A=await ce(j);h.push(A.vocabs)}let T;switch(R){case f.Merge:T=nl(h,1);break;case f.Intersect:T=nl(h,h.length);break;case f.BijakMerge:T=nl(h,x);break}T=T.filter(j=>j.occurences>=q),(Y||ae)&&(T=await S(T),Y&&(T=T.filter(j=>j.state[0]===H)),ae&&(T=T.filter(j=>re<=j.frequency&&j.frequency<=he)));const B=await $(Z);await me(B,T),s(12,ee={id:B,name:Z})}};return l.$$.update=()=>{l.$$.dirty[0]&31&&s(18,a=k.filter(h=>h.known_coverage>=b&&h.learning_coverage>=M&&(h.is_built_in||!F)).sort((h,T)=>{switch(I){case 0:return h.name.localeCompare(T.name);case 1:return T.known_coverage-h.known_coverage;case 2:return T.learning_coverage-h.learning_coverage}}))},[k,I,b,M,F,o,p,O,Z,q,x,R,ee,Y,H,ae,re,he,a,f,r,te,C,U,ce,S,me,$,ue,Ve,pe,fe,de,et,Ue,Je,tt,Ae,Ye,lt,nt,be,ve,le,ge,je,ze,st,it,we,Ne]}class ql extends Nl{constructor(n){super(),Il(this,n,Al,Ul,Ml,{},null,[-1,-1])}}export{ql as component};
