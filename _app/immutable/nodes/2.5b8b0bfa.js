import{S as it,i as st,s as at,k as f,q as d,a as y,l as _,m as p,r as v,h as i,c as w,n as E,b as k,G as t,J as le,K as Y,u as ce,L as me,H as Ye,M as Ze,N as ot,e as $e}from"../chunks/index.d70738cb.js";function xe(l,a,n){const s=l.slice();return s[22]=a[n],s}function et(l,a,n){const s=l.slice();return s[22]=a[n],s}function tt(l){let a,n,s,h=l[22].name+"",g,T,U,J,F,B,P,R=l[22].known_coverage.toFixed(1)+"",W,K,S,M=l[22].learning_coverage.toFixed(1)+"",H,Z,V,j=l[22].is_built_in+"",Q,O,X,C;function m(){return l[17](l[22])}return{c(){a=f("tr"),n=f("td"),s=f("a"),g=d(h),T=y(),U=f("a"),J=d("[jpdb]"),B=y(),P=f("td"),W=d(R),K=y(),S=f("td"),H=d(M),Z=y(),V=f("td"),Q=d(j),O=y(),this.h()},l(c){a=_(c,"TR",{class:!0});var o=p(a);n=_(o,"TD",{class:!0});var b=p(n);s=_(b,"A",{href:!0});var L=p(s);g=v(L,h),L.forEach(i),T=w(b),U=_(b,"A",{href:!0});var z=p(U);J=v(z,"[jpdb]"),z.forEach(i),b.forEach(i),B=w(o),P=_(o,"TD",{class:!0});var A=p(P);W=v(A,R),A.forEach(i),K=w(o),S=_(o,"TD",{class:!0});var D=p(S);H=v(D,M),D.forEach(i),Z=w(o),V=_(o,"TD",{class:!0});var $=p(V);Q=v($,j),$.forEach(i),O=w(o),o.forEach(i),this.h()},h(){E(s,"href","#"),E(U,"href",F="https://jpdb.io/deck?id="+l[22].id),E(n,"class","svelte-15q9i7h"),E(P,"class","svelte-15q9i7h"),E(S,"class","svelte-15q9i7h"),E(V,"class","svelte-15q9i7h"),E(a,"class","svelte-15q9i7h")},m(c,o){k(c,a,o),t(a,n),t(n,s),t(s,g),t(n,T),t(n,U),t(U,J),t(a,B),t(a,P),t(P,W),t(a,K),t(a,S),t(S,H),t(a,Z),t(a,V),t(V,Q),t(a,O),X||(C=Y(s,"click",m),X=!0)},p(c,o){l=c,o&4&&h!==(h=l[22].name+"")&&ce(g,h),o&4&&F!==(F="https://jpdb.io/deck?id="+l[22].id)&&E(U,"href",F),o&4&&R!==(R=l[22].known_coverage.toFixed(1)+"")&&ce(W,R),o&4&&M!==(M=l[22].learning_coverage.toFixed(1)+"")&&ce(H,M),o&4&&j!==(j=l[22].is_built_in+"")&&ce(Q,j)},d(c){c&&i(a),X=!1,C()}}}function lt(l){let a,n=l[22].known_coverage>l[4]&&l[22].learning_coverage>l[5]&&(l[22].is_built_in||!l[6])&&tt(l);return{c(){n&&n.c(),a=$e()},l(s){n&&n.l(s),a=$e()},m(s,h){n&&n.m(s,h),k(s,a,h)},p(s,h){s[22].known_coverage>s[4]&&s[22].learning_coverage>s[5]&&(s[22].is_built_in||!s[6])?n?n.p(s,h):(n=tt(s),n.c(),n.m(a.parentNode,a)):n&&(n.d(1),n=null)},d(s){n&&n.d(s),s&&i(a)}}}function nt(l){let a,n=l[22].name+"",s;return{c(){a=f("p"),s=d(n)},l(h){a=_(h,"P",{});var g=p(a);s=v(g,n),g.forEach(i)},m(h,g){k(h,a,g),t(a,s)},p(h,g){g&8&&n!==(n=h[22].name+"")&&ce(s,n)},d(h){h&&i(a)}}}function rt(l){let a,n,s,h,g,T,U,J,F,B,P,R,W,K,S,M,H,Z,V,j,Q,O,X,C,m,c,o,b,L,z,A,D,$,ye,we,ue,ge,Ee,fe,Te,Pe,_e,je,De,Ne,N,he,qe,Ie,Re,Ue,pe,ie,Fe,He,se,Oe,x,Ae,ae,Be,Se,Ve,oe=l[2],q=[];for(let e=0;e<oe.length;e+=1)q[e]=lt(et(l,oe,e));let re=l[3],I=[];for(let e=0;e<re.length;e+=1)I[e]=nt(xe(l,re,e));return{c(){a=f("p"),n=d(`Put your API Token here (it won't get send anywhere except jpdb.io). Don't
    share it with anyone!`),s=y(),h=f("input"),g=y(),T=f("button"),U=d("Ping"),J=y(),F=f("p"),B=d("Result:"),P=y(),R=f("pre"),W=d("    "),K=d(l[1]),S=d(`
`),M=y(),H=f("button"),Z=d("Fetch user decks"),V=d(`
Min coverage:
`),j=f("input"),Q=d(`
Min learning coverage:
`),O=f("input"),X=d(`
Filter builtin:
`),C=f("input"),m=y(),c=f("div"),o=f("div"),b=f("h3"),L=d("Decklist"),z=y(),A=f("table"),D=f("tr"),$=f("th"),ye=d("name"),we=y(),ue=f("th"),ge=d("coverage"),Ee=y(),fe=f("th"),Te=d("learning coverage"),Pe=y(),_e=f("th"),je=d("is_built_in"),De=y();for(let e=0;e<q.length;e+=1)q[e].c();Ne=y(),N=f("div"),he=f("h3"),qe=d("Deckmerger"),Ie=d(`
        selected decks:`),Re=f("br"),Ue=y();for(let e=0;e<I.length;e+=1)I[e].c();pe=y(),ie=f("button"),Fe=d("Reset selection"),He=y(),se=f("p"),Oe=d(`Name of new deck
            `),x=f("input"),Ae=y(),ae=f("button"),Be=d("create deck"),this.h()},l(e){a=_(e,"P",{});var u=p(a);n=v(u,`Put your API Token here (it won't get send anywhere except jpdb.io). Don't
    share it with anyone!`),u.forEach(i),s=w(e),h=_(e,"INPUT",{type:!0}),g=w(e),T=_(e,"BUTTON",{type:!0});var r=p(T);U=v(r,"Ping"),r.forEach(i),J=w(e),F=_(e,"P",{});var ee=p(F);B=v(ee,"Result:"),ee.forEach(i),P=w(e),R=_(e,"PRE",{});var de=p(R);W=v(de,"    "),K=v(de,l[1]),S=v(de,`
`),de.forEach(i),M=w(e),H=_(e,"BUTTON",{type:!0});var Je=p(H);Z=v(Je,"Fetch user decks"),Je.forEach(i),V=v(e,`
Min coverage:
`),j=_(e,"INPUT",{type:!0}),Q=v(e,`
Min learning coverage:
`),O=_(e,"INPUT",{type:!0}),X=v(e,`
Filter builtin:
`),C=_(e,"INPUT",{type:!0}),m=w(e),c=_(e,"DIV",{class:!0});var ve=p(c);o=_(ve,"DIV",{});var be=p(o);b=_(be,"H3",{});var Ce=p(b);L=v(Ce,"Decklist"),Ce.forEach(i),z=w(be),A=_(be,"TABLE",{class:!0});var ke=p(A);D=_(ke,"TR",{class:!0});var te=p(D);$=_(te,"TH",{});var Le=p($);ye=v(Le,"name"),Le.forEach(i),we=w(te),ue=_(te,"TH",{});var ze=p(ue);ge=v(ze,"coverage"),ze.forEach(i),Ee=w(te),fe=_(te,"TH",{});var Ge=p(fe);Te=v(Ge,"learning coverage"),Ge.forEach(i),Pe=w(te),_e=_(te,"TH",{});var Ke=p(_e);je=v(Ke,"is_built_in"),Ke.forEach(i),te.forEach(i),De=w(ke);for(let ne=0;ne<q.length;ne+=1)q[ne].l(ke);ke.forEach(i),be.forEach(i),Ne=w(ve),N=_(ve,"DIV",{id:!0});var G=p(N);he=_(G,"H3",{});var Qe=p(he);qe=v(Qe,"Deckmerger"),Qe.forEach(i),Ie=v(G,`
        selected decks:`),Re=_(G,"BR",{}),Ue=w(G);for(let ne=0;ne<I.length;ne+=1)I[ne].l(G);pe=w(G),ie=_(G,"BUTTON",{});var We=p(ie);Fe=v(We,"Reset selection"),We.forEach(i),He=w(G),se=_(G,"P",{});var Me=p(se);Oe=v(Me,`Name of new deck
            `),x=_(Me,"INPUT",{type:!0}),Me.forEach(i),Ae=w(G),ae=_(G,"BUTTON",{});var Xe=p(ae);Be=v(Xe,"create deck"),Xe.forEach(i),G.forEach(i),ve.forEach(i),this.h()},h(){E(h,"type","password"),E(T,"type","button"),E(H,"type","button"),E(j,"type","number"),E(O,"type","number"),E(C,"type","checkbox"),E(D,"class","svelte-15q9i7h"),E(A,"class","svelte-15q9i7h"),E(x,"type","text"),E(N,"id","deckmerger_div"),E(c,"class","container svelte-15q9i7h")},m(e,u){k(e,a,u),t(a,n),k(e,s,u),k(e,h,u),le(h,l[0]),k(e,g,u),k(e,T,u),t(T,U),k(e,J,u),k(e,F,u),t(F,B),k(e,P,u),k(e,R,u),t(R,W),t(R,K),t(R,S),k(e,M,u),k(e,H,u),t(H,Z),k(e,V,u),k(e,j,u),le(j,l[4]),k(e,Q,u),k(e,O,u),le(O,l[5]),k(e,X,u),k(e,C,u),C.checked=l[6],k(e,m,u),k(e,c,u),t(c,o),t(o,b),t(b,L),t(o,z),t(o,A),t(A,D),t(D,$),t($,ye),t(D,we),t(D,ue),t(ue,ge),t(D,Ee),t(D,fe),t(fe,Te),t(D,Pe),t(D,_e),t(_e,je),t(A,De);for(let r=0;r<q.length;r+=1)q[r]&&q[r].m(A,null);t(c,Ne),t(c,N),t(N,he),t(he,qe),t(N,Ie),t(N,Re),t(N,Ue);for(let r=0;r<I.length;r+=1)I[r]&&I[r].m(N,null);t(N,pe),t(N,ie),t(ie,Fe),t(N,He),t(N,se),t(se,Oe),t(se,x),le(x,l[7]),t(N,Ae),t(N,ae),t(ae,Be),Se||(Ve=[Y(h,"input",l[13]),Y(T,"click",l[8]),Y(H,"click",l[9]),Y(j,"input",l[14]),Y(O,"input",l[15]),Y(C,"change",l[16]),Y(ie,"click",l[18]),Y(x,"input",l[19]),Y(ae,"click",l[20])],Se=!0)},p(e,[u]){if(u&1&&h.value!==e[0]&&le(h,e[0]),u&2&&ce(K,e[1]),u&16&&me(j.value)!==e[4]&&le(j,e[4]),u&32&&me(O.value)!==e[5]&&le(O,e[5]),u&64&&(C.checked=e[6]),u&124){oe=e[2];let r;for(r=0;r<oe.length;r+=1){const ee=et(e,oe,r);q[r]?q[r].p(ee,u):(q[r]=lt(ee),q[r].c(),q[r].m(A,null))}for(;r<q.length;r+=1)q[r].d(1);q.length=oe.length}if(u&8){re=e[3];let r;for(r=0;r<re.length;r+=1){const ee=xe(e,re,r);I[r]?I[r].p(ee,u):(I[r]=nt(ee),I[r].c(),I[r].m(N,pe))}for(;r<I.length;r+=1)I[r].d(1);I.length=re.length}u&128&&x.value!==e[7]&&le(x,e[7])},i:Ye,o:Ye,d(e){e&&i(a),e&&i(s),e&&i(h),e&&i(g),e&&i(T),e&&i(J),e&&i(F),e&&i(P),e&&i(R),e&&i(M),e&&i(H),e&&i(V),e&&i(j),e&&i(Q),e&&i(O),e&&i(X),e&&i(C),e&&i(m),e&&i(c),Ze(q,e),Ze(I,e),Se=!1,ot(Ve)}}}function ct(l,a,n){let s="",h="",g=[],T=[],U=80,J=80,F=!1,B="";async function P(m,c){let o=new Headers;return o.set("Authorization","Bearer "+s),o.set("Content-Type","application/json"),await fetch("https://jpdb.io/api/v1/"+m,{headers:o,method:"POST",body:JSON.stringify(c)})}async function R(){const c=await(await P("ping",{})).json();n(1,h=JSON.stringify(c))}async function W(){const c=await(await P("list-user-decks",{fields:["name","vocabulary_known_coverage","vocabulary_in_progress_coverage","is_built_in","id"]})).json();n(2,g=c.decks.map(o=>{let[b,L,z,A,D]=o;return{name:b,id:D,known_coverage:L,learning_coverage:z,is_built_in:A}})),g.sort((o,b)=>o.name.localeCompare(b.name))}async function K(m){const c=await(await P("deck/list-vocabulary",{id:m.id,fetch_occurences:!0})).json();let o=[];for(let b=0;b<c.vocabulary.length;b++){let L={vid:c.vocabulary[b][0],sid:c.vocabulary[b][1],occurences:c.occurences[b]};o.push(L)}return{vocabs:o,...m}}async function S(m,c){let o=[],b=[];c.forEach(z=>{o.push([z.vid,z.sid]),b.push(z.occurences)});const L=await(await P("deck/add-vocabulary",{id:m,vocabulary:o,occurences:b})).json();n(1,h=JSON.stringify(L))}async function M(m){return(await(await P("deck/create-empty",{name:m})).json()).id}function H(){s=this.value,n(0,s)}function Z(){U=me(this.value),n(4,U)}function V(){J=me(this.value),n(5,J)}function j(){F=this.checked,n(6,F)}const Q=m=>{T.push(m),n(3,T)},O=()=>{n(3,T=[])};function X(){B=this.value,n(7,B)}return[s,h,g,T,U,J,F,B,R,W,K,S,M,H,Z,V,j,Q,O,X,async()=>{if(B!==""){let m=await M(B);for(const c of T){const o=await K(c);await S(m,o.vocabs),console.log("Adding"+c.name)}}}]}class ft extends it{constructor(a){super(),st(this,a,ct,rt,at,{})}}export{ft as component};
